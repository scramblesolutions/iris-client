import{u as G,o as H,n as T,r as J,b as R,w as M,g as I,e as K,f as $,s as q}from"./index.927995fe.js";function B(e){return I()?(K(e),!0):!1}function N(e){return typeof e=="function"?e():G(e)}const F=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Q=Object.prototype.toString,U=e=>Q.call(e)==="[object Object]",X=()=>{};function Y(e,n){function t(...o){return new Promise((a,u)=>{Promise.resolve(e(()=>n.apply(this,o),{fn:n,thisArg:this,args:o})).then(a).catch(u)})}return t}const z=e=>e();function Z(e=z){const n=J(!0);function t(){n.value=!1}function o(){n.value=!0}const a=(...u)=>{n.value&&e(...u)};return{isActive:R(n),pause:t,resume:o,eventFilter:a}}function k(e){return e||$()}function ee(e,n,t={}){const{eventFilter:o=z,...a}=t;return M(e,Y(o,n),a)}function te(e,n,t={}){const{eventFilter:o,...a}=t,{eventFilter:u,pause:y,resume:m,isActive:S}=Z(o);return{stop:ee(e,n,{...a,eventFilter:u}),pause:y,resume:m,isActive:S}}function ne(e,n=!0,t){k()?H(e,t):n?e():T(e)}function re(e){var n;const t=N(e);return(n=t?.$el)!=null?n:t}const E=F?window:void 0;F&&window.document;F&&window.navigator;F&&window.location;function C(...e){let n,t,o,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,o,a]=e,n=E):[n,t,o,a]=e,!n)return X;Array.isArray(t)||(t=[t]),Array.isArray(o)||(o=[o]);const u=[],y=()=>{u.forEach(l=>l()),u.length=0},m=(l,s,g,c)=>(l.addEventListener(s,g,c),()=>l.removeEventListener(s,g,c)),S=M(()=>[re(n),N(a)],([l,s])=>{if(y(),!l)return;const g=U(s)?{...s}:s;u.push(...t.flatMap(c=>o.map(v=>m(l,c,v,g))))},{immediate:!0,flush:"post"}),d=()=>{S(),y()};return B(d),d}const A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},O="__vueuse_ssr_handlers__",oe=ie();function ie(){return O in A||(A[O]=A[O]||{}),A[O]}function ae(e,n){return oe[e]||n}function se(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const ue={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},D="vueuse-storage";function le(e,n,t,o={}){var a;const{flush:u="pre",deep:y=!0,listenToStorageChanges:m=!0,writeDefaults:S=!0,mergeDefaults:d=!1,shallow:l,window:s=E,eventFilter:g,onError:c=r=>{console.error(r)},initOnMounted:v}=o,p=(l?q:J)(typeof n=="function"?n():n);if(!t)try{t=ae("getDefaultStorage",()=>{var r;return(r=E)==null?void 0:r.localStorage})()}catch(r){c(r)}if(!t)return p;const w=N(n),_=se(w),h=(a=o.serializer)!=null?a:ue[_],{pause:L,resume:W}=te(p,()=>V(p.value),{flush:u,deep:y,eventFilter:g});s&&m&&ne(()=>{C(s,"storage",b),C(s,D,x),v&&b()}),v||b();function j(r,i){s&&s.dispatchEvent(new CustomEvent(D,{detail:{key:e,oldValue:r,newValue:i,storageArea:t}}))}function V(r){try{const i=t.getItem(e);if(r==null)j(i,null),t.removeItem(e);else{const f=h.write(r);i!==f&&(t.setItem(e,f),j(i,f))}}catch(i){c(i)}}function P(r){const i=r?r.newValue:t.getItem(e);if(i==null)return S&&w!=null&&t.setItem(e,h.write(w)),w;if(!r&&d){const f=h.read(i);return typeof d=="function"?d(f,w):_==="object"&&!Array.isArray(f)?{...w,...f}:f}else return typeof i!="string"?i:h.read(i)}function b(r){if(!(r&&r.storageArea!==t)){if(r&&r.key==null){p.value=w;return}if(!(r&&r.key!==e)){L();try{r?.newValue!==h.write(p.value)&&(p.value=P(r))}catch(i){c(i)}finally{r?T(W):W()}}}}function x(r){b(r.detail)}return p}function fe(e,n,t={}){const{window:o=E}=t;return le(e,n,o?.localStorage,t)}export{fe as u};
