import{C as es,D as Wi,r as Re,E as ae,F as Rn,o as Ai,an as qo,G as it,ao as pr,k as pe,A as Bt,ag as vr,ap as Po,R as Me,aa as Mo,f as Yt,aq as In,B as $t,w as xt,a4 as Io,ak as yr,ar as wr,I as ti,H as Ao,a as br,j as ut,as as Se,at as Ee,K as ot,L as F,M as ne,X as J,W as se,U as De,au as Ie,V as xe,Z as E,Q as m,O as v,Y as Pt,a1 as Tt,a2 as nn,T as W,S as re,av as ts,aw as ns,ax as is,y as rs,ay as os,m as as,az as ss,aA as ls,n as tn,aB as us,aC as cs,v as Hi,x as Mn,a8 as ds,aD as Kt,aE as ui,aF as fs,aG as hs,aH as Yr,aI as ms,aJ as gs,aK as ps,aL as vs,aM as ys,aN as ar,aO as sr,a0 as Ui,a7 as ws,al as wi,aP as bs,_ as ks}from"./index.927995fe.js";import{Q as ht,a as Le,b as Ct}from"./QItem.02426fde.js";import{u as _s,a as kr,b as Uo,c as Bo,d as $o,f as Zr,e as Ds,Q as _t,g as _r}from"./QInput.fdef4d8c.js";import{Q as Cs}from"./QResizeObserver.004c01c5.js";import{u as bi,a as xs,b as Ss,c as Ts,r as Jr,d as Es,e as qs,Q as Dt,f as kt,g as Ki}from"./welcome.9367a148.js";import{b as Xn,u as Ps,a as Ms,c as Is}from"./use-timeout.afd034c5.js";import{u as As,a as Us,b as Bs,c as $s,Q as Rs,d as Fs,i as Ls,A as Ns}from"./AndroidPWAPrompt.544a7c75.js";import{u as Bi,a as $i}from"./use-dark.3625dc1e.js";import{Q as Ro}from"./QExpansionItem.64c3a54d.js";import{g as Xt,Q as yt,u as Os,v as eo,a as Vs,b as zs,c as js,r as to,s as Ws,p as no,d as Hs,e as Ri,f as gt,C as lt,h as Ks,i as Qs,P as Xs,j as io,k as Gs}from"./npubcash.55b808ca.js";import{a as bn,c as Ys,d as Ke,e as Qt,u as et,f as dt,n as ro,g as pn,M as Fo,h as Zs,i as Gt,j as lr,k as yn,l as Qn,b as Js,m as Lo,t as He,o as el,p as zt,q as ni,s as No,v as Oo,w as tl,P as ci,x as jt,y as Vo,z as oo,A as nl,B as il,D as rl,N as ol,E as al,F as sl,G as zo,H as Si,I as jo,J as ll}from"./ui.d5c1e1dd.js";import{Q as Ot}from"./QSpinnerHourglass.7bb7d380.js";import{u as ur}from"./index.463654f8.js";import{a as An,Q as cn}from"./QList.52d670e3.js";import{s as ul,g as cl}from"./scroll.62b7b14d.js";import{a as dl,r as fl}from"./focusout.c3723004.js";import{a as Wo,u as hl,b as ml}from"./private.use-form.a5fba0e4.js";import{i as Dr}from"./vue-qrcode.esm.cd19a419.js";import{Q as gl}from"./QToolbarTitle.bcd193f5.js";import{Q as pl}from"./QToolbar.49c3c0de.js";import{Q as vl}from"./QLinearProgress.7906e966.js";import"./touch.9135741d.js";import"./selection.0264e392.js";let yl=0;const wl=["click","keydown"],bl={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${yl++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function kl(e,t,n,i){const r=es(qo,Wi);if(r===Wi)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Wi;const{proxy:a}=Yt(),l=Re(null),o=Re(null),h=Re(null),k=ae(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),b=ae(()=>r.currentModel.value===e.name),S=ae(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(b.value===!0?" q-tab--active"+(r.tabProps.value.activeClass?" "+r.tabProps.value.activeClass:"")+(r.tabProps.value.activeColor?` text-${r.tabProps.value.activeColor}`:"")+(r.tabProps.value.activeBgColor?` bg-${r.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&r.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||r.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(i!==void 0?i.linkClass.value:"")),T=ae(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(r.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),I=ae(()=>e.disable===!0||r.hasFocus.value===!0||b.value===!1&&r.hasActiveTab.value===!0?-1:e.tabindex||0);function j(te,ue){if(ue!==!0&&l.value!==null&&l.value.focus(),e.disable===!0){i!==void 0&&i.hasRouterLink.value===!0&&Bt(te);return}if(i===void 0){r.updateModel({name:e.name}),n("click",te);return}if(i.hasRouterLink.value===!0){const _e=(we={})=>{let fe;const g=we.to===void 0||In(we.to,e.to)===!0?r.avoidRouteWatcher=_s():null;return i.navigateToRouterLink(te,{...we,returnRouterError:!0}).catch(_=>{fe=_}).then(_=>{if(g===r.avoidRouteWatcher&&(r.avoidRouteWatcher=!1,fe===void 0&&(_===void 0||_.message!==void 0&&_.message.startsWith("Avoided redundant navigation")===!0)&&r.updateModel({name:e.name})),we.returnRouterError===!0)return fe!==void 0?Promise.reject(fe):_})};n("click",te,_e),te.defaultPrevented!==!0&&_e();return}n("click",te)}function G(te){vr(te,[13,32])?j(te,!0):Po(te)!==!0&&te.keyCode>=35&&te.keyCode<=40&&te.altKey!==!0&&te.metaKey!==!0&&r.onKbdNavigate(te.keyCode,a.$el)===!0&&Bt(te),n("keydown",te)}function X(){const te=r.tabProps.value.narrowIndicator,ue=[],_e=pe("div",{ref:h,class:["q-tab__indicator",r.tabProps.value.indicatorClass]});e.icon!==void 0&&ue.push(pe(Me,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&ue.push(pe("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&ue.push(e.alertIcon!==void 0?pe(Me,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):pe("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),te===!0&&ue.push(_e);const we=[pe("div",{class:"q-focus-helper",tabindex:-1,ref:l}),pe("div",{class:T.value},Mo(t.default,ue))];return te===!1&&we.push(_e),we}const oe={name:ae(()=>e.name),rootRef:o,tabIndicatorRef:h,routeData:i};Rn(()=>{r.unregisterTab(oe)}),Ai(()=>{r.registerTab(oe)});function H(te,ue){const _e={ref:o,class:S.value,tabindex:I.value,role:"tab","aria-selected":b.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:j,onKeydown:G,...ue};return it(pe(te,_e,X()),[[pr,k.value]])}return{renderTab:H,$tabs:r}}var Qi=$t({name:"QTab",props:bl,emits:wl,setup(e,{slots:t,emit:n}){const{renderTab:i}=kl(e,t,n);return()=>i("div")}});let Gn=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const t=document.createElement("div");Object.assign(t.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(t),e.scrollLeft=-1e3,Gn=e.scrollLeft>=0,e.remove()}function _l(e,t,n){const i=n===!0?["left","right"]:["top","bottom"];return`absolute-${t===!0?i[0]:i[1]}${e?` text-${e}`:""}`}const Dl=["left","center","right","justify"];var Cl=$t({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>Dl.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:t,emit:n}){const{proxy:i}=Yt(),{$q:r}=i,{registerTick:a}=bi(),{registerTick:l}=bi(),{registerTick:o}=bi(),{registerTimeout:h,removeTimeout:k}=Xn(),{registerTimeout:b,removeTimeout:S}=Xn(),T=Re(null),I=Re(null),j=Re(e.modelValue),G=Re(!1),X=Re(!0),oe=Re(!1),H=Re(!1),te=[],ue=Re(0),_e=Re(!1);let we=null,fe=null,g;const _=ae(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:_l(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),C=ae(()=>{const R=ue.value,ie=j.value;for(let he=0;he<R;he++)if(te[he].name.value===ie)return!0;return!1}),O=ae(()=>`q-tabs__content--align-${G.value===!0?"left":H.value===!0?"justify":e.align}`),x=ae(()=>`q-tabs row no-wrap items-center q-tabs--${G.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),q=ae(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+O.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),B=ae(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),P=ae(()=>e.vertical!==!0&&r.lang.rtl===!0),$=ae(()=>Gn===!1&&P.value===!0);xt(P,K),xt(()=>e.modelValue,R=>{V({name:R,setCurrent:!0,skipEmit:!0})}),xt(()=>e.outsideArrows,L);function V({name:R,setCurrent:ie,skipEmit:he}){j.value!==R&&(he!==!0&&e["onUpdate:modelValue"]!==void 0&&n("update:modelValue",R),(ie===!0||e["onUpdate:modelValue"]===void 0)&&(ge(j.value,R),j.value=R))}function L(){a(()=>{T.value&&Q({width:T.value.offsetWidth,height:T.value.offsetHeight})})}function Q(R){if(B.value===void 0||I.value===null)return;const ie=R[B.value.container],he=Math.min(I.value[B.value.scroll],Array.prototype.reduce.call(I.value.children,(Be,f)=>Be+(f[B.value.content]||0),0)),Ce=ie>0&&he>ie;G.value=Ce,Ce===!0&&l(K),H.value=ie<parseInt(e.breakpoint,10)}function ge(R,ie){const he=R!=null&&R!==""?te.find(Be=>Be.name.value===R):null,Ce=ie!=null&&ie!==""?te.find(Be=>Be.name.value===ie):null;if(Y===!0)Y=!1;else if(he&&Ce){const Be=he.tabIndicatorRef.value,f=Ce.tabIndicatorRef.value;we!==null&&(clearTimeout(we),we=null),Be.style.transition="none",Be.style.transform="none",f.style.transition="none",f.style.transform="none";const s=Be.getBoundingClientRect(),u=f.getBoundingClientRect();f.style.transform=e.vertical===!0?`translate3d(0,${s.top-u.top}px,0) scale3d(1,${u.height?s.height/u.height:1},1)`:`translate3d(${s.left-u.left}px,0,0) scale3d(${u.width?s.width/u.width:1},1,1)`,o(()=>{we=setTimeout(()=>{we=null,f.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",f.style.transform="none"},70)})}Ce&&G.value===!0&&M(Ce.rootRef.value)}function M(R){const{left:ie,width:he,top:Ce,height:Be}=I.value.getBoundingClientRect(),f=R.getBoundingClientRect();let s=e.vertical===!0?f.top-Ce:f.left-ie;if(s<0){I.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(s),K();return}s+=e.vertical===!0?f.height-Be:f.width-he,s>0&&(I.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(s),K())}function K(){const R=I.value;if(R===null)return;const ie=R.getBoundingClientRect(),he=e.vertical===!0?R.scrollTop:Math.abs(R.scrollLeft);P.value===!0?(X.value=Math.ceil(he+ie.width)<R.scrollWidth-1,oe.value=he>0):(X.value=he>0,oe.value=e.vertical===!0?Math.ceil(he+ie.height)<R.scrollHeight:Math.ceil(he+ie.width)<R.scrollWidth)}function me(R){fe!==null&&clearInterval(fe),fe=setInterval(()=>{le(R)===!0&&ce()},5)}function Te(){me($.value===!0?Number.MAX_SAFE_INTEGER:0)}function be(){me($.value===!0?0:Number.MAX_SAFE_INTEGER)}function ce(){fe!==null&&(clearInterval(fe),fe=null)}function ke(R,ie){const he=Array.prototype.filter.call(I.value.children,u=>u===ie||u.matches&&u.matches(".q-tab.q-focusable")===!0),Ce=he.length;if(Ce===0)return;if(R===36)return M(he[0]),he[0].focus(),!0;if(R===35)return M(he[Ce-1]),he[Ce-1].focus(),!0;const Be=R===(e.vertical===!0?38:37),f=R===(e.vertical===!0?40:39),s=Be===!0?-1:f===!0?1:void 0;if(s!==void 0){const u=P.value===!0?-1:1,w=he.indexOf(ie)+s*u;return w>=0&&w<Ce&&(M(he[w]),he[w].focus({preventScroll:!0})),!0}}const Fe=ae(()=>$.value===!0?{get:R=>Math.abs(R.scrollLeft),set:(R,ie)=>{R.scrollLeft=-ie}}:e.vertical===!0?{get:R=>R.scrollTop,set:(R,ie)=>{R.scrollTop=ie}}:{get:R=>R.scrollLeft,set:(R,ie)=>{R.scrollLeft=ie}});function le(R){const ie=I.value,{get:he,set:Ce}=Fe.value;let Be=!1,f=he(ie);const s=R<f?-1:1;return f+=s*5,f<0?(Be=!0,f=0):(s===-1&&f<=R||s===1&&f>=R)&&(Be=!0,f=R),Ce(ie,f),K(),Be}function Ge(R,ie){for(const he in R)if(R[he]!==ie[he])return!1;return!0}function Ye(){let R=null,ie={matchedLen:0,queryDiff:9999,hrefLen:0};const he=te.filter(s=>s.routeData!==void 0&&s.routeData.hasRouterLink.value===!0),{hash:Ce,query:Be}=i.$route,f=Object.keys(Be).length;for(const s of he){const u=s.routeData.exact.value===!0;if(s.routeData[u===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:w,query:U,matched:z,href:Z}=s.routeData.resolvedLink.value,Ae=Object.keys(U).length;if(u===!0){if(w!==Ce||Ae!==f||Ge(Be,U)===!1)continue;R=s.name.value;break}if(w!==""&&w!==Ce||Ae!==0&&Ge(U,Be)===!1)continue;const We={matchedLen:z.length,queryDiff:f-Ae,hrefLen:Z.length-w.length};if(We.matchedLen>ie.matchedLen){R=s.name.value,ie=We;continue}else if(We.matchedLen!==ie.matchedLen)continue;if(We.queryDiff<ie.queryDiff)R=s.name.value,ie=We;else if(We.queryDiff!==ie.queryDiff)continue;We.hrefLen>ie.hrefLen&&(R=s.name.value,ie=We)}if(R===null&&te.some(s=>s.routeData===void 0&&s.name.value===j.value)===!0){Y=!1;return}V({name:R,setCurrent:!0})}function st(R){if(k(),_e.value!==!0&&T.value!==null&&R.target&&typeof R.target.closest=="function"){const ie=R.target.closest(".q-tab");ie&&T.value.contains(ie)===!0&&(_e.value=!0,G.value===!0&&M(ie))}}function Ue(){h(()=>{_e.value=!1},30)}function ze(){d.avoidRouteWatcher===!1?b(Ye):S()}function Oe(){if(g===void 0){const R=xt(()=>i.$route.fullPath,ze);g=()=>{R(),g=void 0}}}function y(R){te.push(R),ue.value++,L(),R.routeData===void 0||i.$route===void 0?b(()=>{if(G.value===!0){const ie=j.value,he=ie!=null&&ie!==""?te.find(Ce=>Ce.name.value===ie):null;he&&M(he.rootRef.value)}}):(Oe(),R.routeData.hasRouterLink.value===!0&&ze())}function c(R){te.splice(te.indexOf(R),1),ue.value--,L(),g!==void 0&&R.routeData!==void 0&&(te.every(ie=>ie.routeData===void 0)===!0&&g(),ze())}const d={currentModel:j,tabProps:_,hasFocus:_e,hasActiveTab:C,registerTab:y,unregisterTab:c,verifyRouteModel:ze,updateModel:V,onKbdNavigate:ke,avoidRouteWatcher:!1};Io(qo,d);function D(){we!==null&&clearTimeout(we),ce(),g!==void 0&&g()}let N,Y;return Rn(D),yr(()=>{N=g!==void 0,D()}),wr(()=>{N===!0&&(Oe(),Y=!0,ze()),L()}),()=>pe("div",{ref:T,class:x.value,role:"tablist",onFocusin:st,onFocusout:Ue},[pe(Cs,{onResize:Q}),pe("div",{ref:I,class:q.value,onScroll:K},ti(t.default)),pe(Me,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(X.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||r.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:Te,onTouchstartPassive:Te,onMouseupPassive:ce,onMouseleavePassive:ce,onTouchendPassive:ce}),pe(Me,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(oe.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||r.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:be,onTouchstartPassive:be,onMouseupPassive:ce,onMouseleavePassive:ce,onTouchendPassive:ce})])}}),Xi=$t({name:"QTabPanel",props:As,setup(e,{slots:t}){return()=>pe("div",{class:"q-tab-panel",role:"tabpanel"},ti(t.default))}}),xl=$t({name:"QTabPanels",props:{...Us,...Bi},emits:Bs,setup(e,{slots:t}){const n=Yt(),i=$i(e,n.proxy.$q),{updatePanelsList:r,getPanelContent:a,panelDirectives:l}=$s(),o=ae(()=>"q-tab-panels q-panel-parent"+(i.value===!0?" q-tab-panels--dark q-dark":""));return()=>(r(t),Ao("div",{class:o.value},a(),"pan",e.swipeable,()=>l.value))}});function Cr(e,t=20,n=5){if(e.length>t+n)return e.substring(0,t)+"..."+e.substring(e.length-n,e.length)}const Yn=br("price",{state:()=>({bitcoinPrice:ur("cashu.price.bitcoinPrice",0),bitcoinPriceLastUpdated:ur("cashu.price.bitcoinPriceLastUpdated",0),bitcoinPriceMinRefreshInterval:6e4}),actions:{fetchBitcoinPriceUSD:async function(){if(!bn().getBitcoinPrice){this.bitcoinPrice=0,this.bitcoinPriceLastUpdated=0,console.log("Not fetching bitcoin price, disabled in settings");return}if(Date.now()-this.bitcoinPriceLastUpdated<this.bitcoinPriceMinRefreshInterval){console.log(`Not fetching bitcoin price, last updated ${Date.now()-this.bitcoinPriceLastUpdated}ms ago: ${this.bitcoinPrice}`);return}var{data:e}=await Ys.get("https://api.coinbase.com/v2/exchange-rates?currency=BTC");this.bitcoinPrice=e.data.rates.USD,this.bitcoinPriceLastUpdated=Date.now()}},getters:{}}),Sl=ut({name:"ToggleUnit",mixins:[windowMixin],props:{balanceView:{type:Boolean,required:!1},color:{type:String,default:"primary"}},data:function(){return{chosenMint:null}},mounted(){},watch:{},computed:{...Se(Ke,["activeUnit","activeUnitLabel"]),activeUnitLabelAdopted:function(){return this.balanceView?this.activeUnitLabel==="SAT"?"BTC":this.activeUnitLabel:this.activeUnitLabel}},methods:{...Ee(Ke,["toggleUnit"])}});function Tl(e,t,n,i,r,a){return F(),ne(J,{rounded:"",outline:"",color:e.color,onClick:t[0]||(t[0]=l=>e.toggleUnit()),label:e.activeUnitLabelAdopted},null,8,["color","label"])}var xr=ot(Sl,[["render",Tl]]);const El=ut({name:"AnimatedNumber",props:{value:{type:Number,required:!0},duration:{type:Number,default:1e3},format:{type:Function,required:!0}},setup(e){const t=Re(e.value);return xt(()=>e.value,(i,r)=>{const a=performance.now(),l=r!==void 0?r:i,o=i,h=k=>{const b=k-a,S=Math.min(b/e.duration,1),T=l+(o-l)*S;t.value=T,S<1&&requestAnimationFrame(h)};requestAnimationFrame(h)},{immediate:!0}),{formattedValue:ae(()=>e.format(t.value))}}});function ql(e,t,n,i,r,a){return F(),se("span",{onClick:t[0]||(t[0]=l=>e.$emit("click"))},De(e.formattedValue),1)}var Pl=ot(El,[["render",ql]]);const Ml=ut({name:"BalanceView",mixins:[windowMixin],components:{ToggleUnit:xr,AnimatedNumber:Pl},props:{setTab:Function},computed:{...Se(Ke,["activeMintUrl","activeProofs","mints","proofs","activeBalance","activeUnit","activeMint"]),...Se(Qt,["historyTokens"]),...Se(et,["globalMutexLock"]),...Se(Yn,["bitcoinPrice"]),...Ie(Ke,["activeUnit"]),...Ie(et,["hideBalance"]),pendingBalance:function(){return-this.historyTokens.filter(e=>e.status=="pending").filter(e=>e.unit==this.activeUnit).reduce((e,t)=>e+=t.amount,0)},balance:function(){return this.activeProofs.flat().reduce((e,t)=>e+=t.amount,0)},balancesOptions:function(){const e=this.activeMint();return Object.entries(e.allBalances).map(([t,n])=>({label:t,value:t}))},allMintKeysets:function(){return[].concat(...this.mints.map(e=>e.keysets))},getTotalBalance:function(){return this.activeBalance},getActiveMintBalance:function(){return this.activeProofs.flat().reduce((e,t)=>e+=t.amount,0)},activeMintLabel:function(){return this.activeMint().mint.nickname||Xt(this.activeMintUrl)},getBalance:function(){var e=this.activeProofs.flat().reduce((t,n)=>t+=n.amount,0);return e}},data(){return{priceLabel:null}},mounted(){this.fetchBitcoinPriceUSD()},methods:{...Ee(dt,["checkPendingTokens"]),...Ee(Yn,["fetchBitcoinPriceUSD"]),toggleUnit:function(){const e=this.activeMint().units;return this.activeUnit=e[(e.indexOf(this.activeUnit)+1)%e.length],this.activeUnit},toggleHideBalance(){this.hideBalance=!this.hideBalance}}}),Il={class:"q-pt-xl q-pb-md"},Al={class:"row justify-center q-pb-lg",style:{height:"80px"}},Ul={key:0},Bl={key:1},$l={class:"row"},Rl={class:"col-12"},Fl={key:0},Ll={key:0},Nl={key:1},Ol={key:0,class:"row q-mt-md q-mb-none text-secondary"},Vl={class:"col-12 cursor-pointer"},zl={key:1,class:"row q-mb-none text-secondary"},jl={class:"col-12"},Wl={class:"q-my-none q-py-none text-weight-regular"},Hl={key:0,class:"row q-mt-xs q-mb-none"},Kl={class:"col-12"};function Ql(e,t,n,i,r,a){const l=xe("ToggleUnit"),o=xe("AnimatedNumber");return F(),se(Tt,null,[E("div",Il,[E("div",Al,[e.globalMutexLock?(F(),se("div",Ul,[m(Pt,{appear:"","enter-active-class":"animated pulse","leave-active-class":"animated fadeOut"},{default:v(()=>[m(Ot,{class:"q-mt-lg q-mb-none",size:"lg",color:"primary"})]),_:1})])):(F(),se("div",Bl,[m(Pt,{appear:"","enter-active-class":"animated pulse","leave-active-class":"animated fadeOut"},{default:v(()=>[m(l,{class:"q-mt-lg q-mb-none",balanceView:!0})]),_:1})]))]),m(Pt,{appear:"","enter-active-class":"animated fadeInDown","leave-active-class":"animated fadeInDown",mode:"out-in"},{default:v(()=>[m(Rs,{modelValue:this.activeUnit,"onUpdate:modelValue":t[1]||(t[1]=h=>this.activeUnit=h),"transition-prev":"jump-up","transition-next":"jump-up",swipeable:"",animated:"",height:e.$q.screen.width<390?"130px":"80px","control-color":"primary",class:"bg-transparent rounded-borders q-mb-xl q-mt-xl text-primary"},{default:v(()=>[(F(!0),se(Tt,null,nn(e.balancesOptions,h=>(F(),ne(Fs,{key:h.value,name:h.value,class:"q-pt-none"},{default:v(()=>[E("div",$l,[E("div",Rl,[E("h3",{class:"q-my-none q-py-none cursor-pointer",onClick:t[0]||(t[0]=(...k)=>e.toggleHideBalance&&e.toggleHideBalance(...k))},[E("strong",null,[m(o,{value:e.getTotalBalance,format:k=>e.formatCurrency(k,e.activeUnit),class:"q-my-none q-py-none cursor-pointer"},null,8,["value","format"])])]),e.bitcoinPrice?(F(),se("div",Fl,[this.activeUnit=="sat"?(F(),se("strong",Ll,[m(o,{value:e.bitcoinPrice/1e8*e.getTotalBalance,format:k=>e.formatCurrency(k,"USD")},null,8,["value","format"])])):re("",!0),this.activeUnit=="usd"||this.activeUnit=="eur"?(F(),se("strong",Nl,[m(o,{value:e.getTotalBalance/100/e.bitcoinPrice*1e8,format:k=>e.formatCurrency(k,"sat")},null,8,["value","format"])])):re("",!0),m(yt,null,{default:v(()=>[W(De(e.formatCurrency(e.bitcoinPrice,"USD").slice(1))+" USD/BTC",1)]),_:1})])):re("",!0)])])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue","height"])]),_:1}),e.activeMintUrl?(F(),se("div",Ol,[E("div",Vl,[E("span",{class:"text-weight-light",onClick:t[2]||(t[2]=h=>e.setTab("mints"))},[t[4]||(t[4]=W(" Mint: ")),E("b",null,De(e.activeMintLabel),1)])])])):re("",!0),e.mints.length>1?(F(),se("div",zl,[E("div",jl,[E("span",Wl,[t[5]||(t[5]=W(" Balance: ")),E("b",null,[m(o,{value:e.getActiveMintBalance,format:h=>e.formatCurrency(h,e.activeUnit),class:"q-my-none q-py-none cursor-pointer"},null,8,["value","format"])])])])])):re("",!0)]),e.pendingBalance>0?(F(),se("div",Hl,[E("div",Kl,[m(J,{name:"history",size:"sm",align:"between",color:"secondary",dense:"",outline:"",class:"q-mx-none q-mt-xs q-pr-sm cursor-pointer",onClick:t[3]||(t[3]=h=>e.checkPendingTokens())},{default:v(()=>[m(Me,{name:"history",size:"1rem",class:"q-mx-xs"}),W(" Pending: "+De(e.formatCurrency(e.pendingBalance,this.activeUnit))+" ",1),m(yt,null,{default:v(()=>t[6]||(t[6]=[W("Check all pending tokens")])),_:1})]),_:1})])])):re("",!0)],64)}var Xl=ot(Ml,[["render",Ql],["__scopeId","data-v-2cad51f2"]]),Gl=$t({name:"QField",inheritAttrs:!1,props:{...kr,tag:{type:String,default:"label"}},emits:Uo,setup(){return Bo($o({tagProp:!0}))}});const Yl={xs:8,sm:10,md:14,lg:20,xl:24};var dn=$t({name:"QChip",props:{...Bi,...ts,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:t,emit:n}){const{proxy:{$q:i}}=Yt(),r=$i(e,i),a=ns(e,Yl),l=ae(()=>e.selected===!0||e.icon!==void 0),o=ae(()=>e.selected===!0?e.iconSelected||i.iconSet.chip.selected:e.icon),h=ae(()=>e.iconRemove||i.iconSet.chip.remove),k=ae(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),b=ae(()=>{const X=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(X?` text-${X} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(k.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(r.value===!0?" q-chip--dark q-dark":"")}),S=ae(()=>{const X=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},oe={...X,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||i.lang.label.remove};return{chip:X,remove:oe}});function T(X){X.keyCode===13&&I(X)}function I(X){e.disable||(n("update:selected",!e.selected),n("click",X))}function j(X){(X.keyCode===void 0||X.keyCode===13)&&(Bt(X),e.disable===!1&&(n("update:modelValue",!1),n("remove")))}function G(){const X=[];k.value===!0&&X.push(pe("div",{class:"q-focus-helper"})),l.value===!0&&X.push(pe(Me,{class:"q-chip__icon q-chip__icon--left",name:o.value}));const oe=e.label!==void 0?[pe("div",{class:"ellipsis"},[e.label])]:void 0;return X.push(pe("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},is(t.default,oe))),e.iconRight&&X.push(pe(Me,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&X.push(pe(Me,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:h.value,...S.value.remove,onClick:j,onKeyup:j})),X}return()=>{if(e.modelValue===!1)return;const X={class:b.value,style:a.value};return k.value===!0&&Object.assign(X,S.value.chip,{onClick:I,onKeyup:T}),Ao("div",X,G(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[pr,e.ripple]])}}}),Zl=$t({name:"QMenu",inheritAttrs:!1,props:{...Os,...Ps,...Bi,...xs,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:eo},self:{type:String,validator:eo},offset:{type:Array,validator:Vs},scrollTarget:ul,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Ms,"click","escapeKey"],setup(e,{slots:t,emit:n,attrs:i}){let r=null,a,l,o;const h=Yt(),{proxy:k}=h,{$q:b}=k,S=Re(null),T=Re(!1),I=ae(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),j=$i(e,b),{registerTick:G,removeTick:X}=bi(),{registerTimeout:oe}=Xn(),{transitionProps:H,transitionStyle:te}=Ss(e),{localScrollTarget:ue,changeScrollEvent:_e,unconfigureScrollTarget:we}=zs(e,me),{anchorEl:fe,canShow:g}=js({showing:T}),{hide:_}=Is({showing:T,canShow:g,handleShow:ge,handleHide:M,hideOnRouteChange:I,processOnMount:!0}),{showPortal:C,hidePortal:O,renderPortal:x}=Ts(h,S,Fe,"menu"),q={anchorEl:fe,innerRef:S,onClickOutside(le){if(e.persistent!==!0&&T.value===!0)return _(le),(le.type==="touchstart"||le.target.classList.contains("q-dialog__backdrop"))&&Bt(le),!0}},B=ae(()=>no(e.anchor||(e.cover===!0?"center middle":"bottom start"),b.lang.rtl)),P=ae(()=>e.cover===!0?B.value:no(e.self||"top start",b.lang.rtl)),$=ae(()=>(e.square===!0?" q-menu--square":"")+(j.value===!0?" q-menu--dark q-dark":"")),V=ae(()=>e.autoClose===!0?{onClick:Te}:{}),L=ae(()=>T.value===!0&&e.persistent!==!0);xt(L,le=>{le===!0?(qs(ce),Hs(q)):(Jr(ce),to(q))});function Q(){Wo(()=>{let le=S.value;le&&le.contains(document.activeElement)!==!0&&(le=le.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||le.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||le.querySelector("[autofocus], [data-autofocus]")||le,le.focus({preventScroll:!0}))})}function ge(le){if(r=e.noRefocus===!1?document.activeElement:null,dl(be),C(),me(),a=void 0,le!==void 0&&(e.touchPosition||e.contextMenu)){const Ge=rs(le);if(Ge.left!==void 0){const{top:Ye,left:st}=fe.value.getBoundingClientRect();a={left:Ge.left-st,top:Ge.top-Ye}}}l===void 0&&(l=xt(()=>b.screen.width+"|"+b.screen.height+"|"+e.self+"|"+e.anchor+"|"+b.lang.rtl,ke)),e.noFocus!==!0&&document.activeElement.blur(),G(()=>{ke(),e.noFocus!==!0&&Q()}),oe(()=>{b.platform.is.ios===!0&&(o=e.autoClose,S.value.click()),ke(),C(!0),n("show",le)},e.transitionDuration)}function M(le){X(),O(),K(!0),r!==null&&(le===void 0||le.qClickOutside!==!0)&&(((le&&le.type.indexOf("key")===0?r.closest('[tabindex]:not([tabindex^="-"])'):void 0)||r).focus(),r=null),oe(()=>{O(!0),n("hide",le)},e.transitionDuration)}function K(le){a=void 0,l!==void 0&&(l(),l=void 0),(le===!0||T.value===!0)&&(fl(be),we(),to(q),Jr(ce)),le!==!0&&(r=null)}function me(){(fe.value!==null||e.scrollTarget!==void 0)&&(ue.value=cl(fe.value,e.scrollTarget),_e(ue.value,ke))}function Te(le){o!==!0?(Es(k,le),n("click",le)):o=!1}function be(le){L.value===!0&&e.noFocus!==!0&&os(S.value,le.target)!==!0&&Q()}function ce(le){n("escapeKey"),_(le)}function ke(){Ws({targetEl:S.value,offset:e.offset,anchorEl:fe.value,anchorOrigin:B.value,selfOrigin:P.value,absoluteOffset:a,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function Fe(){return pe(Pt,H.value,()=>T.value===!0?pe("div",{role:"menu",...i,ref:S,tabindex:-1,class:["q-menu q-position-engine scroll"+$.value,i.class],style:[i.style,te.value],...V.value},ti(t.default)):null)}return Rn(K),Object.assign(k,{focus:Q,updatePosition:ke}),x}});const Nt=1e3,Jl=["start","center","end","start-force","center-force","end-force"],Ho=Array.prototype.filter,eu=window.getComputedStyle(document.body).overflowAnchor===void 0?as:function(e,t){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const n=e.children||[];Ho.call(n,r=>r.dataset&&r.dataset.qVsAnchor!==void 0).forEach(r=>{delete r.dataset.qVsAnchor});const i=n[t];i&&i.dataset&&(i.dataset.qVsAnchor="")}))};function Un(e,t){return e+t}function Gi(e,t,n,i,r,a,l,o){const h=e===window?document.scrollingElement||document.documentElement:e,k=r===!0?"offsetWidth":"offsetHeight",b={scrollStart:0,scrollViewSize:-l-o,scrollMaxSize:0,offsetStart:-l,offsetEnd:-o};if(r===!0?(e===window?(b.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,b.scrollViewSize+=document.documentElement.clientWidth):(b.scrollStart=h.scrollLeft,b.scrollViewSize+=h.clientWidth),b.scrollMaxSize=h.scrollWidth,a===!0&&(b.scrollStart=(Gn===!0?b.scrollMaxSize-b.scrollViewSize:0)-b.scrollStart)):(e===window?(b.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,b.scrollViewSize+=document.documentElement.clientHeight):(b.scrollStart=h.scrollTop,b.scrollViewSize+=h.clientHeight),b.scrollMaxSize=h.scrollHeight),n!==null)for(let S=n.previousElementSibling;S!==null;S=S.previousElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(b.offsetStart+=S[k]);if(i!==null)for(let S=i.nextElementSibling;S!==null;S=S.nextElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(b.offsetEnd+=S[k]);if(t!==e){const S=h.getBoundingClientRect(),T=t.getBoundingClientRect();r===!0?(b.offsetStart+=T.left-S.left,b.offsetEnd-=T.width):(b.offsetStart+=T.top-S.top,b.offsetEnd-=T.height),e!==window&&(b.offsetStart+=b.scrollStart),b.offsetEnd+=b.scrollMaxSize-b.offsetStart}return b}function ao(e,t,n,i){t==="end"&&(t=(e===window?document.body:e)[n===!0?"scrollWidth":"scrollHeight"]),e===window?n===!0?(i===!0&&(t=(Gn===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-t),window.scrollTo(t,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t):n===!0?(i===!0&&(t=(Gn===!0?e.scrollWidth-e.offsetWidth:0)-t),e.scrollLeft=t):e.scrollTop=t}function jn(e,t,n,i){if(n>=i)return 0;const r=t.length,a=Math.floor(n/Nt),l=Math.floor((i-1)/Nt)+1;let o=e.slice(a,l).reduce(Un,0);return n%Nt!==0&&(o-=t.slice(a*Nt,n).reduce(Un,0)),i%Nt!==0&&i!==r&&(o-=t.slice(i,l*Nt).reduce(Un,0)),o}const tu={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},so={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...tu};function nu({virtualScrollLength:e,getVirtualScrollTarget:t,getVirtualScrollEl:n,virtualScrollItemSizeComputed:i}){const r=Yt(),{props:a,emit:l,proxy:o}=r,{$q:h}=o;let k,b,S,T=[],I;const j=Re(0),G=Re(0),X=Re({}),oe=Re(null),H=Re(null),te=Re(null),ue=Re({from:0,to:0}),_e=ae(()=>a.tableColspan!==void 0?a.tableColspan:100);i===void 0&&(i=ae(()=>a.virtualScrollItemSize));const we=ae(()=>i.value+";"+a.virtualScrollHorizontal),fe=ae(()=>we.value+";"+a.virtualScrollSliceRatioBefore+";"+a.virtualScrollSliceRatioAfter);xt(fe,()=>{$()}),xt(we,g);function g(){P(b,!0)}function _(M){P(M===void 0?b:M)}function C(M,K){const me=t();if(me==null||me.nodeType===8)return;const Te=Gi(me,n(),oe.value,H.value,a.virtualScrollHorizontal,h.lang.rtl,a.virtualScrollStickySizeStart,a.virtualScrollStickySizeEnd);S!==Te.scrollViewSize&&$(Te.scrollViewSize),x(me,Te,Math.min(e.value-1,Math.max(0,parseInt(M,10)||0)),0,Jl.indexOf(K)!==-1?K:b!==-1&&M>b?"end":"start")}function O(){const M=t();if(M==null||M.nodeType===8)return;const K=Gi(M,n(),oe.value,H.value,a.virtualScrollHorizontal,h.lang.rtl,a.virtualScrollStickySizeStart,a.virtualScrollStickySizeEnd),me=e.value-1,Te=K.scrollMaxSize-K.offsetStart-K.offsetEnd-G.value;if(k===K.scrollStart)return;if(K.scrollMaxSize<=0){x(M,K,0,0);return}S!==K.scrollViewSize&&$(K.scrollViewSize),q(ue.value.from);const be=Math.floor(K.scrollMaxSize-Math.max(K.scrollViewSize,K.offsetEnd)-Math.min(I[me],K.scrollViewSize/2));if(be>0&&Math.ceil(K.scrollStart)>=be){x(M,K,me,K.scrollMaxSize-K.offsetEnd-T.reduce(Un,0));return}let ce=0,ke=K.scrollStart-K.offsetStart,Fe=ke;if(ke<=Te&&ke+K.scrollViewSize>=j.value)ke-=j.value,ce=ue.value.from,Fe=ke;else for(let le=0;ke>=T[le]&&ce<me;le++)ke-=T[le],ce+=Nt;for(;ke>0&&ce<me;)ke-=I[ce],ke>-K.scrollViewSize?(ce++,Fe=ke):Fe=I[ce]+ke;x(M,K,ce,Fe)}function x(M,K,me,Te,be){const ce=typeof be=="string"&&be.indexOf("-force")!==-1,ke=ce===!0?be.replace("-force",""):be,Fe=ke!==void 0?ke:"start";let le=Math.max(0,me-X.value[Fe]),Ge=le+X.value.total;Ge>e.value&&(Ge=e.value,le=Math.max(0,Ge-X.value.total)),k=K.scrollStart;const Ye=le!==ue.value.from||Ge!==ue.value.to;if(Ye===!1&&ke===void 0){L(me);return}const{activeElement:st}=document,Ue=te.value;Ye===!0&&Ue!==null&&Ue!==st&&Ue.contains(st)===!0&&(Ue.addEventListener("focusout",B),setTimeout(()=>{Ue!==null&&Ue.removeEventListener("focusout",B)})),eu(Ue,me-le);const ze=ke!==void 0?I.slice(le,me).reduce(Un,0):0;if(Ye===!0){const Oe=Ge>=ue.value.from&&le<=ue.value.to?ue.value.to:Ge;ue.value={from:le,to:Oe},j.value=jn(T,I,0,le),G.value=jn(T,I,Ge,e.value),requestAnimationFrame(()=>{ue.value.to!==Ge&&k===K.scrollStart&&(ue.value={from:ue.value.from,to:Ge},G.value=jn(T,I,Ge,e.value))})}requestAnimationFrame(()=>{if(k!==K.scrollStart)return;Ye===!0&&q(le);const Oe=I.slice(le,me).reduce(Un,0),y=Oe+K.offsetStart+j.value,c=y+I[me];let d=y+Te;if(ke!==void 0){const D=Oe-ze,N=K.scrollStart+D;d=ce!==!0&&N<y&&c<N+K.scrollViewSize?N:ke==="end"?c-K.scrollViewSize:y-(ke==="start"?0:Math.round((K.scrollViewSize-I[me])/2))}k=d,ao(M,d,a.virtualScrollHorizontal,h.lang.rtl),L(me)})}function q(M){const K=te.value;if(K){const me=Ho.call(K.children,le=>le.classList&&le.classList.contains("q-virtual-scroll--skip")===!1),Te=me.length,be=a.virtualScrollHorizontal===!0?le=>le.getBoundingClientRect().width:le=>le.offsetHeight;let ce=M,ke,Fe;for(let le=0;le<Te;){for(ke=be(me[le]),le++;le<Te&&me[le].classList.contains("q-virtual-scroll--with-prev")===!0;)ke+=be(me[le]),le++;Fe=ke-I[ce],Fe!==0&&(I[ce]+=Fe,T[Math.floor(ce/Nt)]+=Fe),ce++}}}function B(){te.value!==null&&te.value!==void 0&&te.value.focus()}function P(M,K){const me=1*i.value;(K===!0||Array.isArray(I)===!1)&&(I=[]);const Te=I.length;I.length=e.value;for(let ce=e.value-1;ce>=Te;ce--)I[ce]=me;const be=Math.floor((e.value-1)/Nt);T=[];for(let ce=0;ce<=be;ce++){let ke=0;const Fe=Math.min((ce+1)*Nt,e.value);for(let le=ce*Nt;le<Fe;le++)ke+=I[le];T.push(ke)}b=-1,k=void 0,j.value=jn(T,I,0,ue.value.from),G.value=jn(T,I,ue.value.to,e.value),M>=0?(q(ue.value.from),tn(()=>{C(M)})):Q()}function $(M){if(M===void 0&&typeof window<"u"){const ke=t();ke!=null&&ke.nodeType!==8&&(M=Gi(ke,n(),oe.value,H.value,a.virtualScrollHorizontal,h.lang.rtl,a.virtualScrollStickySizeStart,a.virtualScrollStickySizeEnd).scrollViewSize)}S=M;const K=parseFloat(a.virtualScrollSliceRatioBefore)||0,me=parseFloat(a.virtualScrollSliceRatioAfter)||0,Te=1+K+me,be=M===void 0||M<=0?1:Math.ceil(M/i.value),ce=Math.max(1,be,Math.ceil((a.virtualScrollSliceSize>0?a.virtualScrollSliceSize:10)/Te));X.value={total:Math.ceil(ce*Te),start:Math.ceil(ce*K),center:Math.ceil(ce*(.5+K)),end:Math.ceil(ce*(1+K)),view:be}}function V(M,K){const me=a.virtualScrollHorizontal===!0?"width":"height",Te={["--q-virtual-scroll-item-"+me]:i.value+"px"};return[M==="tbody"?pe(M,{class:"q-virtual-scroll__padding",key:"before",ref:oe},[pe("tr",[pe("td",{style:{[me]:`${j.value}px`,...Te},colspan:_e.value})])]):pe(M,{class:"q-virtual-scroll__padding",key:"before",ref:oe,style:{[me]:`${j.value}px`,...Te}}),pe(M,{class:"q-virtual-scroll__content",key:"content",ref:te,tabindex:-1},K.flat()),M==="tbody"?pe(M,{class:"q-virtual-scroll__padding",key:"after",ref:H},[pe("tr",[pe("td",{style:{[me]:`${G.value}px`,...Te},colspan:_e.value})])]):pe(M,{class:"q-virtual-scroll__padding",key:"after",ref:H,style:{[me]:`${G.value}px`,...Te}})]}function L(M){b!==M&&(a.onVirtualScroll!==void 0&&l("virtualScroll",{index:M,from:ue.value.from,to:ue.value.to-1,direction:M<b?"decrease":"increase",ref:o}),b=M)}$();const Q=ss(O,h.platform.is.ios===!0?120:35);ls(()=>{$()});let ge=!1;return yr(()=>{ge=!0}),wr(()=>{if(ge!==!0)return;const M=t();k!==void 0&&M!==void 0&&M!==null&&M.nodeType!==8?ao(M,k,a.virtualScrollHorizontal,h.lang.rtl):C(b)}),Rn(()=>{Q.cancel()}),Object.assign(o,{scrollTo:C,reset:g,refresh:_}),{virtualScrollSliceRange:ue,virtualScrollSliceSizeComputed:X,setVirtualScrollSize:$,onVirtualScrollEvt:Q,localResetVirtualScroll:P,padVirtualScroll:V,scrollTo:C,reset:g,refresh:_}}const lo=e=>["add","add-unique","toggle"].includes(e),iu=".*+?^${}()|[]\\",ru=Object.keys(kr);function Yi(e,t){if(typeof e=="function")return e;const n=e!==void 0?e:t;return i=>i!==null&&typeof i=="object"&&n in i?i[n]:i}var cr=$t({name:"QSelect",inheritAttrs:!1,props:{...so,...hl,...kr,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:lo},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:so.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...Uo,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:t,emit:n}){const{proxy:i}=Yt(),{$q:r}=i,a=Re(!1),l=Re(!1),o=Re(-1),h=Re(""),k=Re(!1),b=Re(!1);let S=null,T=null,I,j,G,X=null,oe,H,te,ue;const _e=Re(null),we=Re(null),fe=Re(null),g=Re(null),_=Re(null),C=ml(e),O=Ds(Hr),x=ae(()=>Array.isArray(e.options)?e.options.length:0),q=ae(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:B,virtualScrollSliceSizeComputed:P,localResetVirtualScroll:$,padVirtualScroll:V,onVirtualScrollEvt:L,scrollTo:Q,setVirtualScrollSize:ge}=nu({virtualScrollLength:x,getVirtualScrollTarget:Oa,getVirtualScrollEl:jr,virtualScrollItemSizeComputed:q}),M=$o(),K=ae(()=>{const A=e.mapOptions===!0&&e.multiple!==!0,ve=e.modelValue!==void 0&&(e.modelValue!==null||A===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const ye=e.mapOptions===!0&&I!==void 0?I:[],Ve=ve.map(tt=>Z(tt,ye));return e.modelValue===null&&A===!0?Ve.filter(tt=>tt!==null):Ve}return ve}),me=ae(()=>{const A={};return ru.forEach(ve=>{const ye=e[ve];ye!==void 0&&(A[ve]=ye)}),A}),Te=ae(()=>e.optionsDark===null?M.isDark.value:e.optionsDark),be=ae(()=>Zr(K.value)),ce=ae(()=>{let A="q-field__input q-placeholder col";return e.hideSelected===!0||K.value.length===0?[A,e.inputClass]:(A+=" q-field__input--padding",e.inputClass===void 0?A:[A,e.inputClass])}),ke=ae(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),Fe=ae(()=>x.value===0),le=ae(()=>K.value.map(A=>R.value(A)).join(", ")),Ge=ae(()=>e.displayValue!==void 0?e.displayValue:le.value),Ye=ae(()=>e.optionsHtml===!0?()=>!0:A=>A!=null&&A.html===!0),st=ae(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||K.value.some(Ye.value))),Ue=ae(()=>M.focused.value===!0?e.tabindex:-1),ze=ae(()=>{const A={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":a.value===!0?"true":"false","aria-controls":`${M.targetUid.value}_lb`};return o.value>=0&&(A["aria-activedescendant"]=`${M.targetUid.value}_${o.value}`),A}),Oe=ae(()=>({id:`${M.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),y=ae(()=>K.value.map((A,ve)=>({index:ve,opt:A,html:Ye.value(A),selected:!0,removeAtIndex:s,toggleOption:w,tabindex:Ue.value}))),c=ae(()=>{if(x.value===0)return[];const{from:A,to:ve}=B.value;return e.options.slice(A,ve).map((ye,Ve)=>{const tt=ie.value(ye)===!0,Je=Ae(ye)===!0,vt=A+Ve,ct={clickable:!0,active:Je,activeClass:N.value,manualFocus:!0,focused:!1,disable:tt,tabindex:-1,dense:e.optionsDense,dark:Te.value,role:"option","aria-selected":Je===!0?"true":"false",id:`${M.targetUid.value}_${vt}`,onClick:()=>{w(ye)}};return tt!==!0&&(o.value===vt&&(ct.focused=!0),r.platform.is.desktop===!0&&(ct.onMousemove=()=>{a.value===!0&&U(vt)})),{index:vt,opt:ye,html:Ye.value(ye),label:R.value(ye),selected:ct.active,focused:ct.focused,toggleOption:w,setOptionIndex:U,itemProps:ct}})}),d=ae(()=>e.dropdownIcon!==void 0?e.dropdownIcon:r.iconSet.arrow.dropdown),D=ae(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),N=ae(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),Y=ae(()=>Yi(e.optionValue,"value")),R=ae(()=>Yi(e.optionLabel,"label")),ie=ae(()=>Yi(e.optionDisable,"disable")),he=ae(()=>K.value.map(Y.value)),Ce=ae(()=>{const A={onInput:Hr,onChange:O,onKeydown:zr,onKeyup:nt,onKeypress:Xe,onFocus:We,onClick(ve){j===!0&&Mn(ve)}};return A.onCompositionstart=A.onCompositionupdate=A.onCompositionend=O,A});xt(K,A=>{I=A,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&M.innerLoading.value!==!0&&(l.value!==!0&&a.value!==!0||be.value!==!0)&&(G!==!0&&Pn(),(l.value===!0||a.value===!0)&&Tn(""))},{immediate:!0}),xt(()=>e.fillInput,Pn),xt(a,zi),xt(x,Ja);function Be(A){return e.emitValue===!0?Y.value(A):A}function f(A){if(A!==-1&&A<K.value.length)if(e.multiple===!0){const ve=e.modelValue.slice();n("remove",{index:A,value:ve.splice(A,1)[0]}),n("update:modelValue",ve)}else n("update:modelValue",null)}function s(A){f(A),M.focus()}function u(A,ve){const ye=Be(A);if(e.multiple!==!0){e.fillInput===!0&&zn(R.value(A),!0,!0),n("update:modelValue",ye);return}if(K.value.length===0){n("add",{index:0,value:ye}),n("update:modelValue",e.multiple===!0?[ye]:ye);return}if(ve===!0&&Ae(A)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const Ve=e.modelValue.slice();n("add",{index:Ve.length,value:ye}),Ve.push(ye),n("update:modelValue",Ve)}function w(A,ve){if(M.editable.value!==!0||A===void 0||ie.value(A)===!0)return;const ye=Y.value(A);if(e.multiple!==!0){ve!==!0&&(zn(e.fillInput===!0?R.value(A):"",!0,!0),mn()),we.value!==null&&we.value.focus(),(K.value.length===0||In(Y.value(K.value[0]),ye)!==!0)&&n("update:modelValue",e.emitValue===!0?ye:A);return}if((j!==!0||k.value===!0)&&M.focus(),We(),K.value.length===0){const Je=e.emitValue===!0?ye:A;n("add",{index:0,value:Je}),n("update:modelValue",e.multiple===!0?[Je]:Je);return}const Ve=e.modelValue.slice(),tt=he.value.findIndex(Je=>In(Je,ye));if(tt!==-1)n("remove",{index:tt,value:Ve.splice(tt,1)[0]});else{if(e.maxValues!==void 0&&Ve.length>=e.maxValues)return;const Je=e.emitValue===!0?ye:A;n("add",{index:Ve.length,value:Je}),Ve.push(Je)}n("update:modelValue",Ve)}function U(A){if(r.platform.is.desktop!==!0)return;const ve=A!==-1&&A<x.value?A:-1;o.value!==ve&&(o.value=ve)}function z(A=1,ve){if(a.value===!0){let ye=o.value;do ye=ro(ye+A,-1,x.value-1);while(ye!==-1&&ye!==o.value&&ie.value(e.options[ye])===!0);o.value!==ye&&(U(ye),Q(ye),ve!==!0&&e.useInput===!0&&e.fillInput===!0&&li(ye>=0?R.value(e.options[ye]):oe,!0))}}function Z(A,ve){const ye=Ve=>In(Y.value(Ve),A);return e.options.find(ye)||ve.find(ye)||A}function Ae(A){const ve=Y.value(A);return he.value.find(ye=>In(ye,ve))!==void 0}function We(A){e.useInput===!0&&we.value!==null&&(A===void 0||we.value===A.target&&A.target.value===le.value)&&we.value.select()}function Ze(A){vr(A,27)===!0&&a.value===!0&&(Mn(A),mn(),Pn()),n("keyup",A)}function nt(A){const{value:ve}=A.target;if(A.keyCode!==void 0){Ze(A);return}if(A.target.value="",S!==null&&(clearTimeout(S),S=null),T!==null&&(clearTimeout(T),T=null),Pn(),typeof ve=="string"&&ve.length!==0){const ye=ve.toLocaleLowerCase(),Ve=Je=>{const vt=e.options.find(ct=>String(Je.value(ct)).toLocaleLowerCase()===ye);return vt===void 0?!1:(K.value.indexOf(vt)===-1?w(vt):mn(),!0)},tt=Je=>{Ve(Y)!==!0&&Je!==!0&&Ve(R)!==!0&&Tn(ve,!0,()=>tt(!0))};tt()}else M.clearValue(A)}function Xe(A){n("keypress",A)}function zr(A){if(n("keydown",A),Po(A)===!0)return;const ve=h.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),ye=A.shiftKey!==!0&&e.disableTabSelection!==!0&&e.multiple!==!0&&(o.value!==-1||ve===!0);if(A.keyCode===27){Hi(A);return}if(A.keyCode===9&&ye===!1){En();return}if(A.target===void 0||A.target.id!==M.targetUid.value||M.editable.value!==!0)return;if(A.keyCode===40&&M.innerLoading.value!==!0&&a.value===!1){Bt(A),qn();return}if(A.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&h.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?f(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&n("update:modelValue",null);return}(A.keyCode===35||A.keyCode===36)&&(typeof h.value!="string"||h.value.length===0)&&(Bt(A),o.value=-1,z(A.keyCode===36?1:-1,e.multiple)),(A.keyCode===33||A.keyCode===34)&&P.value!==void 0&&(Bt(A),o.value=Math.max(-1,Math.min(x.value,o.value+(A.keyCode===33?-1:1)*P.value.view)),z(A.keyCode===33?1:-1,e.multiple)),(A.keyCode===38||A.keyCode===40)&&(Bt(A),z(A.keyCode===38?-1:1,e.multiple));const Ve=x.value;if((te===void 0||ue<Date.now())&&(te=""),Ve>0&&e.useInput!==!0&&A.key!==void 0&&A.key.length===1&&A.altKey===!1&&A.ctrlKey===!1&&A.metaKey===!1&&(A.keyCode!==32||te.length!==0)){a.value!==!0&&qn(A);const tt=A.key.toLocaleLowerCase(),Je=te.length===1&&te[0]===tt;ue=Date.now()+1500,Je===!1&&(Bt(A),te+=tt);const vt=new RegExp("^"+te.split("").map(ji=>iu.indexOf(ji)!==-1?"\\"+ji:ji).join(".*"),"i");let ct=o.value;if(Je===!0||ct<0||vt.test(R.value(e.options[ct]))!==!0)do ct=ro(ct+1,-1,Ve-1);while(ct!==o.value&&(ie.value(e.options[ct])===!0||vt.test(R.value(e.options[ct]))!==!0));o.value!==ct&&tn(()=>{U(ct),Q(ct),ct>=0&&e.useInput===!0&&e.fillInput===!0&&li(R.value(e.options[ct]),!0)});return}if(!(A.keyCode!==13&&(A.keyCode!==32||e.useInput===!0||te!=="")&&(A.keyCode!==9||ye===!1))){if(A.keyCode!==9&&Bt(A),o.value!==-1&&o.value<Ve){w(e.options[o.value]);return}if(ve===!0){const tt=(Je,vt)=>{if(vt){if(lo(vt)!==!0)return}else vt=e.newValueMode;if(zn("",e.multiple!==!0,!0),Je==null)return;(vt==="toggle"?w:u)(Je,vt==="add-unique"),e.multiple!==!0&&(we.value!==null&&we.value.focus(),mn())};if(e.onNewValue!==void 0?n("newValue",h.value,tt):tt(h.value),e.multiple!==!0)return}a.value===!0?En():M.innerLoading.value!==!0&&qn()}}function jr(){return j===!0?_.value:fe.value!==null&&fe.value.contentEl!==null?fe.value.contentEl:void 0}function Oa(){return jr()}function Va(){return e.hideSelected===!0?[]:t["selected-item"]!==void 0?y.value.map(A=>t["selected-item"](A)).slice():t.selected!==void 0?[].concat(t.selected()):e.useChips===!0?y.value.map((A,ve)=>pe(dn,{key:"option-"+ve,removable:M.editable.value===!0&&ie.value(A.opt)!==!0,dense:!0,textColor:e.color,tabindex:Ue.value,onRemove(){A.removeAtIndex(ve)}},()=>pe("span",{class:"ellipsis",[A.html===!0?"innerHTML":"textContent"]:R.value(A.opt)}))):[pe("span",{[st.value===!0?"innerHTML":"textContent"]:Ge.value})]}function Wr(){if(Fe.value===!0)return t["no-option"]!==void 0?t["no-option"]({inputValue:h.value}):void 0;const A=t.option!==void 0?t.option:ye=>pe(Ct,{key:ye.index,...ye.itemProps},()=>pe(ht,()=>pe(Le,()=>pe("span",{[ye.html===!0?"innerHTML":"textContent"]:ye.label}))));let ve=V("div",c.value.map(A));return t["before-options"]!==void 0&&(ve=t["before-options"]().concat(ve)),Mo(t["after-options"],ve)}function za(A,ve){const ye=ve===!0?{...ze.value,...M.splitAttrs.attributes.value}:void 0,Ve={ref:ve===!0?we:void 0,key:"i_t",class:ce.value,style:e.inputStyle,value:h.value!==void 0?h.value:"",type:"search",...ye,id:ve===!0?M.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":A===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Ce.value};return A!==!0&&j===!0&&(Array.isArray(Ve.class)===!0?Ve.class=[...Ve.class,"no-pointer-events"]:Ve.class+=" no-pointer-events"),pe("input",Ve)}function Hr(A){S!==null&&(clearTimeout(S),S=null),T!==null&&(clearTimeout(T),T=null),!(A&&A.target&&A.target.qComposing===!0)&&(li(A.target.value||""),G=!0,oe=h.value,M.focused.value!==!0&&(j!==!0||k.value===!0)&&M.focus(),e.onFilter!==void 0&&(S=setTimeout(()=>{S=null,Tn(h.value)},e.inputDebounce)))}function li(A,ve){h.value!==A&&(h.value=A,ve===!0||e.inputDebounce===0||e.inputDebounce==="0"?n("inputValue",A):T=setTimeout(()=>{T=null,n("inputValue",A)},e.inputDebounce))}function zn(A,ve,ye){G=ye!==!0,e.useInput===!0&&(li(A,!0),(ve===!0||ye!==!0)&&(oe=A),ve!==!0&&Tn(A))}function Tn(A,ve,ye){if(e.onFilter===void 0||ve!==!0&&M.focused.value!==!0)return;M.innerLoading.value===!0?n("filterAbort"):(M.innerLoading.value=!0,b.value=!0),A!==""&&e.multiple!==!0&&K.value.length!==0&&G!==!0&&A===R.value(K.value[0])&&(A="");const Ve=setTimeout(()=>{a.value===!0&&(a.value=!1)},10);X!==null&&clearTimeout(X),X=Ve,n("filter",A,(tt,Je)=>{(ve===!0||M.focused.value===!0)&&X===Ve&&(clearTimeout(X),typeof tt=="function"&&tt(),b.value=!1,tn(()=>{M.innerLoading.value=!1,M.editable.value===!0&&(ve===!0?a.value===!0&&mn():a.value===!0?zi(!0):a.value=!0),typeof Je=="function"&&tn(()=>{Je(i)}),typeof ye=="function"&&tn(()=>{ye(i)})}))},()=>{M.focused.value===!0&&X===Ve&&(clearTimeout(X),M.innerLoading.value=!1,b.value=!1),a.value===!0&&(a.value=!1)})}function ja(){return pe(Zl,{ref:fe,class:ke.value,style:e.popupContentStyle,modelValue:a.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&Fe.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:Te.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:D.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Oe.value,onScrollPassive:L,onBeforeShow:Qr,onBeforeHide:Wa,onShow:Ha},Wr)}function Wa(A){Xr(A),En()}function Ha(){ge()}function Ka(A){Mn(A),we.value!==null&&we.value.focus(),k.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Qa(A){Mn(A),tn(()=>{k.value=!1})}function Xa(){const A=[pe(Gl,{class:`col-auto ${M.fieldClass.value}`,...me.value,for:M.targetUid.value,dark:Te.value,square:!0,loading:b.value,itemAligned:!1,filled:!0,stackLabel:h.value.length!==0,...M.splitAttrs.listeners.value,onFocus:Ka,onBlur:Qa},{...t,rawControl:()=>M.getControl(!0),before:void 0,after:void 0})];return a.value===!0&&A.push(pe("div",{ref:_,class:ke.value+" scroll",style:e.popupContentStyle,...Oe.value,onClick:Hi,onScrollPassive:L},Wr())),pe(Dt,{ref:g,modelValue:l.value,position:e.useInput===!0?"top":void 0,transitionShow:H,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:Qr,onBeforeHide:Ga,onHide:Ya,onShow:Za},()=>pe("div",{class:"q-select__dialog"+(Te.value===!0?" q-select__dialog--dark q-dark":"")+(k.value===!0?" q-select__dialog--focused":"")},A))}function Ga(A){Xr(A),g.value!==null&&g.value.__updateRefocusTarget(M.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),M.focused.value=!1}function Ya(A){mn(),M.focused.value===!1&&n("blur",A),Pn()}function Za(){const A=document.activeElement;(A===null||A.id!==M.targetUid.value)&&we.value!==null&&we.value!==A&&we.value.focus(),ge()}function En(){l.value!==!0&&(o.value=-1,a.value===!0&&(a.value=!1),M.focused.value===!1&&(X!==null&&(clearTimeout(X),X=null),M.innerLoading.value===!0&&(n("filterAbort"),M.innerLoading.value=!1,b.value=!1)))}function qn(A){M.editable.value===!0&&(j===!0?(M.onControlFocusin(A),l.value=!0,tn(()=>{M.focus()})):M.focus(),e.onFilter!==void 0?Tn(h.value):(Fe.value!==!0||t["no-option"]!==void 0)&&(a.value=!0))}function mn(){l.value=!1,En()}function Pn(){e.useInput===!0&&zn(e.multiple!==!0&&e.fillInput===!0&&K.value.length!==0&&R.value(K.value[0])||"",!0,!0)}function zi(A){let ve=-1;if(A===!0){if(K.value.length!==0){const ye=Y.value(K.value[0]);ve=e.options.findIndex(Ve=>In(Y.value(Ve),ye))}$(ve)}U(ve)}function Ja(A,ve){a.value===!0&&M.innerLoading.value===!1&&($(-1,!0),tn(()=>{a.value===!0&&M.innerLoading.value===!1&&(A>ve?$():zi(!0))}))}function Kr(){l.value===!1&&fe.value!==null&&fe.value.updatePosition()}function Qr(A){A!==void 0&&Mn(A),n("popupShow",A),M.hasPopupOpen=!0,M.onControlFocusin(A)}function Xr(A){A!==void 0&&Mn(A),n("popupHide",A),M.hasPopupOpen=!1,M.onControlFocusout(A)}function Gr(){j=r.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?t["no-option"]!==void 0||e.onFilter!==void 0||Fe.value===!1:!0),H=r.platform.is.ios===!0&&j===!0&&e.useInput===!0?"fade":e.transitionShow}return us(Gr),cs(Kr),Gr(),Rn(()=>{S!==null&&clearTimeout(S),T!==null&&clearTimeout(T)}),Object.assign(i,{showPopup:qn,hidePopup:mn,removeAtIndex:f,add:u,toggleOption:w,getOptionIndex:()=>o.value,setOptionIndex:U,moveOptionSelection:z,filter:Tn,updateMenuPosition:Kr,updateInputValue:zn,isOptionSelected:Ae,getEmittingOptionValue:Be,isOptionDisabled:(...A)=>ie.value.apply(null,A)===!0,getOptionValue:(...A)=>Y.value.apply(null,A),getOptionLabel:(...A)=>R.value.apply(null,A)}),Object.assign(M,{innerValue:K,fieldClass:ae(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:_e,targetRef:we,hasValue:be,showPopup:qn,floatingLabel:ae(()=>e.hideSelected!==!0&&be.value===!0||typeof h.value=="number"||h.value.length!==0||Zr(e.displayValue)),getControlChild:()=>{if(M.editable.value!==!1&&(l.value===!0||Fe.value!==!0||t["no-option"]!==void 0))return j===!0?Xa():ja();M.hasPopupOpen===!0&&(M.hasPopupOpen=!1)},controlEvents:{onFocusin(A){M.onControlFocusin(A)},onFocusout(A){M.onControlFocusout(A,()=>{Pn(),En()})},onClick(A){if(Hi(A),j!==!0&&a.value===!0){En(),we.value!==null&&we.value.focus();return}qn(A)}},getControl:A=>{const ve=Va(),ye=A===!0||l.value!==!0||j!==!0;if(e.useInput===!0)ve.push(za(A,ye));else if(M.editable.value===!0){const tt=ye===!0?ze.value:void 0;ve.push(pe("input",{ref:ye===!0?we:void 0,key:"d_t",class:"q-select__focus-target",id:ye===!0?M.targetUid.value:void 0,value:Ge.value,readonly:!0,"data-autofocus":A===!0||e.autofocus===!0||void 0,...tt,onKeydown:zr,onKeyup:Ze,onKeypress:Xe})),ye===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&ve.push(pe("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:nt}))}if(C.value!==void 0&&e.disable!==!0&&he.value.length!==0){const tt=he.value.map(Je=>pe("option",{value:Je,selected:!0}));ve.push(pe("select",{class:"hidden",name:C.value,multiple:e.multiple},tt))}const Ve=e.useInput===!0||ye!==!0?void 0:M.splitAttrs.attributes.value;return pe("div",{class:"q-field__native row items-center",...Ve,...M.splitAttrs.listeners.value},ve)},getInnerAppend:()=>e.loading!==!0&&b.value!==!0&&e.hideDropdownIcon!==!0?[pe(Me,{class:"q-select__dropdown-icon"+(a.value===!0?" rotate-180":""),name:d.value})]:null}),Bo(M)}});const pt=br("camera",{state:()=>({camera:{data:null,show:!1,camera:"auto"},hasCamera:function(){navigator.permissions.query({name:"camera"}).then(e=>e.state=="granted")}}),actions:{closeCamera:function(){this.camera.show=!1},showCamera:function(){this.camera.show=!0}}}),ou=ut({name:"MintInfoDialog",mixins:[windowMixin],components:{VueQrcode:Dr},data:function(){return{contactIcons:{email:"mail_outline"},contactMethods:{twitter:"X",nostr:"Nostr"}}},computed:{...Se(Ke,["showMintInfoData"]),...Ie(Ke,["showMintInfoDialog"])},methods:{shortenText:function(e,t){return e.length>t?e.substring(0,t)+"...":e}}}),au={class:"text-center q-mb-md q-mt-none q-pt-none"},su={class:"row justify-center"},lu={class:"row justify-center"},uu={key:0,class:"row justify-center q-pt-sm"},cu={key:1,class:"row justify-center q-pt-sm"},du={key:2,class:"row justify-center q-pt-sm"},fu={key:3,class:"row justify-center q-pt-sm"},hu={key:4,class:"row justify-center q-pt-sm"},mu={key:0,class:"justify-center"},gu={key:1,class:"text-weight-bold q-mr-xs"},pu={class:"row q-mt-lg"};function vu(e,t,n,i,r,a){const l=xe("vue-qrcode");return F(),ne(Dt,{modelValue:e.showMintInfoDialog,"onUpdate:modelValue":t[1]||(t[1]=o=>e.showMintInfoDialog=o),position:"top",maximized:e.$q.screen.lt.sm,"transition-show":"fade","transition-hide":"fade","backdrop-filter":"blur(2px) brightness(60%)"},{default:v(()=>[e.showMintInfoData?(F(),ne(kt,{key:0,class:"q-px-lg q-pt-md q-pb-md qcard"},{default:v(()=>[E("div",au,[m(Ri,{ratio:1,class:"q-mx-lg q-mt-none q-pt-none"},{default:v(()=>[m(l,{value:e.showMintInfoData.url,options:{width:300},class:"rounded-borders"},null,8,["value"])]),_:1}),E("div",su,[E("div",lu,[m(dn,{outline:"",class:"q-pa-md q-mt-md",style:{"font-family":"monospace","font-size":"0.8rem"}},{default:v(()=>[m(Me,{name:"account_balance",size:"xs",class:"q-mr-xs"}),W(" "+De(e.showMintInfoData.url),1)]),_:1})]),m(gt,{class:"q-pa-sm"},{default:v(()=>[e.showMintInfoData.info.name?(F(),se("div",uu,[e.showMintInfoData.info.name?(F(),ne(Le,{key:0,caption:"",class:"text-weight-bold text-white",style:{"font-size":"16px"}},{default:v(()=>[W(De(e.showMintInfoData.info.name),1)]),_:1})):re("",!0)])):re("",!0),e.showMintInfoData.info.description?(F(),se("div",cu,[e.showMintInfoData.info.description?(F(),ne(Le,{key:0,caption:"",class:"text-white",style:{"font-size":"12px"}},{default:v(()=>[W(De(e.showMintInfoData.info.description),1)]),_:1})):re("",!0)])):re("",!0),e.showMintInfoData.info.description_long?(F(),se("div",du,[e.showMintInfoData.info.description_long?(F(),ne(Le,{key:0,caption:"",class:"text-weight-light text-white",style:{"font-size":"12px"}},{default:v(()=>[W(De(e.showMintInfoData.info.description_long),1)]),_:1})):re("",!0)])):re("",!0),e.showMintInfoData.info.version?(F(),se("div",fu,[e.showMintInfoData.info.version?(F(),ne(Le,{key:0,caption:"",class:"text-weight-light text-white",style:{"font-family":"monospace","font-size":"0.7rem"}},{default:v(()=>[W(" Version: "+De(e.showMintInfoData.info.version),1)]),_:1})):re("",!0)])):re("",!0),e.showMintInfoData.info.nuts?(F(),se("div",hu,[e.showMintInfoData.info.nuts?(F(),ne(Le,{key:0,caption:"",class:"text-weight-light text-white",style:{"font-family":"monospace","font-size":"0.7rem"}},{default:v(()=>[W(" Nuts: "+De(Object.keys(e.showMintInfoData.info.nuts).join(", ")),1)]),_:1})):re("",!0)])):re("",!0)]),_:1}),m(gt,null,{default:v(()=>[e.showMintInfoData.info.contact&&e.showMintInfoData.info.contact.length>0?(F(),se("div",mu,[(F(!0),se(Tt,null,nn(e.showMintInfoData.info.contact,o=>(F(),se("div",{key:o.method,class:"row justify-center q-pt-sm"},[m(Le,{caption:"",class:"text-weight-light text-white",style:{"font-family":"monospace","font-size":"0.7rem"}},{default:v(()=>[e.contactIcons[o.method]?(F(),ne(Me,{key:0,name:e.contactIcons[o.method],size:"xs",class:"q-mr-xs"},null,8,["name"])):(F(),se("span",gu,De(e.contactMethods[o.method]),1)),W(" "+De(e.shortenText(o.info,30))+" ",1),m(Me,{name:"content_copy",onClick:h=>e.copyText(o.info),size:"1em",color:"grey",class:"q-mr-xs cursor-pointer"},null,8,["onClick"])]),_:2},1024)]))),128))])):re("",!0)]),_:1})]),E("div",pu,[m(J,{class:"q-mx-xs",size:"md",flat:"",onClick:t[0]||(t[0]=o=>e.copyText(e.showMintInfoData.url))},{default:v(()=>t[2]||(t[2]=[W("Copy URL")])),_:1}),it((F(),ne(J,{flat:"",color:"grey",class:"q-ml-auto"},{default:v(()=>t[3]||(t[3]=[W("Close")])),_:1})),[[lt]])])])]),_:1})):re("",!0)]),_:1},8,["modelValue","maximized"])}var yu=ot(ou,[["render",vu]]);const dr=ds({events:{},on(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)},off(e,t){!this.events[e]||(this.events[e]=this.events[e].filter(n=>n!==t))},emit(e,t){console.log("eventBus emit",e,t),this.events[e]&&this.events[e].forEach(n=>n(t))}}),wu=ut({name:"MintSettings",mixins:[windowMixin],components:{MintDetailsDialog:yu},props:{},setup(){const e=Re(null),t=()=>{if(e.value){const n=e.value.getBoundingClientRect();window.scrollTo({top:window.scrollY+n.top,behavior:"smooth"})}};return Ai(()=>{dr.on("scrollToAddMintDiv",t)}),Rn(()=>{dr.off("scrollToAddMintDiv",t)}),{addMintDiv:e}},data:function(){return{discoveringMints:!1,addingMint:!1,mintToEdit:{url:"",nickname:""},mintToRemove:{url:"",nickname:"",balances:{}},editMintData:{url:"",nickname:""},addMintDialog:{show:!1},swapData:{fromUrl:{url:"",optionLabel:""},toUrl:{url:"",optionLabel:""},amount:void 0},showEditMintDialog:!1}},computed:{...Ie(bn,["getBitcoinPrice"]),...Se(Gt,["p2pkKeys"]),...Se(Ke,["activeMintUrl","activeUnit","mints","activeProofs","addMintBlocking"]),...Se(lr,["pubkey","mintRecommendations"]),...Se(yn,["invoiceWorkerRunning"]),...Ie(Ke,["addMintData","showAddMintDialog","showRemoveMintDialog","showMintInfoDialog","showMintInfoData"]),...Se(et,["tickerShort"]),...Se(Qn,["swapAmountData"]),...Ie(Qn,["swapBlocking"])},watch:{invoiceWorkerRunning:function(e){this.swapBlocking&&!e&&(this.swapBlocking=!1)}},methods:{...Ee(lr,["init","initNdkReadOnly","getUserPubkey","fetchEventsFromUser","fetchMints"]),...Ee(Gt,["generateKeypair","showKeyDetails"]),...Ee(Ke,["addMint","removeMint","activateMintUrl","updateMint"]),...Ee(dt,["decodeRequest","mintOnPaid"]),...Ee(yn,["clearAllWorkers"]),...Ee(pt,["closeCamera","showCamera"]),...Ee(Qn,["mintAmountSwap"]),editMint:function(e){this.mintToEdit=Object.assign({},e),this.editMintData=Object.assign({},e),this.showEditMintDialog=!0},validateMintUrl:function(e){try{return new URL(e),!0}catch{return!1}},sanitizeMintUrlAndShowAddDialog:function(){if(this.addMintData.url.match(/^[a-zA-Z]+:\/\//)||(this.addMintData.url="https://"+this.addMintData.url),!this.validateMintUrl(this.addMintData.url)){pn("Invalid URL");return}let e=new URL(this.addMintData.url);e.hostname=e.hostname.toLowerCase(),this.addMintData.url=e.toString(),this.addMintData.url=this.addMintData.url.replace(/\/$/,""),this.showAddMintDialog=!0},addMintInternal:function(e,t){this.addingMint=!0;try{this.addMint(e,t),this.addMintData={url:"",nickname:""}}finally{this.addingMint=!1}},mintClass(e){return new Fo(e)},swapAmountDataOptions:function(){let e=[];for(const[t,n]of Object.entries(this.mints)){const i="sat",r=this.mintClass(n).unitBalance(i),a=et().formatCurrency(r,i);e.push({url:n.url,optionLabel:(n.nickname||Xt(n.url))+" ("+a+")"})}return e},showRemoveMintDialogWrapper:function(e){let t=this.mints.find(n=>n.url==e);this.mintToRemove=t,this.showRemoveMintDialog=!0},clearSwapData:function(){this.swapData.fromUrl="",this.swapData.toUrl="",this.swapData.amount=void 0},extractAndMintAmountSwap:async function(e){e.fromUrl=this.swapData.fromUrl.url,e.toUrl=this.swapData.toUrl.url,e.amount=this.swapData.amount,await this.mintAmountSwap(e),this.clearSwapData()},enable_terminal:function(){var e=document.createElement("script");e.src="//cdn.jsdelivr.net/npm/eruda",document.body.appendChild(e),e.onload=function(){eruda.init()}},getLocalstorageToFile:async function(){const e=`cashu_backup_${Zs()}.json`;for(var t={},n=0;n<localStorage.length;n++){var i=localStorage.key(n),r=localStorage.getItem(i);t[i]=r}var a=JSON.stringify(t),l=new Blob([a],{type:"text/plain"}),o=window.URL.createObjectURL(l),h=document.createElement("a");h.download=e,h.innerHTML="Download File",h.href=o,h.onclick=function(){document.body.removeChild(event.target)},h.style.display="none",document.body.appendChild(h),h.click()},toggleGetBitcoinPrice:function(){this.getBitcoinPrice=!this.getBitcoinPrice},initNdk:async function(){await this.initNdkReadOnly(),console.log(await this.getUserPubkey())},fetchMintsFromNdk:async function(){this.discoveringMints=!0,await this.initNdkReadOnly(),console.log("### fetch mints");let e=5,t=0,n=[];for(;n.length==0&&t<e;){try{n=await this.fetchMints()}catch(i){console.log("Error fetching mints",i)}t++}n.length==0?this.notifyError("No mints found"):this.notifySuccess("Found "+n.length+" mints"),console.log(n),this.discoveringMints=!1},showMintInfo:async function(e){this.showMintInfoData=e,this.showMintInfoDialog=!0},getMintIconUrl:function(e){if(e.info)return e.info.icon_url?e.info.icon_url:void 0}},created:function(){}}),bu={style:{"max-width":"800px",margin:"0 auto"}},ku={class:"q-py-md q-px-xs text-left","on-left":""},_u=["src"],Du={class:"q-pt-xs q-px-xs",ref:"addMintDiv"},Cu={class:"row-12 text-left"},xu={class:"row-12"},Su={class:"row-12"},Tu={class:"row-12"},Eu={class:"q-py-sm q-px-xs text-left","on-left":""},qu={key:1},Pu={class:"q-py-sm q-px-xs text-left","on-left":""},Mu={class:"row q-mt-lg"},Iu={class:"row q-mt-lg"},Au={class:"col"},Uu={class:"col"},Bu={key:0},$u={class:"text-weight-light"},Ru={class:"row q-my-md"},Fu={class:"col"},Lu={class:"row q-mt-lg"},Nu={class:"col"},Ou={class:"col"};function Vu(e,t,n,i,r,a){const l=xe("MintDetailsDialog");return F(),se(Tt,null,[m(l),E("div",bu,[E("div",ku,[m(An,{padding:""},{default:v(()=>[m(Ct,null,{default:v(()=>[m(ht,null,{default:v(()=>[m(Le,{overline:""},{default:v(()=>t[19]||(t[19]=[W("Mints")])),_:1})]),_:1})]),_:1}),(F(!0),se(Tt,null,nn(e.mints,o=>(F(),se("div",{key:o.url},[m(Ct,{active:o.url==e.activeMintUrl,"active-class":"text-weight-bold text-primary",clickable:"",class:"q-pb-xs q-pl-xs"},{default:v(()=>[m(ht,{avatar:"",style:{"min-width":"36px","max-width":"39px"}},{default:v(()=>[m(Me,{color:o.url==e.activeMintUrl?"primary":"grey",name:o.url==e.activeMintUrl?"check_circle":"radio_button_unchecked",onClick:h=>e.activateMintUrl(o.url,e.verbose=!1,e.force=!0),class:"cursor-pointer"},null,8,["color","name","onClick"])]),_:2},1024),e.getMintIconUrl(o)?(F(),ne(fs,{key:0,size:"32px",class:"q-mr-sm q-mt-xs"},{default:v(()=>[E("img",{src:e.getMintIconUrl(o),alt:"Mint Icon"},null,8,_u)]),_:2},1024)):re("",!0),m(ht,null,{default:v(()=>[o.nickname?(F(),ne(Le,{key:0,lines:"1",onClick:h=>e.activateMintUrl(o.url,e.verbose=!1,e.force=!1),class:"cursor-pointer",style:{"word-break":"break-all","font-weight":"bold"}},{default:v(()=>[W(De(o.nickname),1)]),_:2},1032,["onClick"])):re("",!0),m(Le,{lines:"1",onClick:h=>e.activateMintUrl(o.url,e.verbose=!1,e.force=!1),class:"cursor-pointer",style:{"word-break":"break-all","overflow-wrap":"break-word","white-space":"normal","font-family":"monospace","font-size":"0.9em"}},{default:v(()=>[W(De(o.url),1)]),_:2},1032,["onClick"]),m(Le,null,{default:v(()=>[(F(!0),se(Tt,null,nn(e.mintClass(o).units,h=>(F(),ne(cn,{key:h,color:o.url==e.activeMintUrl?"primary":"grey-5",outline:o.url!=e.activeMintUrl||h!=e.activeUnit,label:e.formatCurrency(e.mintClass(o).unitBalance(h),h),class:"q-mr-xs q-mb-xs"},null,8,["color","outline","label"]))),128))]),_:2},1024)]),_:2},1024),m(ht,{side:""},{default:v(()=>[m(Me,{name:"info_outline",onClick:h=>e.showMintInfo(o),color:"grey",class:"cursor-pointer q-pb-sm",size:"1.3rem"},null,8,["onClick"]),m(Me,{name:"edit",onClick:h=>e.editMint(o),class:"cursor-pointer",color:"grey",size:"1.3rem"},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["active"]),m(_r,{spaced:"",style:{"margin-left":"50px"}})]))),128))]),_:1})]),E("div",Du,[m(An,{padding:""},{default:v(()=>[E("div",Cu,[m(Ct,null,{default:v(()=>[m(ht,null,{default:v(()=>[m(Le,{overline:""},{default:v(()=>t[20]||(t[20]=[W("Add mint")])),_:1}),m(Le,{caption:""},{default:v(()=>t[21]||(t[21]=[W("Enter the URL of a Cashu mint to connect to it. This wallet is not affiliated with any mint. ")])),_:1})]),_:1})]),_:1})]),E("div",xu,[m(_t,{"bottom-slots":"",rounded:"",dense:"",outlined:"",onKeydown:Kt(ui(e.sanitizeMintUrlAndShowAddDialog,["prevent"]),["enter"]),modelValue:e.addMintData.url,"onUpdate:modelValue":t[0]||(t[0]=o=>e.addMintData.url=o),placeholder:"https://",ref:"mintInput",class:"q-pb-none q-mb-sm q-px-md",style:{"font-family":"monospace"}},null,8,["onKeydown","modelValue"])]),E("div",Su,[m(_t,{"bottom-slots":"",rounded:"",dense:"",outlined:"",onKeydown:Kt(ui(e.sanitizeMintUrlAndShowAddDialog,["prevent"]),["enter"]),modelValue:e.addMintData.nickname,"onUpdate:modelValue":t[1]||(t[1]=o=>e.addMintData.nickname=o),label:"Nickname (e.g. Testnet)",ref:"mintNicknameInput",class:"q-pb-sm q-px-md"},null,8,["onKeydown","modelValue"])]),E("div",Tu,[e.addMintData.url.length==0?(F(),ne(J,{key:0,rounded:"",class:"q-px-lg q-mt-xs",color:"primary",onClick:e.showCamera},{default:v(()=>[m(Me,{size:"xs",name:"qr_code",class:"q-pr-xs"}),t[22]||(t[22]=W(" Scan QR code "))]),_:1},8,["onClick"])):re("",!0),e.addMintData.url.length>0?(F(),ne(J,{key:1,rounded:"",class:"q-px-lg q-mt-xs",color:"primary",disabled:e.addMintData.url.length==0,loading:e.addMintBlocking,onClick:e.sanitizeMintUrlAndShowAddDialog},{loading:v(()=>[m(Ot),t[23]||(t[23]=W(" Adding mint "))]),default:v(()=>[m(Me,{size:"xs",name:"add",class:"q-pr-xs"}),t[24]||(t[24]=W(" Add mint "))]),_:1},8,["disabled","loading","onClick"])):re("",!0)])]),_:1})],512),E("div",Eu,[m(An,{padding:""},{default:v(()=>[m(Ct,null,{default:v(()=>[m(ht,null,{default:v(()=>[m(Le,{overline:""},{default:v(()=>t[25]||(t[25]=[W("Discover")])),_:1}),m(Le,{caption:""},{default:v(()=>t[26]||(t[26]=[W("Discover mints other users have recommended on nostr.")])),_:1})]),_:1})]),_:1}),re("",!0),m(Ct,null,{default:v(()=>[m(J,{class:"q-ml-sm q-px-md",color:"primary",rounded:"",outline:"",loading:e.discoveringMints,onClick:e.fetchMintsFromNdk},{loading:v(()=>[m(Ot,{class:"on-left"}),t[28]||(t[28]=W(" Loading... "))]),default:v(()=>[t[29]||(t[29]=W("Discover mints "))]),_:1},8,["loading","onClick"])]),_:1}),e.mintRecommendations.length>0?(F(),se("div",qu,[m(Ct,null,{default:v(()=>[m(ht,null,{default:v(()=>[m(Le,{overline:""},{default:v(()=>[W("Found "+De(e.mintRecommendations.length)+" mints",1)]),_:1}),m(Le,{caption:""},{default:v(()=>t[30]||(t[30]=[W("These mints were recommended by other Nostr users. Read reviews at "),E("a",{href:"https://bitcoinmints.com",target:"_blank",class:"text-primary"},"bitcoinmints.com",-1),W(". Be careful and do your own research before using a mint. ")])),_:1})]),_:1})]),_:1}),m(Ro,{dense:"","dense-toggle":"",class:"text-left",label:"Click to browse mints"},{default:v(()=>[(F(!0),se(Tt,null,nn(e.mintRecommendations,o=>(F(),ne(Ct,{key:o.url},{default:v(()=>[m(ht,{class:"q-mx-none q-pl-none",style:{"max-width":"1.05em"}},{default:v(()=>[m(Me,{name:"content_copy",onClick:h=>e.copyText(o.url),size:"1em",color:"grey",class:"q-mr-xs cursor-pointer"},null,8,["onClick"])]),_:2},1024),m(ht,null,{default:v(()=>[m(Le,{caption:"",style:{"word-break":"break-word"}},{default:v(()=>[W(De(o.url),1)]),_:2},1024)]),_:2},1024),m(ht,{side:""},{default:v(()=>[m(cn,{label:o.count,color:"primary"},null,8,["label"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])):re("",!0)]),_:1})]),E("div",Pu,[m(An,{padding:""},{default:v(()=>[m(Ct,null,{default:v(()=>[m(ht,null,{default:v(()=>[m(Le,{overline:""},{default:v(()=>t[31]||(t[31]=[W("Multimint Swaps")])),_:1}),m(Le,{caption:""},{default:v(()=>t[32]||(t[32]=[W("Swap funds between mints via Lightning. Note: Leave room for potential Lightning fees. If the incoming payment does not succeed, check the invoice manually. ")])),_:1})]),_:1})]),_:1}),m(Ct,null,{default:v(()=>[m(cr,{clearable:"",rounded:"",outlined:"",dense:"",color:"primary",modelValue:e.swapData.fromUrl,"onUpdate:modelValue":t[2]||(t[2]=o=>e.swapData.fromUrl=o),options:e.swapAmountDataOptions(),"option-value":"url","option-label":"optionLabel",label:"From",style:{"min-width":"200px",width:"100%","font-family":"monospace","font-size":"0.9em"},disable:e.swapBlocking},null,8,["modelValue","options","disable"])]),_:1}),m(Ct,null,{default:v(()=>[m(cr,{clearable:"",rounded:"",outlined:"",dense:"",color:"primary",modelValue:e.swapData.toUrl,"onUpdate:modelValue":t[3]||(t[3]=o=>e.swapData.toUrl=o),options:e.swapAmountDataOptions(),"option-value":"url","option-label":"optionLabel",label:"To",style:{"min-width":"200px",width:"100%","font-family":"monospace","font-size":"0.9em"},disable:e.swapBlocking},null,8,["modelValue","options","disable"])]),_:1}),m(Ct,null,{default:v(()=>[m(_t,{rounded:"",outlined:"",dense:"",modelValue:e.swapData.amount,"onUpdate:modelValue":t[4]||(t[4]=o=>e.swapData.amount=o),modelModifiers:{number:!0},type:"number",label:"Amount ("+e.tickerShort+")",style:{"min-width":"200px"},onKeydown:t[5]||(t[5]=Kt(ui(o=>e.extractAndMintAmountSwap(e.swapAmountData),["prevent"]),["enter"])),disable:!e.swapData.fromUrl||!e.swapData.toUrl||e.swapData.fromUrl==e.swapData.toUrl||e.swapBlocking},null,8,["modelValue","label","disable"]),m(J,{class:"q-ml-sm q-px-md",color:"primary",rounded:"",onClick:t[6]||(t[6]=o=>e.extractAndMintAmountSwap(e.swapAmountData)),disable:!e.swapData.fromUrl||!e.swapData.toUrl||!(e.swapData.amount>0)||e.swapData.fromUrl==e.swapData.toUrl,loading:e.swapBlocking},{loading:v(()=>[m(Ot,{size:"xs"}),t[33]||(t[33]=W(" Swap "))]),default:v(()=>[m(Me,{size:"xs",name:"swap_horiz",class:"q-pr-xs"}),t[34]||(t[34]=W(" Swap "))]),_:1},8,["disable","loading"])]),_:1})]),_:1})]),m(Dt,{modelValue:e.showEditMintDialog,"onUpdate:modelValue":t[11]||(t[11]=o=>e.showEditMintDialog=o),"backdrop-filter":"blur(2px) brightness(60%)"},{default:v(()=>[m(kt,{class:"q-pa-lg",style:{"max-width":"500px",width:"100%"}},{default:v(()=>[t[37]||(t[37]=E("h6",{class:"q-mt-none q-mb-md"},"Edit mint",-1)),m(_t,{outlined:"",modelValue:e.editMintData.url,"onUpdate:modelValue":t[7]||(t[7]=o=>e.editMintData.url=o),label:"Mint URL",type:"textarea",autogrow:"",class:"q-mb-xs",style:{"font-family":"monospace","font-size":"0.9em"}},null,8,["modelValue"]),m(_t,{outlined:"",modelValue:e.editMintData.nickname,"onUpdate:modelValue":t[8]||(t[8]=o=>e.editMintData.nickname=o),label:"Nickname",type:"textarea",autogrow:"",class:"q-mb-xs"},null,8,["modelValue"]),E("div",Mu,[it((F(),ne(J,{class:"float-left",rounded:"",color:"primary",onClick:t[9]||(t[9]=o=>e.updateMint(e.mintToEdit,e.editMintData))},{default:v(()=>t[35]||(t[35]=[W("Update")])),_:1})),[[lt]]),m(J,{icon:"delete",flat:"",class:"float-left item-left text-left",onClick:t[10]||(t[10]=o=>e.showRemoveMintDialogWrapper(e.mintToEdit.url))}),it((F(),ne(J,{flat:"",class:"q-ml-auto",color:"grey"},{default:v(()=>t[36]||(t[36]=[W("Cancel")])),_:1})),[[lt]])])]),_:1})]),_:1},8,["modelValue"]),m(Dt,{modelValue:e.showAddMintDialog,"onUpdate:modelValue":t[14]||(t[14]=o=>e.showAddMintDialog=o),onKeydown:t[15]||(t[15]=Kt(ui(o=>e.addMintInternal(e.addMintData,e.verbose=!0),["prevent"]),["enter"])),"backdrop-filter":"blur(2px) brightness(60%)"},{default:v(()=>[m(kt,{class:"q-pa-lg"},{default:v(()=>[t[41]||(t[41]=E("h6",{class:"q-mt-none q-mb-md"},"Do you trust this mint?",-1)),t[42]||(t[42]=E("p",null," Before using this mint, make sure you trust it. Mints could become malicious or cease operation at any time. ",-1)),m(_t,{outlined:"",readonly:"",modelValue:e.addMintData.url,"onUpdate:modelValue":t[12]||(t[12]=o=>e.addMintData.url=o),label:"Mint URL",type:"textarea",autogrow:"",class:"q-mb-xs",style:{"font-family":"monospace","font-size":"0.9em"}},null,8,["modelValue"]),E("div",Iu,[E("div",Au,[it((F(),ne(J,{class:"float-left",rounded:"",color:"primary",icon:"check",loading:e.addMintBlocking,onClick:t[13]||(t[13]=o=>e.addMintInternal(e.addMintData,e.verbose=!0))},{loading:v(()=>[m(Ot),t[38]||(t[38]=W(" Adding mint "))]),default:v(()=>[t[39]||(t[39]=W("Add mint "))]),_:1},8,["loading"])),[[lt]])]),E("div",Uu,[it((F(),ne(J,{flat:"",class:"float-right",color:"grey"},{default:v(()=>t[40]||(t[40]=[W("Cancel")])),_:1})),[[lt]])])])]),_:1})]),_:1},8,["modelValue"]),m(Dt,{modelValue:e.showRemoveMintDialog,"onUpdate:modelValue":t[18]||(t[18]=o=>e.showRemoveMintDialog=o),"backdrop-filter":"blur(2px) brightness(60%)"},{default:v(()=>[m(kt,{class:"q-pa-lg"},{default:v(()=>[t[47]||(t[47]=E("h6",{class:"q-my-md"},"Are you sure you want to delete this mint?",-1)),e.mintToRemove.nickname?(F(),se("div",Bu,[t[43]||(t[43]=E("span",{class:"text-weight-bold"}," Nickname: ",-1)),E("span",$u,De(e.mintToRemove.nickname),1)])):re("",!0),E("div",Ru,[E("div",Fu,[t[44]||(t[44]=E("span",{class:"text-weight-bold"},"Balances:",-1)),(F(!0),se(Tt,null,nn(e.mintClass(e.mintToRemove).units,o=>(F(),ne(cn,{key:o,color:"primary",label:e.formatCurrency(e.mintClass(e.mintToRemove).unitBalance(o),o),class:"q-mx-xs"},null,8,["label"]))),128))])]),m(_t,{outlined:"",readonly:"",modelValue:e.mintToRemove.url,"onUpdate:modelValue":t[16]||(t[16]=o=>e.mintToRemove.url=o),label:"Mint URL",type:"textarea",autogrow:"",class:"q-mb-xs"},null,8,["modelValue"]),t[48]||(t[48]=E("div",{class:"row q-my-md"},[E("div",{class:"col"},[E("span",{class:"text-caption"},"Note: Because this wallet is paranoid, your ecash from this mint will not be actually deleted but will remain stored on your device. You will see it reappear if you re-add this mint later again.")])],-1)),E("div",Lu,[E("div",Nu,[it((F(),ne(J,{class:"float-left",color:"primary",onClick:t[17]||(t[17]=o=>{e.showEditMintDialog=!1,e.removeMint(e.mintToRemove.url,e.verbose=!0)})},{default:v(()=>t[45]||(t[45]=[W("Remove mint")])),_:1})),[[lt]])]),E("div",Ou,[it((F(),ne(J,{flat:"",color:"grey",class:"float-right"},{default:v(()=>t[46]||(t[46]=[W("Cancel")])),_:1})),[[lt]])])])]),_:1})]),_:1},8,["modelValue"])])],64)}var zu=ot(wu,[["render",Vu]]);function di(e,t){return[!0,!1].includes(e)?e:t}var Ko=$t({name:"QPagination",props:{...Bi,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||hs.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:t}){const{proxy:n}=Yt(),{$q:i}=n,r=$i(e,i),a=ae(()=>parseInt(e.min,10)),l=ae(()=>parseInt(e.max,10)),o=ae(()=>parseInt(e.maxPages,10)),h=ae(()=>j.value+" / "+l.value),k=ae(()=>di(e.boundaryLinks,e.input)),b=ae(()=>di(e.boundaryNumbers,!e.input)),S=ae(()=>di(e.directionLinks,e.input)),T=ae(()=>di(e.ellipses,!e.input)),I=Re(null),j=ae({get:()=>e.modelValue,set:q=>{if(q=parseInt(q,10),e.disable||isNaN(q))return;const B=Js(q,a.value,l.value);e.modelValue!==B&&t("update:modelValue",B)}});xt(()=>`${a.value}|${l.value}`,()=>{j.value=e.modelValue});const G=ae(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),X=ae(()=>e.gutter in Yr?`${Yr[e.gutter]}px`:e.gutter||null),oe=ae(()=>X.value!==null?`--q-pagination-gutter-parent:-${X.value};--q-pagination-gutter-child:${X.value}`:null),H=ae(()=>{const q=[e.iconFirst||i.iconSet.pagination.first,e.iconPrev||i.iconSet.pagination.prev,e.iconNext||i.iconSet.pagination.next,e.iconLast||i.iconSet.pagination.last];return i.lang.rtl===!0?q.reverse():q}),te=ae(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),ue=ae(()=>ms(e,"flat")),_e=ae(()=>({[ue.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),we=ae(()=>{const q={[ue.value]:!1};return e.activeDesign!==""&&(q[e.activeDesign]=!0),q}),fe=ae(()=>({...we.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),g=ae(()=>{let q=Math.max(o.value,1+(T.value?2:0)+(b.value?2:0));const B={pgFrom:a.value,pgTo:l.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(l.value).length)}em`}};return o.value&&q<l.value-a.value+1&&(q=1+Math.floor(q/2)*2,B.pgFrom=Math.max(a.value,Math.min(l.value-q+1,e.modelValue-Math.floor(q/2))),B.pgTo=Math.min(l.value,B.pgFrom+q-1),b.value&&(B.boundaryStart=!0,B.pgFrom++),T.value&&B.pgFrom>a.value+(b.value?1:0)&&(B.ellipsesStart=!0,B.pgFrom++),b.value&&(B.boundaryEnd=!0,B.pgTo--),T.value&&B.pgTo<l.value-(b.value?1:0)&&(B.ellipsesEnd=!0,B.pgTo--)),B});function _(q){j.value=q}function C(q){j.value=j.value+q}const O=ae(()=>{function q(){j.value=I.value,I.value=null}return{"onUpdate:modelValue":B=>{I.value=B},onKeyup:B=>{vr(B,13)===!0&&q()},onBlur:q}});function x(q,B,P){const $={"aria-label":B,"aria-current":"false",..._e.value,...q};return P===!0&&Object.assign($,{"aria-current":"true",...fe.value}),B!==void 0&&(e.toFn!==void 0?$.to=e.toFn(B):$.onClick=()=>{_(B)}),pe(J,$)}return Object.assign(n,{set:_,setByOffset:C}),()=>{const q=[],B=[];let P;if(k.value===!0&&(q.push(x({key:"bls",disable:e.disable||e.modelValue<=a.value,icon:H.value[0]},a.value)),B.unshift(x({key:"ble",disable:e.disable||e.modelValue>=l.value,icon:H.value[3]},l.value))),S.value===!0&&(q.push(x({key:"bdp",disable:e.disable||e.modelValue<=a.value,icon:H.value[1]},e.modelValue-1)),B.unshift(x({key:"bdn",disable:e.disable||e.modelValue>=l.value,icon:H.value[2]},e.modelValue+1))),e.input!==!0){P=[];const{pgFrom:$,pgTo:V,marginalStyle:L}=g.value;if(g.value.boundaryStart===!0){const Q=a.value===e.modelValue;q.push(x({key:"bns",style:L,disable:e.disable,label:a.value},a.value,Q))}if(g.value.boundaryEnd===!0){const Q=l.value===e.modelValue;B.unshift(x({key:"bne",style:L,disable:e.disable,label:l.value},l.value,Q))}g.value.ellipsesStart===!0&&q.push(x({key:"bes",style:L,disable:e.disable,label:"\u2026",ripple:!1},$-1)),g.value.ellipsesEnd===!0&&B.unshift(x({key:"bee",style:L,disable:e.disable,label:"\u2026",ripple:!1},V+1));for(let Q=$;Q<=V;Q++)P.push(x({key:`bpg${Q}`,style:L,disable:e.disable,label:Q},Q,Q===e.modelValue))}return pe("div",{class:G.value,...te.value},[pe("div",{class:"q-pagination__content row no-wrap items-center",style:oe.value},[...q,e.input===!0?pe(_t,{class:"inline",style:{width:`${h.value.length/1.5}em`},type:"number",dense:!0,value:I.value,disable:e.disable,dark:r.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:h.value,min:a.value,max:l.value,...O.value}):pe("div",{class:"q-pagination__middle row justify-center"},P),...B])])}}});function bt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function ju(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const Qo=6e4,Xo=36e5,fi=43200,uo=1440;let Wu={};function Hu(){return Wu}function co(e){const t=bt(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function ki(e,t){const n=bt(e),i=bt(t),r=n.getTime()-i.getTime();return r<0?-1:r>0?1:r}function Ku(e){return ju(e,Date.now())}function Qu(e,t){const n=bt(e),i=bt(t),r=n.getFullYear()-i.getFullYear(),a=n.getMonth()-i.getMonth();return r*12+a}function Xu(e){return t=>{const i=(e?Math[e]:Math.trunc)(t);return i===0?0:i}}function Gu(e,t){return+bt(e)-+bt(t)}function Yu(e){const t=bt(e);return t.setHours(23,59,59,999),t}function Zu(e){const t=bt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Ju(e){const t=bt(e);return+Yu(t)==+Zu(t)}function ec(e,t){const n=bt(e),i=bt(t),r=ki(n,i),a=Math.abs(Qu(n,i));let l;if(a<1)l=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-r*a);let o=ki(n,i)===-r;Ju(bt(e))&&a===1&&ki(e,i)===1&&(o=!1),l=r*(a-Number(o))}return l===0?0:l}function tc(e,t,n){const i=Gu(e,t)/1e3;return Xu(n?.roundingMethod)(i)}const nc={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ic=(e,t,n)=>{let i;const r=nc[e];return typeof r=="string"?i=r:t===1?i=r.one:i=r.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function Zi(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const rc={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},oc={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ac={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},sc={date:Zi({formats:rc,defaultWidth:"full"}),time:Zi({formats:oc,defaultWidth:"full"}),dateTime:Zi({formats:ac,defaultWidth:"full"})},lc={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},uc=(e,t,n,i)=>lc[e];function Wn(e){return(t,n)=>{const i=n?.context?String(n.context):"standalone";let r;if(i==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,o=n?.width?String(n.width):l;r=e.formattingValues[o]||e.formattingValues[l]}else{const l=e.defaultWidth,o=n?.width?String(n.width):e.defaultWidth;r=e.values[o]||e.values[l]}const a=e.argumentCallback?e.argumentCallback(t):t;return r[a]}}const cc={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},dc={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},fc={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},hc={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},mc={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},gc={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},pc=(e,t)=>{const n=Number(e),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},vc={ordinalNumber:pc,era:Wn({values:cc,defaultWidth:"wide"}),quarter:Wn({values:dc,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Wn({values:fc,defaultWidth:"wide"}),day:Wn({values:hc,defaultWidth:"wide"}),dayPeriod:Wn({values:mc,defaultWidth:"wide",formattingValues:gc,defaultFormattingWidth:"wide"})};function Hn(e){return(t,n={})=>{const i=n.width,r=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],a=t.match(r);if(!a)return null;const l=a[0],o=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],h=Array.isArray(o)?wc(o,S=>S.test(l)):yc(o,S=>S.test(l));let k;k=e.valueCallback?e.valueCallback(h):h,k=n.valueCallback?n.valueCallback(k):k;const b=t.slice(l.length);return{value:k,rest:b}}}function yc(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function wc(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function bc(e){return(t,n={})=>{const i=t.match(e.matchPattern);if(!i)return null;const r=i[0],a=t.match(e.parsePattern);if(!a)return null;let l=e.valueCallback?e.valueCallback(a[0]):a[0];l=n.valueCallback?n.valueCallback(l):l;const o=t.slice(r.length);return{value:l,rest:o}}}const kc=/^(\d+)(th|st|nd|rd)?/i,_c=/\d+/i,Dc={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Cc={any:[/^b/i,/^(a|c)/i]},xc={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Sc={any:[/1/i,/2/i,/3/i,/4/i]},Tc={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ec={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},qc={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Pc={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Mc={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ic={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ac={ordinalNumber:bc({matchPattern:kc,parsePattern:_c,valueCallback:e=>parseInt(e,10)}),era:Hn({matchPatterns:Dc,defaultMatchWidth:"wide",parsePatterns:Cc,defaultParseWidth:"any"}),quarter:Hn({matchPatterns:xc,defaultMatchWidth:"wide",parsePatterns:Sc,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Hn({matchPatterns:Tc,defaultMatchWidth:"wide",parsePatterns:Ec,defaultParseWidth:"any"}),day:Hn({matchPatterns:qc,defaultMatchWidth:"wide",parsePatterns:Pc,defaultParseWidth:"any"}),dayPeriod:Hn({matchPatterns:Mc,defaultMatchWidth:"any",parsePatterns:Ic,defaultParseWidth:"any"})},Uc={code:"en-US",formatDistance:ic,formatLong:sc,formatRelative:uc,localize:vc,match:Ac,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Bc(e,t,n){const i=Hu(),r=n?.locale??i.locale??Uc,a=2520,l=ki(e,t);if(isNaN(l))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:l});let h,k;l>0?(h=bt(t),k=bt(e)):(h=bt(e),k=bt(t));const b=tc(k,h),S=(co(k)-co(h))/1e3,T=Math.round((b-S)/60);let I;if(T<2)return n?.includeSeconds?b<5?r.formatDistance("lessThanXSeconds",5,o):b<10?r.formatDistance("lessThanXSeconds",10,o):b<20?r.formatDistance("lessThanXSeconds",20,o):b<40?r.formatDistance("halfAMinute",0,o):b<60?r.formatDistance("lessThanXMinutes",1,o):r.formatDistance("xMinutes",1,o):T===0?r.formatDistance("lessThanXMinutes",1,o):r.formatDistance("xMinutes",T,o);if(T<45)return r.formatDistance("xMinutes",T,o);if(T<90)return r.formatDistance("aboutXHours",1,o);if(T<uo){const j=Math.round(T/60);return r.formatDistance("aboutXHours",j,o)}else{if(T<a)return r.formatDistance("xDays",1,o);if(T<fi){const j=Math.round(T/uo);return r.formatDistance("xDays",j,o)}else if(T<fi*2)return I=Math.round(T/fi),r.formatDistance("aboutXMonths",I,o)}if(I=ec(k,h),I<12){const j=Math.round(T/fi);return r.formatDistance("xMonths",j,o)}else{const j=I%12,G=Math.trunc(I/12);return j<3?r.formatDistance("aboutXYears",G,o):j<9?r.formatDistance("overXYears",G,o):r.formatDistance("almostXYears",G+1,o)}}function Go(e,t){return Bc(e,Ku(e),t)}function Yo(e,t){const n=t?.additionalDigits??2,i=Lc(e);let r;if(i.date){const h=Nc(i.date,n);r=Oc(h.restDateString,h.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);const a=r.getTime();let l=0,o;if(i.time&&(l=Vc(i.time),isNaN(l)))return new Date(NaN);if(i.timezone){if(o=zc(i.timezone),isNaN(o))return new Date(NaN)}else{const h=new Date(a+l),k=new Date(0);return k.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),k.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()),k}return new Date(a+l+o)}const hi={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},$c=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Rc=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Fc=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Lc(e){const t={},n=e.split(hi.dateTimeDelimiter);let i;if(n.length>2)return t;if(/:/.test(n[0])?i=n[0]:(t.date=n[0],i=n[1],hi.timeZoneDelimiter.test(t.date)&&(t.date=e.split(hi.timeZoneDelimiter)[0],i=e.substr(t.date.length,e.length))),i){const r=hi.timezone.exec(i);r?(t.time=i.replace(r[1],""),t.timezone=r[1]):t.time=i}return t}function Nc(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),i=e.match(n);if(!i)return{year:NaN,restDateString:""};const r=i[1]?parseInt(i[1]):null,a=i[2]?parseInt(i[2]):null;return{year:a===null?r:a*100,restDateString:e.slice((i[1]||i[2]).length)}}function Oc(e,t){if(t===null)return new Date(NaN);const n=e.match($c);if(!n)return new Date(NaN);const i=!!n[4],r=Kn(n[1]),a=Kn(n[2])-1,l=Kn(n[3]),o=Kn(n[4]),h=Kn(n[5])-1;if(i)return Qc(t,o,h)?jc(t,o,h):new Date(NaN);{const k=new Date(0);return!Hc(t,a,l)||!Kc(t,r)?new Date(NaN):(k.setUTCFullYear(t,a,Math.max(r,l)),k)}}function Kn(e){return e?parseInt(e):1}function Vc(e){const t=e.match(Rc);if(!t)return NaN;const n=Ji(t[1]),i=Ji(t[2]),r=Ji(t[3]);return Xc(n,i,r)?n*Xo+i*Qo+r*1e3:NaN}function Ji(e){return e&&parseFloat(e.replace(",","."))||0}function zc(e){if(e==="Z")return 0;const t=e.match(Fc);if(!t)return 0;const n=t[1]==="+"?-1:1,i=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;return Gc(i,r)?n*(i*Xo+r*Qo):NaN}function jc(e,t,n){const i=new Date(0);i.setUTCFullYear(e,0,4);const r=i.getUTCDay()||7,a=(t-1)*7+n+1-r;return i.setUTCDate(i.getUTCDate()+a),i}const Wc=[31,null,31,30,31,30,31,31,30,31,30,31];function Zo(e){return e%400===0||e%4===0&&e%100!==0}function Hc(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(Wc[t]||(Zo(e)?29:28))}function Kc(e,t){return t>=1&&t<=(Zo(e)?366:365)}function Qc(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function Xc(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function Gc(e,t){return t>=0&&t<=59}const Yc=ut({name:"InvoicesTable",mixins:[windowMixin],props:{},data:function(){return{currentPage:1,pageSize:5,filterPending:!1}},watch:{filterPending:function(){this.currentPage=1}},computed:{...Ie(et,["showInvoiceDetails"]),...Ie(dt,["invoiceHistory","invoiceData","payInvoiceData"]),maxPages(){return Math.ceil(this.invoiceHistory.length/this.pageSize)},paginatedInvoices(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.filterPending?this.invoiceHistory.filter(n=>n.status==="pending").slice(e,t):this.invoiceHistory.slice().reverse().slice(e,t)}},methods:{...Ee(dt,["checkInvoice","mintOnPaid","checkOutgoingInvoice"]),shortenString:function(e){return Cr(e,20,10)},handlePageChange(e){this.currentPage=e},showInvoiceDialog:async function(e){if(this.invoiceData=e,this.showInvoiceDetails=!0,e.status==="pending")try{await this.checkInvoice(e.quote,!1,!1)}catch{this.mintOnPaid(e.quote,!1,!0,!1)}},formattedDate(e){const t=Yo(e);return Go(t,{addSuffix:!1})}},created:function(){}}),Zc={style:{"max-width":"1000px",margin:"0 auto"}},Jc={class:"q-pa-xs",style:{"max-width":"500px",margin:"0 auto"}},ed={class:"text-center q-mt-lg"},td={key:0,class:"text-center q-mt-lg"},nd={key:1,class:"text-center q-mt-lg"},id={style:{display:"flex","justify-content":"center"}};function rd(e,t,n,i,r,a){return F(),se("div",Zc,[E("div",Jc,[m(An,null,{default:v(()=>[(F(!0),se(Tt,null,nn(e.paginatedInvoices,l=>(F(),ne(Ct,{key:l.id},{default:v(()=>[m(ht,{side:"",onClick:o=>e.showInvoiceDialog(l),style:{width:"140px"},class:"q-pr-none items-center"},{default:v(()=>[m(Le,{class:"text-weight-bold"},{default:v(()=>[m(Me,{name:l.amount>=0?"call_received":"call_made",color:l.status==="paid"?l.amount>=0?"green":"red":"",class:"q-mr-xs",size:"xs"},null,8,["name","color"]),W(" "+De(e.formatCurrency(l.amount,l.unit)),1)]),_:2},1024)]),_:2},1032,["onClick"]),m(ht,null,{default:v(()=>[m(Le,{onClick:o=>e.showInvoiceDialog(l)},{default:v(()=>[t[3]||(t[3]=W(" Lightning ")),m(yt,null,{default:v(()=>t[2]||(t[2]=[W("Click to copy")])),_:1})]),_:2},1032,["onClick"]),m(Le,{caption:""},{default:v(()=>[W(De(e.formattedDate(l.date))+" ago",1)]),_:2},1024)]),_:2},1024),m(ht,{side:"",top:""},{default:v(()=>[l.status==="pending"?(F(),ne(J,{key:0,flat:"",dense:"",icon:"sync",onClick:o=>l.amount>0?e.checkInvoice(l.quote,!0):e.checkOutgoingInvoice(l.quote,!0),class:"cursor-pointer",style:{position:"absolute",right:"0"}},{default:v(()=>[m(yt,null,{default:v(()=>t[4]||(t[4]=[W("Check status")])),_:1})]),_:2},1032,["onClick"])):re("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1}),E("div",ed,[m(J,{rounded:"",outline:"",dense:"",onClick:t[0]||(t[0]=l=>e.filterPending=!e.filterPending),color:e.filterPending?"primary":"grey",label:e.filterPending?"Show all":"Filter pending",class:"q-ml-sm q-px-md",size:"sm"},null,8,["color","label"])]),e.paginatedInvoices.length===0?(F(),se("div",td,[m(Le,{caption:"",class:"text-primary"},{default:v(()=>t[5]||(t[5]=[W("No invoices yet")])),_:1})])):e.maxPages>1?(F(),se("div",nd,[E("div",id,[m(Ko,{modelValue:e.currentPage,"onUpdate:modelValue":t[1]||(t[1]=l=>e.currentPage=l),max:e.maxPages,"max-pages":5,"direction-links":"","boundary-links":"",onInput:e.handlePageChange},null,8,["modelValue","max","onInput"])])])):re("",!0)])])}var od=ot(Yc,[["render",rd]]);const ad=ut({name:"HistoryTable",mixins:[windowMixin],props:{},data:function(){return{currentPage:1,pageSize:5,filterPending:!1}},watch:{filterPending:function(){this.currentPage=1}},computed:{...Se(Qt,["historyTokens"]),...Ie(zt,["showReceiveTokens","receiveData"]),...Ie(ni,["showSendTokens","sendData","showLockInput"]),maxPages(){return Math.ceil(this.historyTokens.length/this.pageSize)},paginatedTokens(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.filterPending?this.historyTokens.filter(n=>n.status==="pending").slice().reverse().slice(e,t):this.historyTokens.slice().reverse().slice(e,t)}},methods:{...Ee(dt,["checkTokenSpendable"]),formattedDate(e){const t=Yo(e);return Go(t,{addSuffix:!1})},shortenString:function(e){return Cr(e,20,10)},handlePageChange(e){this.currentPage=e},receiveToken(e){this.receiveData.tokensBase64=e,this.showReceiveTokens=!0},showTokenDialog:function(e){if(e.token===void 0){Lo("Old token not found");return}const t=e.token;console.log("##### showTokenDialog");const n=He.decode(t);this.sendData.tokens=He.getProofs(n),this.sendData.tokensBase64=el(t),this.sendData.paymentRequest=e.paymentRequest,this.sendData.historyAmount=e.amount,this.showSendTokens=!0}},created:function(){}}),sd={class:"q-pa-xs",style:{"max-width":"500px",margin:"0 auto"}},ld={class:"text-center q-mt-lg"},ud={key:0,class:"text-center q-mt-lg"},cd={key:1,class:"text-center q-mt-lg"},dd={style:{display:"flex","justify-content":"center"}};function fd(e,t,n,i,r,a){return F(),se("div",sd,[m(An,null,{default:v(()=>[(F(!0),se(Tt,null,nn(e.paginatedTokens,l=>it((F(),ne(Ct,{key:l.id,clickable:"",class:"q-px-md"},{default:v(()=>[m(ht,{side:"",onClick:o=>e.showTokenDialog(l),style:{width:"140px"},class:"q-pr-none items-center"},{default:v(()=>[m(Le,{class:"text-weight-bold"},{default:v(()=>[m(Me,{name:l.amount>=0?"call_received":"call_made",color:l.status==="paid"?l.amount>=0?"green":"red":"",class:"q-mr-xs",size:"xs"},null,8,["name","color"]),E("span",null,De(e.formatCurrency(l.amount,l.unit)),1)]),_:2},1024)]),_:2},1032,["onClick"]),m(ht,{class:"items-center q-pl-lg",onClick:o=>e.showTokenDialog(l),style:{width:"300px"}},{default:v(()=>[m(Le,null,{default:v(()=>t[2]||(t[2]=[W(" Ecash ")])),_:1}),m(Le,{caption:""},{default:v(()=>[W(De(e.formattedDate(l.date))+" ago",1)]),_:2},1024)]),_:2},1032,["onClick"]),m(ht,{side:"",top:""},{default:v(()=>[l.status==="pending"&&l.amount<0?(F(),ne(J,{key:0,flat:"",dense:"",icon:"sync",onClick:o=>e.checkTokenSpendable(l),class:"cursor-pointer",style:{position:"absolute",right:"0"}},{default:v(()=>[m(yt,null,{default:v(()=>t[3]||(t[3]=[W("Check status")])),_:1})]),_:2},1032,["onClick"])):re("",!0),l.status==="pending"&&l.amount>0?(F(),ne(J,{key:1,flat:"",dense:"",icon:"arrow_circle_down",onClick:o=>e.receiveToken(l.token),class:"cursor-pointer",style:{position:"absolute",right:"0"}},{default:v(()=>[m(yt,null,{default:v(()=>t[4]||(t[4]=[W("Receive")])),_:1})]),_:2},1032,["onClick"])):re("",!0)]),_:2},1024)]),_:2},1024)),[[pr]])),128))]),_:1}),E("div",ld,[m(J,{rounded:"",outline:"",dense:"",onClick:t[0]||(t[0]=l=>e.filterPending=!e.filterPending),color:e.filterPending?"primary":"grey",label:e.filterPending?"Show all":"Filter pending",class:"q-ml-sm q-px-md",size:"sm"},null,8,["color","label"])]),e.paginatedTokens.length===0?(F(),se("div",ud,[m(Le,{caption:"",class:"text-primary"},{default:v(()=>t[5]||(t[5]=[W("No history yet")])),_:1})])):e.maxPages>1?(F(),se("div",cd,[E("div",dd,[m(Ko,{modelValue:e.currentPage,"onUpdate:modelValue":t[1]||(t[1]=l=>e.currentPage=l),max:e.maxPages,"max-pages":5,"direction-links":"","boundary-links":"",onInput:e.handlePageChange},null,8,["modelValue","max","onInput"])])])):re("",!0)])}var hd=ot(ad,[["render",fd]]);const md=ut({name:"NoMintWarnBanner",mixins:[windowMixin],props:{proofs:Array,activeProofs:Array,mints:Array,tickerShort:String,activeMintUrl:String},computed:{...Ie(et,["tab","expandHistory","showReceiveEcashDrawer"]),...Ie(zt,["showReceiveTokens","receiveData"]),balance:function(){return this.activeProofs.map(e=>e).flat().reduce((e,t)=>e+=t.amount,0)},getActiveMintUrlShort:function(){return Xt(this.activeMintUrl)},getBalance:function(){var e=this.activeProofs.map(t=>t).flat().reduce((t,n)=>t+=n.amount,0);return e}},methods:{handleReceiveEcash:function(){this.showReceiveEcashDrawer=!0},handleAddMintClick:function(){this.expandHistory=!0,this.tab="mints",dr.emit("scrollToAddMintDiv")}}}),gd={class:"row items-center justify-center"},pd={class:"row items-center justify-center q-pt-lg"},vd={class:"row items-center justify-center q-pt-md"};function yd(e,t,n,i,r,a){return F(),ne(kt,{class:"q-ma-lg bg-dark q-pa-md"},{default:v(()=>[m(gt,null,{default:v(()=>[E("div",gd,[m(Me,{color:"primary",class:"q-pb-md",name:"account_balance",size:"50px"})]),t[0]||(t[0]=E("div",{class:"row items-center justify-center"},[E("div",{class:"text-h6"},"Join a mint")],-1)),t[1]||(t[1]=E("div",{class:"row items-center justify-center"},[E("div",{class:"text-subtitle2"}," You haven't joined any Cashu mint yet. Add a mint URL in the settings or receive ecash from a new mint to get started. ")],-1)),E("div",pd,[m(J,{rounded:"",color:"primary",class:"q-px-md",label:"Add mint",onClick:e.handleAddMintClick},null,8,["onClick"])]),E("div",vd,[m(J,{outline:"",rounded:"",color:"primary",class:"q-px-md",label:"Receive Ecash",onClick:e.handleReceiveEcash},null,8,["onClick"])])]),_:1})]),_:1})}var wd=ot(md,[["render",yd],["__scopeId","data-v-4782cc90"]]);const bd=ut({name:"WelcomeDialog",mixins:[windowMixin],props:{welcomeDialog:Object,triggerPwaInstall:Function,setTab:Function,getPwaDisplayMode:Function,setWelcomeDialogSeen:Function},data:function(){return{}},watch:{},computed:{...Se(dt,["mnemonic"])},methods:{...Ee(Ke,["restoreFromBackup"]),readFile(e){let t=new FileReader;t.onload=n=>{let i=n.target.result,r=JSON.parse(i);this.restoreFromBackup(r)},t.readAsText(e)},dragFile(e){e.preventDefault();let n=e.dataTransfer.files[0];this.readFile(n)},allowDrop(e){e.preventDefault()},onChangeFileUpload(){let e=this.$refs.fileUpload.files[0];this.readFile(e)},browseBackupFile(){this.$refs.fileUpload.click()}}}),kd={class:"row q-mt-lg"};function _d(e,t,n,i,r,a){return F(),ne(Dt,{class:"z-top",persistent:"",position:"top",onDrop:e.dragFile,onDragover:e.allowDrop,"backdrop-filter":"blur(2px) brightness(60%)"},{default:v(()=>[m(kt,{class:"q-pa-lg z-top"},{default:v(()=>[m(pl,null,{default:v(()=>[m(gl,null,{default:v(()=>t[4]||(t[4]=[E("span",{class:"text-weight-bold"},"Cashu",-1),W(" ecash wallet")])),_:1})]),_:1}),m(gt,null,{default:v(()=>[t[10]||(t[10]=E("p",null,"Please take a moment to read the following information.",-1)),t[11]||(t[11]=E("p",null,[E("strong",null,"Install and add to home screen."),W(" For the best experience, use this wallet with your device's native web browser (Safari on iOS, Chrome on Android). In Chrome click the hamburger menu at the upper right. In Safari click the share button and press the Add to Home screen button. ")],-1)),t[12]||(t[12]=E("p",null,[E("strong",null,"Back up your seed phrase."),W(" This wallet stores ecash tokens in its database. If you delete your browser data without backing up, you will lose your tokens. Make sure to back up your wallet seed phrase in the settings. ")],-1)),t[13]||(t[13]=E("p",null,[E("strong",null,"This software is in BETA!"),W(" We hold no responsibility for people losing access to funds. Use at your own risk! This wallet is not affiliated with any mint. This code is open-source and licensed under the MIT license. ")],-1)),E("input",{type:"file",id:"fileUpload",ref:"fileUpload",onChange:t[0]||(t[0]=l=>e.onChangeFileUpload())},null,544),E("div",kd,[e.getPwaDisplayMode()=="browser"&&e.deferredPWAInstallPrompt!=null?(F(),ne(J,{key:0,outline:"",class:"q-mx-sm",color:"primary",onClick:t[1]||(t[1]=l=>e.triggerPwaInstall())},{default:v(()=>t[5]||(t[5]=[W("Install Cashu")])),_:1})):re("",!0),m(J,{flat:"",size:"0.6rem",class:"q-mx-xs q-px-none",onClick:t[2]||(t[2]=l=>e.copyText(e.baseURL))},{default:v(()=>t[6]||(t[6]=[W("Copy URL")])),_:1}),m(J,{flat:"",size:"0.6rem",class:"q-mx-xs q-px-none",color:"warning",icon:"upload_for_offline",onClick:e.browseBackupFile},{default:v(()=>[t[8]||(t[8]=W("Restore")),m(yt,null,{default:v(()=>t[7]||(t[7]=[W("You can drag & drop the wallet backup here!")])),_:1})]),_:1},8,["onClick"]),it((F(),ne(J,{outline:"",size:"0.8rem",class:"q-ml-auto",onClick:t[3]||(t[3]=l=>e.setWelcomeDialogSeen())},{default:v(()=>t[9]||(t[9]=[W("Continue")])),_:1})),[[lt]])])]),_:1})]),_:1})]),_:1},8,["onDrop","onDragover"])}var Dd=ot(bd,[["render",_d],["__scopeId","data-v-74054052"]]);const Cd='<circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="60" cy="15" r="9" fill-opacity=".3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from=".5" to=".5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle>';var xd=$t({name:"QSpinnerDots",props:gs,setup(e){const{cSize:t,classes:n}=ps(e);return()=>pe("svg",{class:n.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",innerHTML:Cd})}}),Jo={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){var t=No,n=Oo,i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=H,e.INSPECT_MAX_BYTES=50;var r=2147483647;e.kMaxLength=r,o.TYPED_ARRAY_SUPPORT=a(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{var y=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,Uint8Array.prototype),Object.setPrototypeOf(y,c),y.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(!!o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(!!o.isBuffer(this))return this.byteOffset}});function l(y){if(y>r)throw new RangeError('The value "'+y+'" is invalid for option "size"');var c=new Uint8Array(y);return Object.setPrototypeOf(c,o.prototype),c}function o(y,c,d){if(typeof y=="number"){if(typeof c=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return S(y)}return h(y,c,d)}o.poolSize=8192;function h(y,c,d){if(typeof y=="string")return T(y,c);if(ArrayBuffer.isView(y))return j(y);if(y==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y);if(Ue(y,ArrayBuffer)||y&&Ue(y.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ue(y,SharedArrayBuffer)||y&&Ue(y.buffer,SharedArrayBuffer)))return G(y,c,d);if(typeof y=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var D=y.valueOf&&y.valueOf();if(D!=null&&D!==y)return o.from(D,c,d);var N=X(y);if(N)return N;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof y[Symbol.toPrimitive]=="function")return o.from(y[Symbol.toPrimitive]("string"),c,d);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y)}o.from=function(y,c,d){return h(y,c,d)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function k(y){if(typeof y!="number")throw new TypeError('"size" argument must be of type number');if(y<0)throw new RangeError('The value "'+y+'" is invalid for option "size"')}function b(y,c,d){return k(y),y<=0?l(y):c!==void 0?typeof d=="string"?l(y).fill(c,d):l(y).fill(c):l(y)}o.alloc=function(y,c,d){return b(y,c,d)};function S(y){return k(y),l(y<0?0:oe(y)|0)}o.allocUnsafe=function(y){return S(y)},o.allocUnsafeSlow=function(y){return S(y)};function T(y,c){if((typeof c!="string"||c==="")&&(c="utf8"),!o.isEncoding(c))throw new TypeError("Unknown encoding: "+c);var d=te(y,c)|0,D=l(d),N=D.write(y,c);return N!==d&&(D=D.slice(0,N)),D}function I(y){for(var c=y.length<0?0:oe(y.length)|0,d=l(c),D=0;D<c;D+=1)d[D]=y[D]&255;return d}function j(y){if(Ue(y,Uint8Array)){var c=new Uint8Array(y);return G(c.buffer,c.byteOffset,c.byteLength)}return I(y)}function G(y,c,d){if(c<0||y.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(y.byteLength<c+(d||0))throw new RangeError('"length" is outside of buffer bounds');var D;return c===void 0&&d===void 0?D=new Uint8Array(y):d===void 0?D=new Uint8Array(y,c):D=new Uint8Array(y,c,d),Object.setPrototypeOf(D,o.prototype),D}function X(y){if(o.isBuffer(y)){var c=oe(y.length)|0,d=l(c);return d.length===0||y.copy(d,0,0,c),d}if(y.length!==void 0)return typeof y.length!="number"||ze(y.length)?l(0):I(y);if(y.type==="Buffer"&&Array.isArray(y.data))return I(y.data)}function oe(y){if(y>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return y|0}function H(y){return+y!=y&&(y=0),o.alloc(+y)}o.isBuffer=function(c){return c!=null&&c._isBuffer===!0&&c!==o.prototype},o.compare=function(c,d){if(Ue(c,Uint8Array)&&(c=o.from(c,c.offset,c.byteLength)),Ue(d,Uint8Array)&&(d=o.from(d,d.offset,d.byteLength)),!o.isBuffer(c)||!o.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===d)return 0;for(var D=c.length,N=d.length,Y=0,R=Math.min(D,N);Y<R;++Y)if(c[Y]!==d[Y]){D=c[Y],N=d[Y];break}return D<N?-1:N<D?1:0},o.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(c,d){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return o.alloc(0);var D;if(d===void 0)for(d=0,D=0;D<c.length;++D)d+=c[D].length;var N=o.allocUnsafe(d),Y=0;for(D=0;D<c.length;++D){var R=c[D];if(Ue(R,Uint8Array))Y+R.length>N.length?o.from(R).copy(N,Y):Uint8Array.prototype.set.call(N,R,Y);else if(o.isBuffer(R))R.copy(N,Y);else throw new TypeError('"list" argument must be an Array of Buffers');Y+=R.length}return N};function te(y,c){if(o.isBuffer(y))return y.length;if(ArrayBuffer.isView(y)||Ue(y,ArrayBuffer))return y.byteLength;if(typeof y!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof y);var d=y.length,D=arguments.length>2&&arguments[2]===!0;if(!D&&d===0)return 0;for(var N=!1;;)switch(c){case"ascii":case"latin1":case"binary":return d;case"utf8":case"utf-8":return Fe(y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d*2;case"hex":return d>>>1;case"base64":return Ye(y).length;default:if(N)return D?-1:Fe(y).length;c=(""+c).toLowerCase(),N=!0}}o.byteLength=te;function ue(y,c,d){var D=!1;if((c===void 0||c<0)&&(c=0),c>this.length||((d===void 0||d>this.length)&&(d=this.length),d<=0)||(d>>>=0,c>>>=0,d<=c))return"";for(y||(y="utf8");;)switch(y){case"hex":return Q(this,c,d);case"utf8":case"utf-8":return B(this,c,d);case"ascii":return V(this,c,d);case"latin1":case"binary":return L(this,c,d);case"base64":return q(this,c,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge(this,c,d);default:if(D)throw new TypeError("Unknown encoding: "+y);y=(y+"").toLowerCase(),D=!0}}o.prototype._isBuffer=!0;function _e(y,c,d){var D=y[c];y[c]=y[d],y[d]=D}o.prototype.swap16=function(){var c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var d=0;d<c;d+=2)_e(this,d,d+1);return this},o.prototype.swap32=function(){var c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var d=0;d<c;d+=4)_e(this,d,d+3),_e(this,d+1,d+2);return this},o.prototype.swap64=function(){var c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var d=0;d<c;d+=8)_e(this,d,d+7),_e(this,d+1,d+6),_e(this,d+2,d+5),_e(this,d+3,d+4);return this},o.prototype.toString=function(){var c=this.length;return c===0?"":arguments.length===0?B(this,0,c):ue.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(c){if(!o.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:o.compare(this,c)===0},o.prototype.inspect=function(){var c="",d=e.INSPECT_MAX_BYTES;return c=this.toString("hex",0,d).replace(/(.{2})/g,"$1 ").trim(),this.length>d&&(c+=" ... "),"<Buffer "+c+">"},i&&(o.prototype[i]=o.prototype.inspect),o.prototype.compare=function(c,d,D,N,Y){if(Ue(c,Uint8Array)&&(c=o.from(c,c.offset,c.byteLength)),!o.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(d===void 0&&(d=0),D===void 0&&(D=c?c.length:0),N===void 0&&(N=0),Y===void 0&&(Y=this.length),d<0||D>c.length||N<0||Y>this.length)throw new RangeError("out of range index");if(N>=Y&&d>=D)return 0;if(N>=Y)return-1;if(d>=D)return 1;if(d>>>=0,D>>>=0,N>>>=0,Y>>>=0,this===c)return 0;for(var R=Y-N,ie=D-d,he=Math.min(R,ie),Ce=this.slice(N,Y),Be=c.slice(d,D),f=0;f<he;++f)if(Ce[f]!==Be[f]){R=Ce[f],ie=Be[f];break}return R<ie?-1:ie<R?1:0};function we(y,c,d,D,N){if(y.length===0)return-1;if(typeof d=="string"?(D=d,d=0):d>2147483647?d=2147483647:d<-2147483648&&(d=-2147483648),d=+d,ze(d)&&(d=N?0:y.length-1),d<0&&(d=y.length+d),d>=y.length){if(N)return-1;d=y.length-1}else if(d<0)if(N)d=0;else return-1;if(typeof c=="string"&&(c=o.from(c,D)),o.isBuffer(c))return c.length===0?-1:fe(y,c,d,D,N);if(typeof c=="number")return c=c&255,typeof Uint8Array.prototype.indexOf=="function"?N?Uint8Array.prototype.indexOf.call(y,c,d):Uint8Array.prototype.lastIndexOf.call(y,c,d):fe(y,[c],d,D,N);throw new TypeError("val must be string, number or Buffer")}function fe(y,c,d,D,N){var Y=1,R=y.length,ie=c.length;if(D!==void 0&&(D=String(D).toLowerCase(),D==="ucs2"||D==="ucs-2"||D==="utf16le"||D==="utf-16le")){if(y.length<2||c.length<2)return-1;Y=2,R/=2,ie/=2,d/=2}function he(u,w){return Y===1?u[w]:u.readUInt16BE(w*Y)}var Ce;if(N){var Be=-1;for(Ce=d;Ce<R;Ce++)if(he(y,Ce)===he(c,Be===-1?0:Ce-Be)){if(Be===-1&&(Be=Ce),Ce-Be+1===ie)return Be*Y}else Be!==-1&&(Ce-=Ce-Be),Be=-1}else for(d+ie>R&&(d=R-ie),Ce=d;Ce>=0;Ce--){for(var f=!0,s=0;s<ie;s++)if(he(y,Ce+s)!==he(c,s)){f=!1;break}if(f)return Ce}return-1}o.prototype.includes=function(c,d,D){return this.indexOf(c,d,D)!==-1},o.prototype.indexOf=function(c,d,D){return we(this,c,d,D,!0)},o.prototype.lastIndexOf=function(c,d,D){return we(this,c,d,D,!1)};function g(y,c,d,D){d=Number(d)||0;var N=y.length-d;D?(D=Number(D),D>N&&(D=N)):D=N;var Y=c.length;D>Y/2&&(D=Y/2);for(var R=0;R<D;++R){var ie=parseInt(c.substr(R*2,2),16);if(ze(ie))return R;y[d+R]=ie}return R}function _(y,c,d,D){return st(Fe(c,y.length-d),y,d,D)}function C(y,c,d,D){return st(le(c),y,d,D)}function O(y,c,d,D){return st(Ye(c),y,d,D)}function x(y,c,d,D){return st(Ge(c,y.length-d),y,d,D)}o.prototype.write=function(c,d,D,N){if(d===void 0)N="utf8",D=this.length,d=0;else if(D===void 0&&typeof d=="string")N=d,D=this.length,d=0;else if(isFinite(d))d=d>>>0,isFinite(D)?(D=D>>>0,N===void 0&&(N="utf8")):(N=D,D=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Y=this.length-d;if((D===void 0||D>Y)&&(D=Y),c.length>0&&(D<0||d<0)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");N||(N="utf8");for(var R=!1;;)switch(N){case"hex":return g(this,c,d,D);case"utf8":case"utf-8":return _(this,c,d,D);case"ascii":case"latin1":case"binary":return C(this,c,d,D);case"base64":return O(this,c,d,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,c,d,D);default:if(R)throw new TypeError("Unknown encoding: "+N);N=(""+N).toLowerCase(),R=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function q(y,c,d){return c===0&&d===y.length?t.fromByteArray(y):t.fromByteArray(y.slice(c,d))}function B(y,c,d){d=Math.min(y.length,d);for(var D=[],N=c;N<d;){var Y=y[N],R=null,ie=Y>239?4:Y>223?3:Y>191?2:1;if(N+ie<=d){var he,Ce,Be,f;switch(ie){case 1:Y<128&&(R=Y);break;case 2:he=y[N+1],(he&192)===128&&(f=(Y&31)<<6|he&63,f>127&&(R=f));break;case 3:he=y[N+1],Ce=y[N+2],(he&192)===128&&(Ce&192)===128&&(f=(Y&15)<<12|(he&63)<<6|Ce&63,f>2047&&(f<55296||f>57343)&&(R=f));break;case 4:he=y[N+1],Ce=y[N+2],Be=y[N+3],(he&192)===128&&(Ce&192)===128&&(Be&192)===128&&(f=(Y&15)<<18|(he&63)<<12|(Ce&63)<<6|Be&63,f>65535&&f<1114112&&(R=f))}}R===null?(R=65533,ie=1):R>65535&&(R-=65536,D.push(R>>>10&1023|55296),R=56320|R&1023),D.push(R),N+=ie}return $(D)}var P=4096;function $(y){var c=y.length;if(c<=P)return String.fromCharCode.apply(String,y);for(var d="",D=0;D<c;)d+=String.fromCharCode.apply(String,y.slice(D,D+=P));return d}function V(y,c,d){var D="";d=Math.min(y.length,d);for(var N=c;N<d;++N)D+=String.fromCharCode(y[N]&127);return D}function L(y,c,d){var D="";d=Math.min(y.length,d);for(var N=c;N<d;++N)D+=String.fromCharCode(y[N]);return D}function Q(y,c,d){var D=y.length;(!c||c<0)&&(c=0),(!d||d<0||d>D)&&(d=D);for(var N="",Y=c;Y<d;++Y)N+=Oe[y[Y]];return N}function ge(y,c,d){for(var D=y.slice(c,d),N="",Y=0;Y<D.length-1;Y+=2)N+=String.fromCharCode(D[Y]+D[Y+1]*256);return N}o.prototype.slice=function(c,d){var D=this.length;c=~~c,d=d===void 0?D:~~d,c<0?(c+=D,c<0&&(c=0)):c>D&&(c=D),d<0?(d+=D,d<0&&(d=0)):d>D&&(d=D),d<c&&(d=c);var N=this.subarray(c,d);return Object.setPrototypeOf(N,o.prototype),N};function M(y,c,d){if(y%1!==0||y<0)throw new RangeError("offset is not uint");if(y+c>d)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(c,d,D){c=c>>>0,d=d>>>0,D||M(c,d,this.length);for(var N=this[c],Y=1,R=0;++R<d&&(Y*=256);)N+=this[c+R]*Y;return N},o.prototype.readUintBE=o.prototype.readUIntBE=function(c,d,D){c=c>>>0,d=d>>>0,D||M(c,d,this.length);for(var N=this[c+--d],Y=1;d>0&&(Y*=256);)N+=this[c+--d]*Y;return N},o.prototype.readUint8=o.prototype.readUInt8=function(c,d){return c=c>>>0,d||M(c,1,this.length),this[c]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(c,d){return c=c>>>0,d||M(c,2,this.length),this[c]|this[c+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(c,d){return c=c>>>0,d||M(c,2,this.length),this[c]<<8|this[c+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(c,d){return c=c>>>0,d||M(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(c,d){return c=c>>>0,d||M(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},o.prototype.readIntLE=function(c,d,D){c=c>>>0,d=d>>>0,D||M(c,d,this.length);for(var N=this[c],Y=1,R=0;++R<d&&(Y*=256);)N+=this[c+R]*Y;return Y*=128,N>=Y&&(N-=Math.pow(2,8*d)),N},o.prototype.readIntBE=function(c,d,D){c=c>>>0,d=d>>>0,D||M(c,d,this.length);for(var N=d,Y=1,R=this[c+--N];N>0&&(Y*=256);)R+=this[c+--N]*Y;return Y*=128,R>=Y&&(R-=Math.pow(2,8*d)),R},o.prototype.readInt8=function(c,d){return c=c>>>0,d||M(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},o.prototype.readInt16LE=function(c,d){c=c>>>0,d||M(c,2,this.length);var D=this[c]|this[c+1]<<8;return D&32768?D|4294901760:D},o.prototype.readInt16BE=function(c,d){c=c>>>0,d||M(c,2,this.length);var D=this[c+1]|this[c]<<8;return D&32768?D|4294901760:D},o.prototype.readInt32LE=function(c,d){return c=c>>>0,d||M(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},o.prototype.readInt32BE=function(c,d){return c=c>>>0,d||M(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},o.prototype.readFloatLE=function(c,d){return c=c>>>0,d||M(c,4,this.length),n.read(this,c,!0,23,4)},o.prototype.readFloatBE=function(c,d){return c=c>>>0,d||M(c,4,this.length),n.read(this,c,!1,23,4)},o.prototype.readDoubleLE=function(c,d){return c=c>>>0,d||M(c,8,this.length),n.read(this,c,!0,52,8)},o.prototype.readDoubleBE=function(c,d){return c=c>>>0,d||M(c,8,this.length),n.read(this,c,!1,52,8)};function K(y,c,d,D,N,Y){if(!o.isBuffer(y))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>N||c<Y)throw new RangeError('"value" argument is out of bounds');if(d+D>y.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(c,d,D,N){if(c=+c,d=d>>>0,D=D>>>0,!N){var Y=Math.pow(2,8*D)-1;K(this,c,d,D,Y,0)}var R=1,ie=0;for(this[d]=c&255;++ie<D&&(R*=256);)this[d+ie]=c/R&255;return d+D},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(c,d,D,N){if(c=+c,d=d>>>0,D=D>>>0,!N){var Y=Math.pow(2,8*D)-1;K(this,c,d,D,Y,0)}var R=D-1,ie=1;for(this[d+R]=c&255;--R>=0&&(ie*=256);)this[d+R]=c/ie&255;return d+D},o.prototype.writeUint8=o.prototype.writeUInt8=function(c,d,D){return c=+c,d=d>>>0,D||K(this,c,d,1,255,0),this[d]=c&255,d+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(c,d,D){return c=+c,d=d>>>0,D||K(this,c,d,2,65535,0),this[d]=c&255,this[d+1]=c>>>8,d+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(c,d,D){return c=+c,d=d>>>0,D||K(this,c,d,2,65535,0),this[d]=c>>>8,this[d+1]=c&255,d+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(c,d,D){return c=+c,d=d>>>0,D||K(this,c,d,4,4294967295,0),this[d+3]=c>>>24,this[d+2]=c>>>16,this[d+1]=c>>>8,this[d]=c&255,d+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(c,d,D){return c=+c,d=d>>>0,D||K(this,c,d,4,4294967295,0),this[d]=c>>>24,this[d+1]=c>>>16,this[d+2]=c>>>8,this[d+3]=c&255,d+4},o.prototype.writeIntLE=function(c,d,D,N){if(c=+c,d=d>>>0,!N){var Y=Math.pow(2,8*D-1);K(this,c,d,D,Y-1,-Y)}var R=0,ie=1,he=0;for(this[d]=c&255;++R<D&&(ie*=256);)c<0&&he===0&&this[d+R-1]!==0&&(he=1),this[d+R]=(c/ie>>0)-he&255;return d+D},o.prototype.writeIntBE=function(c,d,D,N){if(c=+c,d=d>>>0,!N){var Y=Math.pow(2,8*D-1);K(this,c,d,D,Y-1,-Y)}var R=D-1,ie=1,he=0;for(this[d+R]=c&255;--R>=0&&(ie*=256);)c<0&&he===0&&this[d+R+1]!==0&&(he=1),this[d+R]=(c/ie>>0)-he&255;return d+D},o.prototype.writeInt8=function(c,d,D){return c=+c,d=d>>>0,D||K(this,c,d,1,127,-128),c<0&&(c=255+c+1),this[d]=c&255,d+1},o.prototype.writeInt16LE=function(c,d,D){return c=+c,d=d>>>0,D||K(this,c,d,2,32767,-32768),this[d]=c&255,this[d+1]=c>>>8,d+2},o.prototype.writeInt16BE=function(c,d,D){return c=+c,d=d>>>0,D||K(this,c,d,2,32767,-32768),this[d]=c>>>8,this[d+1]=c&255,d+2},o.prototype.writeInt32LE=function(c,d,D){return c=+c,d=d>>>0,D||K(this,c,d,4,2147483647,-2147483648),this[d]=c&255,this[d+1]=c>>>8,this[d+2]=c>>>16,this[d+3]=c>>>24,d+4},o.prototype.writeInt32BE=function(c,d,D){return c=+c,d=d>>>0,D||K(this,c,d,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[d]=c>>>24,this[d+1]=c>>>16,this[d+2]=c>>>8,this[d+3]=c&255,d+4};function me(y,c,d,D,N,Y){if(d+D>y.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("Index out of range")}function Te(y,c,d,D,N){return c=+c,d=d>>>0,N||me(y,c,d,4),n.write(y,c,d,D,23,4),d+4}o.prototype.writeFloatLE=function(c,d,D){return Te(this,c,d,!0,D)},o.prototype.writeFloatBE=function(c,d,D){return Te(this,c,d,!1,D)};function be(y,c,d,D,N){return c=+c,d=d>>>0,N||me(y,c,d,8),n.write(y,c,d,D,52,8),d+8}o.prototype.writeDoubleLE=function(c,d,D){return be(this,c,d,!0,D)},o.prototype.writeDoubleBE=function(c,d,D){return be(this,c,d,!1,D)},o.prototype.copy=function(c,d,D,N){if(!o.isBuffer(c))throw new TypeError("argument should be a Buffer");if(D||(D=0),!N&&N!==0&&(N=this.length),d>=c.length&&(d=c.length),d||(d=0),N>0&&N<D&&(N=D),N===D||c.length===0||this.length===0)return 0;if(d<0)throw new RangeError("targetStart out of bounds");if(D<0||D>=this.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("sourceEnd out of bounds");N>this.length&&(N=this.length),c.length-d<N-D&&(N=c.length-d+D);var Y=N-D;return this===c&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(d,D,N):Uint8Array.prototype.set.call(c,this.subarray(D,N),d),Y},o.prototype.fill=function(c,d,D,N){if(typeof c=="string"){if(typeof d=="string"?(N=d,d=0,D=this.length):typeof D=="string"&&(N=D,D=this.length),N!==void 0&&typeof N!="string")throw new TypeError("encoding must be a string");if(typeof N=="string"&&!o.isEncoding(N))throw new TypeError("Unknown encoding: "+N);if(c.length===1){var Y=c.charCodeAt(0);(N==="utf8"&&Y<128||N==="latin1")&&(c=Y)}}else typeof c=="number"?c=c&255:typeof c=="boolean"&&(c=Number(c));if(d<0||this.length<d||this.length<D)throw new RangeError("Out of range index");if(D<=d)return this;d=d>>>0,D=D===void 0?this.length:D>>>0,c||(c=0);var R;if(typeof c=="number")for(R=d;R<D;++R)this[R]=c;else{var ie=o.isBuffer(c)?c:o.from(c,N),he=ie.length;if(he===0)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(R=0;R<D-d;++R)this[R+d]=ie[R%he]}return this};var ce=/[^+/0-9A-Za-z-_]/g;function ke(y){if(y=y.split("=")[0],y=y.trim().replace(ce,""),y.length<2)return"";for(;y.length%4!==0;)y=y+"=";return y}function Fe(y,c){c=c||1/0;for(var d,D=y.length,N=null,Y=[],R=0;R<D;++R){if(d=y.charCodeAt(R),d>55295&&d<57344){if(!N){if(d>56319){(c-=3)>-1&&Y.push(239,191,189);continue}else if(R+1===D){(c-=3)>-1&&Y.push(239,191,189);continue}N=d;continue}if(d<56320){(c-=3)>-1&&Y.push(239,191,189),N=d;continue}d=(N-55296<<10|d-56320)+65536}else N&&(c-=3)>-1&&Y.push(239,191,189);if(N=null,d<128){if((c-=1)<0)break;Y.push(d)}else if(d<2048){if((c-=2)<0)break;Y.push(d>>6|192,d&63|128)}else if(d<65536){if((c-=3)<0)break;Y.push(d>>12|224,d>>6&63|128,d&63|128)}else if(d<1114112){if((c-=4)<0)break;Y.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw new Error("Invalid code point")}return Y}function le(y){for(var c=[],d=0;d<y.length;++d)c.push(y.charCodeAt(d)&255);return c}function Ge(y,c){for(var d,D,N,Y=[],R=0;R<y.length&&!((c-=2)<0);++R)d=y.charCodeAt(R),D=d>>8,N=d%256,Y.push(N),Y.push(D);return Y}function Ye(y){return t.toByteArray(ke(y))}function st(y,c,d,D){for(var N=0;N<D&&!(N+d>=c.length||N>=y.length);++N)c[N+d]=y[N];return N}function Ue(y,c){return y instanceof c||y!=null&&y.constructor!=null&&y.constructor.name!=null&&y.constructor.name===c.name}function ze(y){return y!==y}var Oe=function(){for(var y="0123456789abcdef",c=new Array(256),d=0;d<16;++d)for(var D=d*16,N=0;N<16;++N)c[D+N]=y[d]+y[N];return c}()})(Jo);const Sd=ut({name:"TokenInformation",mixins:[windowMixin],props:{encodedToken:String,showAmount:Boolean,showMintCheck:Boolean,showP2PKCheck:Boolean},data:function(){return{}},watch:{},computed:{...Se(Ke,["activeMintUrl","activeProofs","mints","proofs","activeUnit","addMintBlocking"]),proofsToShow:function(){return He.getProofs(He.decode(this.encodedToken))},sumProofs:function(){return He.getProofs(He.decode(this.encodedToken)).flat().reduce((t,n)=>t+=n.amount,0)},displayUnit:function(){return this.formatCurrency(this.sumProofs,this.tokenUnit)},tokenUnit:function(){return He.getUnit(He.decode(this.encodedToken))},tokenMintUrl:function(){let e=He.getMint(He.decode(this.encodedToken));return Xt(e)},displayMemo:function(){return He.getMemo(He.decode(this.encodedToken))}},methods:{...Ee(Gt,["isLocked","isLockedToUs"]),getProofsMint:function(e){let t=[...new Set(e.map(r=>r.id))],i=this.mints.filter(r=>r.keysets.some(a=>t.indexOf(a)>=0)).map(r=>[{url:r.url,ids:r.keysets}][0]);return i.length==0?"":Xt(i[0].url)},mintKnownToUs:function(e){let t=[...new Set(e.map(n=>n.id))];return this.mints.filter(n=>n.keysets.some(i=>t.indexOf(i.id)>=0)).length>0}}}),Td={class:"row text-left q-py-none q-my-none"},Ed={class:"col-12 q-px-none"},qd={key:2,class:"q-my-md"};function Pd(e,t,n,i,r,a){return F(),se("div",Td,[E("div",Ed,[e.showAmount?(F(),ne(dn,{key:0,outline:"",class:"q-pa-md",style:{"border-width":"2px"}},{default:v(()=>[m(Me,{name:"toll",size:"xs",class:"q-mr-sm"}),E("strong",null,De(e.displayUnit),1)]),_:1})):re("",!0),m(dn,{outline:"",class:"q-pa-md",style:{height:"36px","font-family":"monospace"}},{default:v(()=>[m(Me,{name:"account_balance",size:"xs",class:"q-mr-xs"}),W(" "+De(e.tokenMintUrl)+" ",1),e.addMintBlocking?(F(),ne(Ot,{key:0,size:"sm",class:"q-ml-sm"})):re("",!0),e.showMintCheck&&e.mintKnownToUs(e.proofsToShow)&&!e.addMintBlocking?(F(),ne(Me,{key:1,name:"check",size:"sm",color:"green",class:"q-ml-xs"})):re("",!0)]),_:1}),e.isLocked(e.proofsToShow)?(F(),ne(dn,{key:1,outline:"",icon:"lock",class:"q-pa-md"},{default:v(()=>[t[0]||(t[0]=W(" P2PK ")),e.showP2PKCheck||e.isLockedToUs(e.proofsToShow)?(F(),ne(Me,{key:0,name:e.isLockedToUs(e.proofsToShow)?"check":"close",size:"sm",color:e.isLockedToUs(e.proofsToShow)?"green":"red",class:"q-ml-xs"},null,8,["name","color"])):re("",!0)]),_:1})):re("",!0),e.displayMemo?(F(),se("div",qd,[m(Me,{name:"chat",size:"xs",color:"grey",class:"q-mr-sm"}),E("span",null,De(e.displayMemo),1)])):re("",!0)])])}var ea=ot(Sd,[["render",Pd]]),ft={},Wt,Ht;function fr(){throw new Error("setTimeout has not been defined")}function hr(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Wt=setTimeout:Wt=fr}catch{Wt=fr}try{typeof clearTimeout=="function"?Ht=clearTimeout:Ht=hr}catch{Ht=hr}})();function ta(e){if(Wt===setTimeout)return setTimeout(e,0);if((Wt===fr||!Wt)&&setTimeout)return Wt=setTimeout,setTimeout(e,0);try{return Wt(e,0)}catch{try{return Wt.call(null,e,0)}catch{return Wt.call(this,e,0)}}}function Md(e){if(Ht===clearTimeout)return clearTimeout(e);if((Ht===hr||!Ht)&&clearTimeout)return Ht=clearTimeout,clearTimeout(e);try{return Ht(e)}catch{try{return Ht.call(null,e)}catch{return Ht.call(this,e)}}}var rn=[],Bn=!1,vn,_i=-1;function Id(){!Bn||!vn||(Bn=!1,vn.length?rn=vn.concat(rn):_i=-1,rn.length&&na())}function na(){if(!Bn){var e=ta(Id);Bn=!0;for(var t=rn.length;t;){for(vn=rn,rn=[];++_i<t;)vn&&vn[_i].run();_i=-1,t=rn.length}vn=null,Bn=!1,Md(e)}}ft.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];rn.push(new ia(e,t)),rn.length===1&&!Bn&&ta(na)};function ia(e,t){this.fun=e,this.array=t}ia.prototype.run=function(){this.fun.apply(null,this.array)};ft.title="browser";ft.browser=!0;ft.env={};ft.argv=[];ft.version="";ft.versions={};function on(){}ft.on=on;ft.addListener=on;ft.once=on;ft.off=on;ft.removeListener=on;ft.removeAllListeners=on;ft.emit=on;ft.prependListener=on;ft.prependOnceListener=on;ft.listeners=function(e){return[]};ft.binding=function(e){throw new Error("process.binding is not supported")};ft.cwd=function(){return"/"};ft.chdir=function(e){throw new Error("process.chdir is not supported")};ft.umask=function(){return 0};const Ad=ut({name:"ChooseMint",mixins:[windowMixin],props:{rounded:{type:Boolean,default:!1},title:{type:String,default:"Select a mint"},style:{type:String,default:""}},data:function(){return{chosenMint:null}},mounted(){this.chosenMint={url:this.activeMintUrl,shorturl:Xt(this.activeMintUrl)}},watch:{chosenMint:async function(){this.activeMintUrl=this.chosenMint.url}},computed:{...Se(Ke,["activeMintUrl","activeProofs","mints","proofs","activeUnit"]),...Ie(Ke,["activeMintUrl"]),getBalance:function(){return this.activeProofs.flat().reduce((e,t)=>e+=t.amount,0)}},methods:{...Ee(Ke,["activateMintUrl"]),chooseMintOptions:function(){let e=[];for(const[t,n]of Object.entries(this.mints)){const i=n.keysets.map(l=>l.unit),r=[...new Set(i)],a=new Fo(n);e.push({nickname:n.nickname,url:n.url,shorturl:n.nickname||Xt(n.url),balances:a.allBalances,units:r})}return e}}}),Ud={class:"q-pb-md"},Bd={key:0,class:"row q-mb-none"},$d={class:"col-12"},Rd={class:"text-caption"},Fd={key:1,class:"row q-mt-xs q-mb-none"},Ld={class:"col-12 cursor-pointer"};function Nd(e,t,n,i,r,a){return F(),se("div",Ud,[e.title.length?(F(),se("div",Bd,[E("div",$d,[E("span",Rd,De(e.title),1)])])):re("",!0),e.activeMintUrl?(F(),se("div",Fd,[E("div",Ld,[m(cr,{outlined:"",class:"q-px-none",color:"white",modelValue:e.chosenMint,"onUpdate:modelValue":t[0]||(t[0]=l=>e.chosenMint=l),options:e.chooseMintOptions(),"option-value":"url","option-label":"shorturl",rounded:e.rounded,style:ar(e.style)},{option:v(l=>[m(Ct,vs(ys(l.itemProps)),{default:v(()=>[m(ht,null,{default:v(()=>[m(Le,{class:"text-body1 q-pt-xs",style:ar(e.activeMintUrl===l.opt.url?"font-weight: bold":"")},{default:v(()=>[W(De(l.opt.nickname||l.opt.shorturl),1)]),_:2},1032,["style"]),m(Le,{class:"text-caption q-pb-xs",style:{"font-family":"monospace","font-size":"11px"}},{default:v(()=>[W(De(l.opt.url),1)]),_:2},1024),E("div",null,[(F(!0),se(Tt,null,nn(l.opt.units,o=>(F(),ne(cn,{key:o,color:l.opt.url===e.activeMintUrl?"primary":"grey",label:e.formatCurrency(l.opt.balances[o],o),class:"q-mr-xs q-mb-xs"},null,8,["color","label"]))),128))])]),_:2},1024)]),_:2},1040),m(_r)]),prepend:v(()=>[m(Me,{name:"account_balance",size:"1.2rem",color:"grey",class:"q-mr-none q-mb-none"})]),append:v(()=>[m(cn,{color:"primary",label:e.formatCurrency(e.getBalance,e.activeUnit),class:"q-ma-xs q-pa-sm text-weight-bold"},null,8,["label"])]),_:1},8,["modelValue","options","rounded","style"])])])):re("",!0)])}var Fi=ot(Ad,[["render",Nd]]),ii=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},e(t,n)};return function(t,n){e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),fo=function(e){ii(t,e);function t(){var n=e.call(this,"Invalid Scheme")||this;return n.name="InvalidSchemeError",n}return t}(Error),er=function(e){ii(t,e);function t(){var n=e.call(this,"Invalid Path")||this;return n.name="InvalidPathLengthError",n}return t}(Error),ra=function(e){ii(t,e);function t(){var n=e.call(this,"Invalid Type")||this;return n.name="InvalidTypeError",n}return t}(Error),ho=function(e){ii(t,e);function t(){var n=e.call(this,"Invalid Sequence Component")||this;return n.name="InvalidSequenceComponentError",n}return t}(Error),Od=function(e){ii(t,e);function t(){var n=e.call(this,"Invalid Checksum")||this;return n.name="InvalidChecksumError",n}return t}(Error),rt={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=No,n=Oo,i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=H,e.INSPECT_MAX_BYTES=50;const r=2147483647;e.kMaxLength=r,o.TYPED_ARRAY_SUPPORT=a(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const f=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(f,s),f.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(!!o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(!!o.isBuffer(this))return this.byteOffset}});function l(f){if(f>r)throw new RangeError('The value "'+f+'" is invalid for option "size"');const s=new Uint8Array(f);return Object.setPrototypeOf(s,o.prototype),s}function o(f,s,u){if(typeof f=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return S(f)}return h(f,s,u)}o.poolSize=8192;function h(f,s,u){if(typeof f=="string")return T(f,s);if(ArrayBuffer.isView(f))return j(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(R(f,ArrayBuffer)||f&&R(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(R(f,SharedArrayBuffer)||f&&R(f.buffer,SharedArrayBuffer)))return G(f,s,u);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const w=f.valueOf&&f.valueOf();if(w!=null&&w!==f)return o.from(w,s,u);const U=X(f);if(U)return U;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return o.from(f[Symbol.toPrimitive]("string"),s,u);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}o.from=function(f,s,u){return h(f,s,u)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function k(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function b(f,s,u){return k(f),f<=0?l(f):s!==void 0?typeof u=="string"?l(f).fill(s,u):l(f).fill(s):l(f)}o.alloc=function(f,s,u){return b(f,s,u)};function S(f){return k(f),l(f<0?0:oe(f)|0)}o.allocUnsafe=function(f){return S(f)},o.allocUnsafeSlow=function(f){return S(f)};function T(f,s){if((typeof s!="string"||s==="")&&(s="utf8"),!o.isEncoding(s))throw new TypeError("Unknown encoding: "+s);const u=te(f,s)|0;let w=l(u);const U=w.write(f,s);return U!==u&&(w=w.slice(0,U)),w}function I(f){const s=f.length<0?0:oe(f.length)|0,u=l(s);for(let w=0;w<s;w+=1)u[w]=f[w]&255;return u}function j(f){if(R(f,Uint8Array)){const s=new Uint8Array(f);return G(s.buffer,s.byteOffset,s.byteLength)}return I(f)}function G(f,s,u){if(s<0||f.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<s+(u||0))throw new RangeError('"length" is outside of buffer bounds');let w;return s===void 0&&u===void 0?w=new Uint8Array(f):u===void 0?w=new Uint8Array(f,s):w=new Uint8Array(f,s,u),Object.setPrototypeOf(w,o.prototype),w}function X(f){if(o.isBuffer(f)){const s=oe(f.length)|0,u=l(s);return u.length===0||f.copy(u,0,0,s),u}if(f.length!==void 0)return typeof f.length!="number"||ie(f.length)?l(0):I(f);if(f.type==="Buffer"&&Array.isArray(f.data))return I(f.data)}function oe(f){if(f>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return f|0}function H(f){return+f!=f&&(f=0),o.alloc(+f)}o.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==o.prototype},o.compare=function(s,u){if(R(s,Uint8Array)&&(s=o.from(s,s.offset,s.byteLength)),R(u,Uint8Array)&&(u=o.from(u,u.offset,u.byteLength)),!o.isBuffer(s)||!o.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===u)return 0;let w=s.length,U=u.length;for(let z=0,Z=Math.min(w,U);z<Z;++z)if(s[z]!==u[z]){w=s[z],U=u[z];break}return w<U?-1:U<w?1:0},o.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(s,u){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return o.alloc(0);let w;if(u===void 0)for(u=0,w=0;w<s.length;++w)u+=s[w].length;const U=o.allocUnsafe(u);let z=0;for(w=0;w<s.length;++w){let Z=s[w];if(R(Z,Uint8Array))z+Z.length>U.length?(o.isBuffer(Z)||(Z=o.from(Z)),Z.copy(U,z)):Uint8Array.prototype.set.call(U,Z,z);else if(o.isBuffer(Z))Z.copy(U,z);else throw new TypeError('"list" argument must be an Array of Buffers');z+=Z.length}return U};function te(f,s){if(o.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||R(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);const u=f.length,w=arguments.length>2&&arguments[2]===!0;if(!w&&u===0)return 0;let U=!1;for(;;)switch(s){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":return c(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u*2;case"hex":return u>>>1;case"base64":return N(f).length;default:if(U)return w?-1:c(f).length;s=(""+s).toLowerCase(),U=!0}}o.byteLength=te;function ue(f,s,u){let w=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((u===void 0||u>this.length)&&(u=this.length),u<=0)||(u>>>=0,s>>>=0,u<=s))return"";for(f||(f="utf8");;)switch(f){case"hex":return Q(this,s,u);case"utf8":case"utf-8":return B(this,s,u);case"ascii":return V(this,s,u);case"latin1":case"binary":return L(this,s,u);case"base64":return q(this,s,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge(this,s,u);default:if(w)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),w=!0}}o.prototype._isBuffer=!0;function _e(f,s,u){const w=f[s];f[s]=f[u],f[u]=w}o.prototype.swap16=function(){const s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<s;u+=2)_e(this,u,u+1);return this},o.prototype.swap32=function(){const s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<s;u+=4)_e(this,u,u+3),_e(this,u+1,u+2);return this},o.prototype.swap64=function(){const s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<s;u+=8)_e(this,u,u+7),_e(this,u+1,u+6),_e(this,u+2,u+5),_e(this,u+3,u+4);return this},o.prototype.toString=function(){const s=this.length;return s===0?"":arguments.length===0?B(this,0,s):ue.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(s){if(!o.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:o.compare(this,s)===0},o.prototype.inspect=function(){let s="";const u=e.INSPECT_MAX_BYTES;return s=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(s+=" ... "),"<Buffer "+s+">"},i&&(o.prototype[i]=o.prototype.inspect),o.prototype.compare=function(s,u,w,U,z){if(R(s,Uint8Array)&&(s=o.from(s,s.offset,s.byteLength)),!o.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(u===void 0&&(u=0),w===void 0&&(w=s?s.length:0),U===void 0&&(U=0),z===void 0&&(z=this.length),u<0||w>s.length||U<0||z>this.length)throw new RangeError("out of range index");if(U>=z&&u>=w)return 0;if(U>=z)return-1;if(u>=w)return 1;if(u>>>=0,w>>>=0,U>>>=0,z>>>=0,this===s)return 0;let Z=z-U,Ae=w-u;const We=Math.min(Z,Ae),Ze=this.slice(U,z),nt=s.slice(u,w);for(let Xe=0;Xe<We;++Xe)if(Ze[Xe]!==nt[Xe]){Z=Ze[Xe],Ae=nt[Xe];break}return Z<Ae?-1:Ae<Z?1:0};function we(f,s,u,w,U){if(f.length===0)return-1;if(typeof u=="string"?(w=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),u=+u,ie(u)&&(u=U?0:f.length-1),u<0&&(u=f.length+u),u>=f.length){if(U)return-1;u=f.length-1}else if(u<0)if(U)u=0;else return-1;if(typeof s=="string"&&(s=o.from(s,w)),o.isBuffer(s))return s.length===0?-1:fe(f,s,u,w,U);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?U?Uint8Array.prototype.indexOf.call(f,s,u):Uint8Array.prototype.lastIndexOf.call(f,s,u):fe(f,[s],u,w,U);throw new TypeError("val must be string, number or Buffer")}function fe(f,s,u,w,U){let z=1,Z=f.length,Ae=s.length;if(w!==void 0&&(w=String(w).toLowerCase(),w==="ucs2"||w==="ucs-2"||w==="utf16le"||w==="utf-16le")){if(f.length<2||s.length<2)return-1;z=2,Z/=2,Ae/=2,u/=2}function We(nt,Xe){return z===1?nt[Xe]:nt.readUInt16BE(Xe*z)}let Ze;if(U){let nt=-1;for(Ze=u;Ze<Z;Ze++)if(We(f,Ze)===We(s,nt===-1?0:Ze-nt)){if(nt===-1&&(nt=Ze),Ze-nt+1===Ae)return nt*z}else nt!==-1&&(Ze-=Ze-nt),nt=-1}else for(u+Ae>Z&&(u=Z-Ae),Ze=u;Ze>=0;Ze--){let nt=!0;for(let Xe=0;Xe<Ae;Xe++)if(We(f,Ze+Xe)!==We(s,Xe)){nt=!1;break}if(nt)return Ze}return-1}o.prototype.includes=function(s,u,w){return this.indexOf(s,u,w)!==-1},o.prototype.indexOf=function(s,u,w){return we(this,s,u,w,!0)},o.prototype.lastIndexOf=function(s,u,w){return we(this,s,u,w,!1)};function g(f,s,u,w){u=Number(u)||0;const U=f.length-u;w?(w=Number(w),w>U&&(w=U)):w=U;const z=s.length;w>z/2&&(w=z/2);let Z;for(Z=0;Z<w;++Z){const Ae=parseInt(s.substr(Z*2,2),16);if(ie(Ae))return Z;f[u+Z]=Ae}return Z}function _(f,s,u,w){return Y(c(s,f.length-u),f,u,w)}function C(f,s,u,w){return Y(d(s),f,u,w)}function O(f,s,u,w){return Y(N(s),f,u,w)}function x(f,s,u,w){return Y(D(s,f.length-u),f,u,w)}o.prototype.write=function(s,u,w,U){if(u===void 0)U="utf8",w=this.length,u=0;else if(w===void 0&&typeof u=="string")U=u,w=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(w)?(w=w>>>0,U===void 0&&(U="utf8")):(U=w,w=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const z=this.length-u;if((w===void 0||w>z)&&(w=z),s.length>0&&(w<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");U||(U="utf8");let Z=!1;for(;;)switch(U){case"hex":return g(this,s,u,w);case"utf8":case"utf-8":return _(this,s,u,w);case"ascii":case"latin1":case"binary":return C(this,s,u,w);case"base64":return O(this,s,u,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,s,u,w);default:if(Z)throw new TypeError("Unknown encoding: "+U);U=(""+U).toLowerCase(),Z=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function q(f,s,u){return s===0&&u===f.length?t.fromByteArray(f):t.fromByteArray(f.slice(s,u))}function B(f,s,u){u=Math.min(f.length,u);const w=[];let U=s;for(;U<u;){const z=f[U];let Z=null,Ae=z>239?4:z>223?3:z>191?2:1;if(U+Ae<=u){let We,Ze,nt,Xe;switch(Ae){case 1:z<128&&(Z=z);break;case 2:We=f[U+1],(We&192)===128&&(Xe=(z&31)<<6|We&63,Xe>127&&(Z=Xe));break;case 3:We=f[U+1],Ze=f[U+2],(We&192)===128&&(Ze&192)===128&&(Xe=(z&15)<<12|(We&63)<<6|Ze&63,Xe>2047&&(Xe<55296||Xe>57343)&&(Z=Xe));break;case 4:We=f[U+1],Ze=f[U+2],nt=f[U+3],(We&192)===128&&(Ze&192)===128&&(nt&192)===128&&(Xe=(z&15)<<18|(We&63)<<12|(Ze&63)<<6|nt&63,Xe>65535&&Xe<1114112&&(Z=Xe))}}Z===null?(Z=65533,Ae=1):Z>65535&&(Z-=65536,w.push(Z>>>10&1023|55296),Z=56320|Z&1023),w.push(Z),U+=Ae}return $(w)}const P=4096;function $(f){const s=f.length;if(s<=P)return String.fromCharCode.apply(String,f);let u="",w=0;for(;w<s;)u+=String.fromCharCode.apply(String,f.slice(w,w+=P));return u}function V(f,s,u){let w="";u=Math.min(f.length,u);for(let U=s;U<u;++U)w+=String.fromCharCode(f[U]&127);return w}function L(f,s,u){let w="";u=Math.min(f.length,u);for(let U=s;U<u;++U)w+=String.fromCharCode(f[U]);return w}function Q(f,s,u){const w=f.length;(!s||s<0)&&(s=0),(!u||u<0||u>w)&&(u=w);let U="";for(let z=s;z<u;++z)U+=he[f[z]];return U}function ge(f,s,u){const w=f.slice(s,u);let U="";for(let z=0;z<w.length-1;z+=2)U+=String.fromCharCode(w[z]+w[z+1]*256);return U}o.prototype.slice=function(s,u){const w=this.length;s=~~s,u=u===void 0?w:~~u,s<0?(s+=w,s<0&&(s=0)):s>w&&(s=w),u<0?(u+=w,u<0&&(u=0)):u>w&&(u=w),u<s&&(u=s);const U=this.subarray(s,u);return Object.setPrototypeOf(U,o.prototype),U};function M(f,s,u){if(f%1!==0||f<0)throw new RangeError("offset is not uint");if(f+s>u)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(s,u,w){s=s>>>0,u=u>>>0,w||M(s,u,this.length);let U=this[s],z=1,Z=0;for(;++Z<u&&(z*=256);)U+=this[s+Z]*z;return U},o.prototype.readUintBE=o.prototype.readUIntBE=function(s,u,w){s=s>>>0,u=u>>>0,w||M(s,u,this.length);let U=this[s+--u],z=1;for(;u>0&&(z*=256);)U+=this[s+--u]*z;return U},o.prototype.readUint8=o.prototype.readUInt8=function(s,u){return s=s>>>0,u||M(s,1,this.length),this[s]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(s,u){return s=s>>>0,u||M(s,2,this.length),this[s]|this[s+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(s,u){return s=s>>>0,u||M(s,2,this.length),this[s]<<8|this[s+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(s,u){return s=s>>>0,u||M(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(s,u){return s=s>>>0,u||M(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])},o.prototype.readBigUInt64LE=Ce(function(s){s=s>>>0,Ue(s,"offset");const u=this[s],w=this[s+7];(u===void 0||w===void 0)&&ze(s,this.length-8);const U=u+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24,z=this[++s]+this[++s]*2**8+this[++s]*2**16+w*2**24;return BigInt(U)+(BigInt(z)<<BigInt(32))}),o.prototype.readBigUInt64BE=Ce(function(s){s=s>>>0,Ue(s,"offset");const u=this[s],w=this[s+7];(u===void 0||w===void 0)&&ze(s,this.length-8);const U=u*2**24+this[++s]*2**16+this[++s]*2**8+this[++s],z=this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+w;return(BigInt(U)<<BigInt(32))+BigInt(z)}),o.prototype.readIntLE=function(s,u,w){s=s>>>0,u=u>>>0,w||M(s,u,this.length);let U=this[s],z=1,Z=0;for(;++Z<u&&(z*=256);)U+=this[s+Z]*z;return z*=128,U>=z&&(U-=Math.pow(2,8*u)),U},o.prototype.readIntBE=function(s,u,w){s=s>>>0,u=u>>>0,w||M(s,u,this.length);let U=u,z=1,Z=this[s+--U];for(;U>0&&(z*=256);)Z+=this[s+--U]*z;return z*=128,Z>=z&&(Z-=Math.pow(2,8*u)),Z},o.prototype.readInt8=function(s,u){return s=s>>>0,u||M(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]},o.prototype.readInt16LE=function(s,u){s=s>>>0,u||M(s,2,this.length);const w=this[s]|this[s+1]<<8;return w&32768?w|4294901760:w},o.prototype.readInt16BE=function(s,u){s=s>>>0,u||M(s,2,this.length);const w=this[s+1]|this[s]<<8;return w&32768?w|4294901760:w},o.prototype.readInt32LE=function(s,u){return s=s>>>0,u||M(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},o.prototype.readInt32BE=function(s,u){return s=s>>>0,u||M(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},o.prototype.readBigInt64LE=Ce(function(s){s=s>>>0,Ue(s,"offset");const u=this[s],w=this[s+7];(u===void 0||w===void 0)&&ze(s,this.length-8);const U=this[s+4]+this[s+5]*2**8+this[s+6]*2**16+(w<<24);return(BigInt(U)<<BigInt(32))+BigInt(u+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24)}),o.prototype.readBigInt64BE=Ce(function(s){s=s>>>0,Ue(s,"offset");const u=this[s],w=this[s+7];(u===void 0||w===void 0)&&ze(s,this.length-8);const U=(u<<24)+this[++s]*2**16+this[++s]*2**8+this[++s];return(BigInt(U)<<BigInt(32))+BigInt(this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+w)}),o.prototype.readFloatLE=function(s,u){return s=s>>>0,u||M(s,4,this.length),n.read(this,s,!0,23,4)},o.prototype.readFloatBE=function(s,u){return s=s>>>0,u||M(s,4,this.length),n.read(this,s,!1,23,4)},o.prototype.readDoubleLE=function(s,u){return s=s>>>0,u||M(s,8,this.length),n.read(this,s,!0,52,8)},o.prototype.readDoubleBE=function(s,u){return s=s>>>0,u||M(s,8,this.length),n.read(this,s,!1,52,8)};function K(f,s,u,w,U,z){if(!o.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>U||s<z)throw new RangeError('"value" argument is out of bounds');if(u+w>f.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(s,u,w,U){if(s=+s,u=u>>>0,w=w>>>0,!U){const Ae=Math.pow(2,8*w)-1;K(this,s,u,w,Ae,0)}let z=1,Z=0;for(this[u]=s&255;++Z<w&&(z*=256);)this[u+Z]=s/z&255;return u+w},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(s,u,w,U){if(s=+s,u=u>>>0,w=w>>>0,!U){const Ae=Math.pow(2,8*w)-1;K(this,s,u,w,Ae,0)}let z=w-1,Z=1;for(this[u+z]=s&255;--z>=0&&(Z*=256);)this[u+z]=s/Z&255;return u+w},o.prototype.writeUint8=o.prototype.writeUInt8=function(s,u,w){return s=+s,u=u>>>0,w||K(this,s,u,1,255,0),this[u]=s&255,u+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(s,u,w){return s=+s,u=u>>>0,w||K(this,s,u,2,65535,0),this[u]=s&255,this[u+1]=s>>>8,u+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(s,u,w){return s=+s,u=u>>>0,w||K(this,s,u,2,65535,0),this[u]=s>>>8,this[u+1]=s&255,u+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(s,u,w){return s=+s,u=u>>>0,w||K(this,s,u,4,4294967295,0),this[u+3]=s>>>24,this[u+2]=s>>>16,this[u+1]=s>>>8,this[u]=s&255,u+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(s,u,w){return s=+s,u=u>>>0,w||K(this,s,u,4,4294967295,0),this[u]=s>>>24,this[u+1]=s>>>16,this[u+2]=s>>>8,this[u+3]=s&255,u+4};function me(f,s,u,w,U){st(s,w,U,f,u,7);let z=Number(s&BigInt(4294967295));f[u++]=z,z=z>>8,f[u++]=z,z=z>>8,f[u++]=z,z=z>>8,f[u++]=z;let Z=Number(s>>BigInt(32)&BigInt(4294967295));return f[u++]=Z,Z=Z>>8,f[u++]=Z,Z=Z>>8,f[u++]=Z,Z=Z>>8,f[u++]=Z,u}function Te(f,s,u,w,U){st(s,w,U,f,u,7);let z=Number(s&BigInt(4294967295));f[u+7]=z,z=z>>8,f[u+6]=z,z=z>>8,f[u+5]=z,z=z>>8,f[u+4]=z;let Z=Number(s>>BigInt(32)&BigInt(4294967295));return f[u+3]=Z,Z=Z>>8,f[u+2]=Z,Z=Z>>8,f[u+1]=Z,Z=Z>>8,f[u]=Z,u+8}o.prototype.writeBigUInt64LE=Ce(function(s,u=0){return me(this,s,u,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=Ce(function(s,u=0){return Te(this,s,u,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(s,u,w,U){if(s=+s,u=u>>>0,!U){const We=Math.pow(2,8*w-1);K(this,s,u,w,We-1,-We)}let z=0,Z=1,Ae=0;for(this[u]=s&255;++z<w&&(Z*=256);)s<0&&Ae===0&&this[u+z-1]!==0&&(Ae=1),this[u+z]=(s/Z>>0)-Ae&255;return u+w},o.prototype.writeIntBE=function(s,u,w,U){if(s=+s,u=u>>>0,!U){const We=Math.pow(2,8*w-1);K(this,s,u,w,We-1,-We)}let z=w-1,Z=1,Ae=0;for(this[u+z]=s&255;--z>=0&&(Z*=256);)s<0&&Ae===0&&this[u+z+1]!==0&&(Ae=1),this[u+z]=(s/Z>>0)-Ae&255;return u+w},o.prototype.writeInt8=function(s,u,w){return s=+s,u=u>>>0,w||K(this,s,u,1,127,-128),s<0&&(s=255+s+1),this[u]=s&255,u+1},o.prototype.writeInt16LE=function(s,u,w){return s=+s,u=u>>>0,w||K(this,s,u,2,32767,-32768),this[u]=s&255,this[u+1]=s>>>8,u+2},o.prototype.writeInt16BE=function(s,u,w){return s=+s,u=u>>>0,w||K(this,s,u,2,32767,-32768),this[u]=s>>>8,this[u+1]=s&255,u+2},o.prototype.writeInt32LE=function(s,u,w){return s=+s,u=u>>>0,w||K(this,s,u,4,2147483647,-2147483648),this[u]=s&255,this[u+1]=s>>>8,this[u+2]=s>>>16,this[u+3]=s>>>24,u+4},o.prototype.writeInt32BE=function(s,u,w){return s=+s,u=u>>>0,w||K(this,s,u,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[u]=s>>>24,this[u+1]=s>>>16,this[u+2]=s>>>8,this[u+3]=s&255,u+4},o.prototype.writeBigInt64LE=Ce(function(s,u=0){return me(this,s,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=Ce(function(s,u=0){return Te(this,s,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function be(f,s,u,w,U,z){if(u+w>f.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function ce(f,s,u,w,U){return s=+s,u=u>>>0,U||be(f,s,u,4),n.write(f,s,u,w,23,4),u+4}o.prototype.writeFloatLE=function(s,u,w){return ce(this,s,u,!0,w)},o.prototype.writeFloatBE=function(s,u,w){return ce(this,s,u,!1,w)};function ke(f,s,u,w,U){return s=+s,u=u>>>0,U||be(f,s,u,8),n.write(f,s,u,w,52,8),u+8}o.prototype.writeDoubleLE=function(s,u,w){return ke(this,s,u,!0,w)},o.prototype.writeDoubleBE=function(s,u,w){return ke(this,s,u,!1,w)},o.prototype.copy=function(s,u,w,U){if(!o.isBuffer(s))throw new TypeError("argument should be a Buffer");if(w||(w=0),!U&&U!==0&&(U=this.length),u>=s.length&&(u=s.length),u||(u=0),U>0&&U<w&&(U=w),U===w||s.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(w<0||w>=this.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("sourceEnd out of bounds");U>this.length&&(U=this.length),s.length-u<U-w&&(U=s.length-u+w);const z=U-w;return this===s&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,w,U):Uint8Array.prototype.set.call(s,this.subarray(w,U),u),z},o.prototype.fill=function(s,u,w,U){if(typeof s=="string"){if(typeof u=="string"?(U=u,u=0,w=this.length):typeof w=="string"&&(U=w,w=this.length),U!==void 0&&typeof U!="string")throw new TypeError("encoding must be a string");if(typeof U=="string"&&!o.isEncoding(U))throw new TypeError("Unknown encoding: "+U);if(s.length===1){const Z=s.charCodeAt(0);(U==="utf8"&&Z<128||U==="latin1")&&(s=Z)}}else typeof s=="number"?s=s&255:typeof s=="boolean"&&(s=Number(s));if(u<0||this.length<u||this.length<w)throw new RangeError("Out of range index");if(w<=u)return this;u=u>>>0,w=w===void 0?this.length:w>>>0,s||(s=0);let z;if(typeof s=="number")for(z=u;z<w;++z)this[z]=s;else{const Z=o.isBuffer(s)?s:o.from(s,U),Ae=Z.length;if(Ae===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(z=0;z<w-u;++z)this[z+u]=Z[z%Ae]}return this};const Fe={};function le(f,s,u){Fe[f]=class extends u{constructor(){super(),Object.defineProperty(this,"message",{value:s.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${f}]`,this.stack,delete this.name}get code(){return f}set code(U){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:U,writable:!0})}toString(){return`${this.name} [${f}]: ${this.message}`}}}le("ERR_BUFFER_OUT_OF_BOUNDS",function(f){return f?`${f} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),le("ERR_INVALID_ARG_TYPE",function(f,s){return`The "${f}" argument must be of type number. Received type ${typeof s}`},TypeError),le("ERR_OUT_OF_RANGE",function(f,s,u){let w=`The value of "${f}" is out of range.`,U=u;return Number.isInteger(u)&&Math.abs(u)>2**32?U=Ge(String(u)):typeof u=="bigint"&&(U=String(u),(u>BigInt(2)**BigInt(32)||u<-(BigInt(2)**BigInt(32)))&&(U=Ge(U)),U+="n"),w+=` It must be ${s}. Received ${U}`,w},RangeError);function Ge(f){let s="",u=f.length;const w=f[0]==="-"?1:0;for(;u>=w+4;u-=3)s=`_${f.slice(u-3,u)}${s}`;return`${f.slice(0,u)}${s}`}function Ye(f,s,u){Ue(s,"offset"),(f[s]===void 0||f[s+u]===void 0)&&ze(s,f.length-(u+1))}function st(f,s,u,w,U,z){if(f>u||f<s){const Z=typeof s=="bigint"?"n":"";let Ae;throw z>3?s===0||s===BigInt(0)?Ae=`>= 0${Z} and < 2${Z} ** ${(z+1)*8}${Z}`:Ae=`>= -(2${Z} ** ${(z+1)*8-1}${Z}) and < 2 ** ${(z+1)*8-1}${Z}`:Ae=`>= ${s}${Z} and <= ${u}${Z}`,new Fe.ERR_OUT_OF_RANGE("value",Ae,f)}Ye(w,U,z)}function Ue(f,s){if(typeof f!="number")throw new Fe.ERR_INVALID_ARG_TYPE(s,"number",f)}function ze(f,s,u){throw Math.floor(f)!==f?(Ue(f,u),new Fe.ERR_OUT_OF_RANGE(u||"offset","an integer",f)):s<0?new Fe.ERR_BUFFER_OUT_OF_BOUNDS:new Fe.ERR_OUT_OF_RANGE(u||"offset",`>= ${u?1:0} and <= ${s}`,f)}const Oe=/[^+/0-9A-Za-z-_]/g;function y(f){if(f=f.split("=")[0],f=f.trim().replace(Oe,""),f.length<2)return"";for(;f.length%4!==0;)f=f+"=";return f}function c(f,s){s=s||1/0;let u;const w=f.length;let U=null;const z=[];for(let Z=0;Z<w;++Z){if(u=f.charCodeAt(Z),u>55295&&u<57344){if(!U){if(u>56319){(s-=3)>-1&&z.push(239,191,189);continue}else if(Z+1===w){(s-=3)>-1&&z.push(239,191,189);continue}U=u;continue}if(u<56320){(s-=3)>-1&&z.push(239,191,189),U=u;continue}u=(U-55296<<10|u-56320)+65536}else U&&(s-=3)>-1&&z.push(239,191,189);if(U=null,u<128){if((s-=1)<0)break;z.push(u)}else if(u<2048){if((s-=2)<0)break;z.push(u>>6|192,u&63|128)}else if(u<65536){if((s-=3)<0)break;z.push(u>>12|224,u>>6&63|128,u&63|128)}else if(u<1114112){if((s-=4)<0)break;z.push(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}else throw new Error("Invalid code point")}return z}function d(f){const s=[];for(let u=0;u<f.length;++u)s.push(f.charCodeAt(u)&255);return s}function D(f,s){let u,w,U;const z=[];for(let Z=0;Z<f.length&&!((s-=2)<0);++Z)u=f.charCodeAt(Z),w=u>>8,U=u%256,z.push(U),z.push(w);return z}function N(f){return t.toByteArray(y(f))}function Y(f,s,u,w){let U;for(U=0;U<w&&!(U+u>=s.length||U>=f.length);++U)s[U+u]=f[U];return U}function R(f,s){return f instanceof s||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===s.name}function ie(f){return f!==f}const he=function(){const f="0123456789abcdef",s=new Array(256);for(let u=0;u<16;++u){const w=u*16;for(let U=0;U<16;++U)s[w+U]=f[u]+f[U]}return s}();function Ce(f){return typeof BigInt>"u"?Be:f}function Be(){throw new Error("BigInt not supported")}})(rt);var Vd=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t}(),oa=function(e){for(var t=-1,n=0;n<e.length;n++)t=t>>>8^Vd[(t^e[n])&255];return(t^-1)>>>0},zd=function(e){return rt.Buffer.from(tl(e))},jd=function(e,t){return e.match(new RegExp(".{1,"+t+"}","g"))||[e]},aa=function(e,t){return[e.slice(0,-t),e.slice(-t)]},sa=function(e){return oa(e)},la=function(e){return oa(e).toString(16).padStart(8,"0")},mr=function(e){return e>>>0},mo=function(e){var t=new ArrayBuffer(4),n=new DataView(t);return n.setUint32(0,e,!1),rt.Buffer.from(t)},Di=function(e){return e.split("").every(function(t,n){var i=e.charCodeAt(n);return"a".charCodeAt(0)<=i&&i<="z".charCodeAt(0)||"0".charCodeAt(0)<=i&&i<="9".charCodeAt(0)||i==="-".charCodeAt(0)})},go=function(e,t){return e.length!==t.length?!1:e.every(function(n){return t.includes(n)})},Wd=function(e,t){return t.every(function(n){return e.includes(n)})},Hd=function(e,t){return e.filter(function(n){return t.indexOf(n)<0})},ua=function(e,t){for(var n=Math.max(e.length,t.length),i=rt.Buffer.allocUnsafe(n),r=0;r<n;++r)i[r]=e[r]^t[r];return i};const Kd=["string","number","bigint","symbol"],Qd=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Xd(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";const t=typeof e;if(Kd.includes(t))return t;if(t==="function")return"Function";if(Array.isArray(e))return"Array";if(Gd(e))return"Buffer";const n=Yd(e);return n||"Object"}function Gd(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function Yd(e){const t=Object.prototype.toString.call(e).slice(8,-1);if(Qd.includes(t))return t}class ee{constructor(t,n,i){this.major=t,this.majorEncoded=t<<5,this.name=n,this.terminal=i}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}}ee.uint=new ee(0,"uint",!0);ee.negint=new ee(1,"negint",!0);ee.bytes=new ee(2,"bytes",!0);ee.string=new ee(3,"string",!0);ee.array=new ee(4,"array",!1);ee.map=new ee(5,"map",!1);ee.tag=new ee(6,"tag",!1);ee.float=new ee(7,"float",!0);ee.false=new ee(7,"false",!0);ee.true=new ee(7,"true",!0);ee.null=new ee(7,"null",!0);ee.undefined=new ee(7,"undefined",!0);ee.break=new ee(7,"break",!0);class Pe{constructor(t,n,i){this.type=t,this.value=n,this.encodedLength=i,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const Fn=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",Zd=new TextDecoder,Jd=new TextEncoder;function Ti(e){return Fn&&globalThis.Buffer.isBuffer(e)}function ca(e){return e instanceof Uint8Array?Ti(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}const ef=Fn?(e,t,n)=>n-t>64?globalThis.Buffer.from(e.subarray(t,n)).toString("utf8"):vo(e,t,n):(e,t,n)=>n-t>64?Zd.decode(e.subarray(t,n)):vo(e,t,n),tf=Fn?e=>e.length>64?globalThis.Buffer.from(e):po(e):e=>e.length>64?Jd.encode(e):po(e),Jt=e=>Uint8Array.from(e),Sr=Fn?(e,t,n)=>Ti(e)?new Uint8Array(e.subarray(t,n)):e.slice(t,n):(e,t,n)=>e.slice(t,n),nf=Fn?(e,t)=>(e=e.map(n=>n instanceof Uint8Array?n:globalThis.Buffer.from(n)),ca(globalThis.Buffer.concat(e,t))):(e,t)=>{const n=new Uint8Array(t);let i=0;for(let r of e)i+r.length>n.length&&(r=r.subarray(0,n.length-i)),n.set(r,i),i+=r.length;return n},rf=Fn?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function of(e,t){if(Ti(e)&&Ti(t))return e.compare(t);for(let n=0;n<e.length;n++)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return 0}function po(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t}function vo(e,t,n){const i=[];for(;t<n;){const r=e[t];let a=null,l=r>239?4:r>223?3:r>191?2:1;if(t+l<=n){let o,h,k,b;switch(l){case 1:r<128&&(a=r);break;case 2:o=e[t+1],(o&192)===128&&(b=(r&31)<<6|o&63,b>127&&(a=b));break;case 3:o=e[t+1],h=e[t+2],(o&192)===128&&(h&192)===128&&(b=(r&15)<<12|(o&63)<<6|h&63,b>2047&&(b<55296||b>57343)&&(a=b));break;case 4:o=e[t+1],h=e[t+2],k=e[t+3],(o&192)===128&&(h&192)===128&&(k&192)===128&&(b=(r&15)<<18|(o&63)<<12|(h&63)<<6|k&63,b>65535&&b<1114112&&(a=b))}}a===null?(a=65533,l=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|a&1023),i.push(a),t+=l}return af(i)}const yo=4096;function af(e){const t=e.length;if(t<=yo)return String.fromCharCode.apply(String,e);let n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=yo));return n}const sf=256;class da{constructor(t=sf){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let n=this.chunks[this.chunks.length-1];if(this.cursor+t.length<=this.maxCursor+1){const r=n.length-(this.maxCursor-this.cursor)-1;n.set(t,r)}else{if(n){const r=n.length-(this.maxCursor-this.cursor)-1;r<n.length&&(this.chunks[this.chunks.length-1]=n.subarray(0,r),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(n=rf(this.chunkSize),this.chunks.push(n),this.maxCursor+=n.length,this._initReuseChunk===null&&(this._initReuseChunk=n),n.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let n;if(this.chunks.length===1){const i=this.chunks[0];t&&this.cursor>i.length/2?(n=this.cursor===i.length?i:i.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):n=Sr(i,0,this.cursor)}else n=nf(this.chunks,this.cursor);return t&&this.reset(),n}}const je="CBOR decode error:",fa="CBOR encode error:";function Ln(e,t,n){if(e.length-t<n)throw new Error(`${je} not enough data for type`)}const wt=[24,256,65536,4294967296,BigInt("18446744073709551616")];function kn(e,t,n){Ln(e,t,1);const i=e[t];if(n.strict===!0&&i<wt[0])throw new Error(`${je} integer encoded in more bytes than necessary (strict decode)`);return i}function _n(e,t,n){Ln(e,t,2);const i=e[t]<<8|e[t+1];if(n.strict===!0&&i<wt[1])throw new Error(`${je} integer encoded in more bytes than necessary (strict decode)`);return i}function Dn(e,t,n){Ln(e,t,4);const i=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(n.strict===!0&&i<wt[2])throw new Error(`${je} integer encoded in more bytes than necessary (strict decode)`);return i}function Cn(e,t,n){Ln(e,t,8);const i=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],r=e[t+4]*16777216+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],a=(BigInt(i)<<BigInt(32))+BigInt(r);if(n.strict===!0&&a<wt[3])throw new Error(`${je} integer encoded in more bytes than necessary (strict decode)`);if(a<=Number.MAX_SAFE_INTEGER)return Number(a);if(n.allowBigInt===!0)return a;throw new Error(`${je} integers outside of the safe integer range are not supported`)}function lf(e,t,n,i){return new Pe(ee.uint,kn(e,t+1,i),2)}function uf(e,t,n,i){return new Pe(ee.uint,_n(e,t+1,i),3)}function cf(e,t,n,i){return new Pe(ee.uint,Dn(e,t+1,i),5)}function df(e,t,n,i){return new Pe(ee.uint,Cn(e,t+1,i),9)}function xn(e,t){return Rt(e,0,t.value)}function Rt(e,t,n){if(n<wt[0]){const i=Number(n);e.push([t|i])}else if(n<wt[1]){const i=Number(n);e.push([t|24,i])}else if(n<wt[2]){const i=Number(n);e.push([t|25,i>>>8,i&255])}else if(n<wt[3]){const i=Number(n);e.push([t|26,i>>>24&255,i>>>16&255,i>>>8&255,i&255])}else{const i=BigInt(n);if(i<wt[4]){const r=[t|27,0,0,0,0,0,0,0];let a=Number(i&BigInt(4294967295)),l=Number(i>>BigInt(32)&BigInt(4294967295));r[8]=a&255,a=a>>8,r[7]=a&255,a=a>>8,r[6]=a&255,a=a>>8,r[5]=a&255,r[4]=l&255,l=l>>8,r[3]=l&255,l=l>>8,r[2]=l&255,l=l>>8,r[1]=l&255,e.push(r)}else throw new Error(`${je} encountered BigInt larger than allowable range`)}}xn.encodedSize=function(t){return Rt.encodedSize(t.value)};Rt.encodedSize=function(t){return t<wt[0]?1:t<wt[1]?2:t<wt[2]?3:t<wt[3]?5:9};xn.compareTokens=function(t,n){return t.value<n.value?-1:t.value>n.value?1:0};function ff(e,t,n,i){return new Pe(ee.negint,-1-kn(e,t+1,i),2)}function hf(e,t,n,i){return new Pe(ee.negint,-1-_n(e,t+1,i),3)}function mf(e,t,n,i){return new Pe(ee.negint,-1-Dn(e,t+1,i),5)}const Tr=BigInt(-1),ha=BigInt(1);function gf(e,t,n,i){const r=Cn(e,t+1,i);if(typeof r!="bigint"){const a=-1-r;if(a>=Number.MIN_SAFE_INTEGER)return new Pe(ee.negint,a,9)}if(i.allowBigInt!==!0)throw new Error(`${je} integers outside of the safe integer range are not supported`);return new Pe(ee.negint,Tr-BigInt(r),9)}function Er(e,t){const n=t.value,i=typeof n=="bigint"?n*Tr-ha:n*-1-1;Rt(e,t.type.majorEncoded,i)}Er.encodedSize=function(t){const n=t.value,i=typeof n=="bigint"?n*Tr-ha:n*-1-1;return i<wt[0]?1:i<wt[1]?2:i<wt[2]?3:i<wt[3]?5:9};Er.compareTokens=function(t,n){return t.value<n.value?1:t.value>n.value?-1:0};function ri(e,t,n,i){Ln(e,t,n+i);const r=Sr(e,t+n,t+n+i);return new Pe(ee.bytes,r,n+i)}function pf(e,t,n,i){return ri(e,t,1,n)}function vf(e,t,n,i){return ri(e,t,2,kn(e,t+1,i))}function yf(e,t,n,i){return ri(e,t,3,_n(e,t+1,i))}function wf(e,t,n,i){return ri(e,t,5,Dn(e,t+1,i))}function bf(e,t,n,i){const r=Cn(e,t+1,i);if(typeof r=="bigint")throw new Error(`${je} 64-bit integer bytes lengths not supported`);return ri(e,t,9,r)}function Ei(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===ee.string?tf(e.value):e.value),e.encodedBytes}function Li(e,t){const n=Ei(t);Rt(e,t.type.majorEncoded,n.length),e.push(n)}Li.encodedSize=function(t){const n=Ei(t);return Rt.encodedSize(n.length)+n.length};Li.compareTokens=function(t,n){return kf(Ei(t),Ei(n))};function kf(e,t){return e.length<t.length?-1:e.length>t.length?1:of(e,t)}function oi(e,t,n,i,r){const a=n+i;Ln(e,t,a);const l=new Pe(ee.string,ef(e,t+n,t+a),a);return r.retainStringBytes===!0&&(l.byteValue=Sr(e,t+n,t+a)),l}function _f(e,t,n,i){return oi(e,t,1,n,i)}function Df(e,t,n,i){return oi(e,t,2,kn(e,t+1,i),i)}function Cf(e,t,n,i){return oi(e,t,3,_n(e,t+1,i),i)}function xf(e,t,n,i){return oi(e,t,5,Dn(e,t+1,i),i)}function Sf(e,t,n,i){const r=Cn(e,t+1,i);if(typeof r=="bigint")throw new Error(`${je} 64-bit integer string lengths not supported`);return oi(e,t,9,r,i)}const Tf=Li;function Nn(e,t,n,i){return new Pe(ee.array,i,n)}function Ef(e,t,n,i){return Nn(e,t,1,n)}function qf(e,t,n,i){return Nn(e,t,2,kn(e,t+1,i))}function Pf(e,t,n,i){return Nn(e,t,3,_n(e,t+1,i))}function Mf(e,t,n,i){return Nn(e,t,5,Dn(e,t+1,i))}function If(e,t,n,i){const r=Cn(e,t+1,i);if(typeof r=="bigint")throw new Error(`${je} 64-bit integer array lengths not supported`);return Nn(e,t,9,r)}function Af(e,t,n,i){if(i.allowIndefinite===!1)throw new Error(`${je} indefinite length items not allowed`);return Nn(e,t,1,1/0)}function qr(e,t){Rt(e,ee.array.majorEncoded,t.value)}qr.compareTokens=xn.compareTokens;qr.encodedSize=function(t){return Rt.encodedSize(t.value)};function On(e,t,n,i){return new Pe(ee.map,i,n)}function Uf(e,t,n,i){return On(e,t,1,n)}function Bf(e,t,n,i){return On(e,t,2,kn(e,t+1,i))}function $f(e,t,n,i){return On(e,t,3,_n(e,t+1,i))}function Rf(e,t,n,i){return On(e,t,5,Dn(e,t+1,i))}function Ff(e,t,n,i){const r=Cn(e,t+1,i);if(typeof r=="bigint")throw new Error(`${je} 64-bit integer map lengths not supported`);return On(e,t,9,r)}function Lf(e,t,n,i){if(i.allowIndefinite===!1)throw new Error(`${je} indefinite length items not allowed`);return On(e,t,1,1/0)}function Pr(e,t){Rt(e,ee.map.majorEncoded,t.value)}Pr.compareTokens=xn.compareTokens;Pr.encodedSize=function(t){return Rt.encodedSize(t.value)};function Nf(e,t,n,i){return new Pe(ee.tag,n,1)}function Of(e,t,n,i){return new Pe(ee.tag,kn(e,t+1,i),2)}function Vf(e,t,n,i){return new Pe(ee.tag,_n(e,t+1,i),3)}function zf(e,t,n,i){return new Pe(ee.tag,Dn(e,t+1,i),5)}function jf(e,t,n,i){return new Pe(ee.tag,Cn(e,t+1,i),9)}function Mr(e,t){Rt(e,ee.tag.majorEncoded,t.value)}Mr.compareTokens=xn.compareTokens;Mr.encodedSize=function(t){return Rt.encodedSize(t.value)};const Wf=20,Hf=21,Kf=22,Qf=23;function Xf(e,t,n,i){if(i.allowUndefined===!1)throw new Error(`${je} undefined values are not supported`);return i.coerceUndefinedToNull===!0?new Pe(ee.null,null,1):new Pe(ee.undefined,void 0,1)}function Gf(e,t,n,i){if(i.allowIndefinite===!1)throw new Error(`${je} indefinite length items not allowed`);return new Pe(ee.break,void 0,1)}function Ir(e,t,n){if(n){if(n.allowNaN===!1&&Number.isNaN(e))throw new Error(`${je} NaN values are not supported`);if(n.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${je} Infinity values are not supported`)}return new Pe(ee.float,e,t)}function Yf(e,t,n,i){return Ir(Ur(e,t+1),3,i)}function Zf(e,t,n,i){return Ir(Br(e,t+1),5,i)}function Jf(e,t,n,i){return Ir(va(e,t+1),9,i)}function Ar(e,t,n){const i=t.value;if(i===!1)e.push([ee.float.majorEncoded|Wf]);else if(i===!0)e.push([ee.float.majorEncoded|Hf]);else if(i===null)e.push([ee.float.majorEncoded|Kf]);else if(i===void 0)e.push([ee.float.majorEncoded|Qf]);else{let r,a=!1;(!n||n.float64!==!0)&&(ga(i),r=Ur(Lt,1),i===r||Number.isNaN(i)?(Lt[0]=249,e.push(Lt.slice(0,3)),a=!0):(pa(i),r=Br(Lt,1),i===r&&(Lt[0]=250,e.push(Lt.slice(0,5)),a=!0))),a||(eh(i),r=va(Lt,1),Lt[0]=251,e.push(Lt.slice(0,9)))}}Ar.encodedSize=function(t,n){const i=t.value;if(i===!1||i===!0||i===null||i===void 0)return 1;if(!n||n.float64!==!0){ga(i);let r=Ur(Lt,1);if(i===r||Number.isNaN(i))return 3;if(pa(i),r=Br(Lt,1),i===r)return 5}return 9};const ma=new ArrayBuffer(9),Ut=new DataView(ma,1),Lt=new Uint8Array(ma,0);function ga(e){if(e===1/0)Ut.setUint16(0,31744,!1);else if(e===-1/0)Ut.setUint16(0,64512,!1);else if(Number.isNaN(e))Ut.setUint16(0,32256,!1);else{Ut.setFloat32(0,e);const t=Ut.getUint32(0),n=(t&2139095040)>>23,i=t&8388607;if(n===255)Ut.setUint16(0,31744,!1);else if(n===0)Ut.setUint16(0,(e&2147483648)>>16|i>>13,!1);else{const r=n-127;r<-24?Ut.setUint16(0,0):r<-14?Ut.setUint16(0,(t&2147483648)>>16|1<<24+r,!1):Ut.setUint16(0,(t&2147483648)>>16|r+15<<10|i>>13,!1)}}}function Ur(e,t){if(e.length-t<2)throw new Error(`${je} not enough data for float16`);const n=(e[t]<<8)+e[t+1];if(n===31744)return 1/0;if(n===64512)return-1/0;if(n===32256)return NaN;const i=n>>10&31,r=n&1023;let a;return i===0?a=r*2**-24:i!==31?a=(r+1024)*2**(i-25):a=r===0?1/0:NaN,n&32768?-a:a}function pa(e){Ut.setFloat32(0,e,!1)}function Br(e,t){if(e.length-t<4)throw new Error(`${je} not enough data for float32`);const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,4).getFloat32(0,!1)}function eh(e){Ut.setFloat64(0,e,!1)}function va(e,t){if(e.length-t<8)throw new Error(`${je} not enough data for float64`);const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,8).getFloat64(0,!1)}Ar.compareTokens=xn.compareTokens;function Qe(e,t,n){throw new Error(`${je} encountered invalid minor (${n}) for major ${e[t]>>>5}`)}function Ni(e){return()=>{throw new Error(`${je} ${e}`)}}const de=[];for(let e=0;e<=23;e++)de[e]=Qe;de[24]=lf;de[25]=uf;de[26]=cf;de[27]=df;de[28]=Qe;de[29]=Qe;de[30]=Qe;de[31]=Qe;for(let e=32;e<=55;e++)de[e]=Qe;de[56]=ff;de[57]=hf;de[58]=mf;de[59]=gf;de[60]=Qe;de[61]=Qe;de[62]=Qe;de[63]=Qe;for(let e=64;e<=87;e++)de[e]=pf;de[88]=vf;de[89]=yf;de[90]=wf;de[91]=bf;de[92]=Qe;de[93]=Qe;de[94]=Qe;de[95]=Ni("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)de[e]=_f;de[120]=Df;de[121]=Cf;de[122]=xf;de[123]=Sf;de[124]=Qe;de[125]=Qe;de[126]=Qe;de[127]=Ni("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)de[e]=Ef;de[152]=qf;de[153]=Pf;de[154]=Mf;de[155]=If;de[156]=Qe;de[157]=Qe;de[158]=Qe;de[159]=Af;for(let e=160;e<=183;e++)de[e]=Uf;de[184]=Bf;de[185]=$f;de[186]=Rf;de[187]=Ff;de[188]=Qe;de[189]=Qe;de[190]=Qe;de[191]=Lf;for(let e=192;e<=215;e++)de[e]=Nf;de[216]=Of;de[217]=Vf;de[218]=zf;de[219]=jf;de[220]=Qe;de[221]=Qe;de[222]=Qe;de[223]=Qe;for(let e=224;e<=243;e++)de[e]=Ni("simple values are not supported");de[244]=Qe;de[245]=Qe;de[246]=Qe;de[247]=Xf;de[248]=Ni("simple values are not supported");de[249]=Yf;de[250]=Zf;de[251]=Jf;de[252]=Qe;de[253]=Qe;de[254]=Qe;de[255]=Gf;const Zt=[];for(let e=0;e<24;e++)Zt[e]=new Pe(ee.uint,e,1);for(let e=-1;e>=-24;e--)Zt[31-e]=new Pe(ee.negint,e,1);Zt[64]=new Pe(ee.bytes,new Uint8Array(0),1);Zt[96]=new Pe(ee.string,"",1);Zt[128]=new Pe(ee.array,0,1);Zt[160]=new Pe(ee.map,0,1);Zt[244]=new Pe(ee.false,!1,1);Zt[245]=new Pe(ee.true,!0,1);Zt[246]=new Pe(ee.null,null,1);function th(e){switch(e.type){case ee.false:return Jt([244]);case ee.true:return Jt([245]);case ee.null:return Jt([246]);case ee.bytes:return e.value.length?void 0:Jt([64]);case ee.string:return e.value===""?Jt([96]):void 0;case ee.array:return e.value===0?Jt([128]):void 0;case ee.map:return e.value===0?Jt([160]):void 0;case ee.uint:return e.value<24?Jt([Number(e.value)]):void 0;case ee.negint:if(e.value>=-24)return Jt([31-Number(e.value)])}}const nh={float64:!1,mapSorter:oh,quickEncodeToken:th};function ih(){const e=[];return e[ee.uint.major]=xn,e[ee.negint.major]=Er,e[ee.bytes.major]=Li,e[ee.string.major]=Tf,e[ee.array.major]=qr,e[ee.map.major]=Pr,e[ee.tag.major]=Mr,e[ee.float.major]=Ar,e}const ya=ih(),tr=new da;class qi{constructor(t,n){this.obj=t,this.parent=n}includes(t){let n=this;do if(n.obj===t)return!0;while(n=n.parent);return!1}static createCheck(t,n){if(t&&t.includes(n))throw new Error(`${fa} object contains circular references`);return new qi(n,t)}}const sn={null:new Pe(ee.null,null),undefined:new Pe(ee.undefined,void 0),true:new Pe(ee.true,!0),false:new Pe(ee.false,!1),emptyArray:new Pe(ee.array,0),emptyMap:new Pe(ee.map,0)},hn={number(e,t,n,i){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new Pe(ee.float,e):e>=0?new Pe(ee.uint,e):new Pe(ee.negint,e)},bigint(e,t,n,i){return e>=BigInt(0)?new Pe(ee.uint,e):new Pe(ee.negint,e)},Uint8Array(e,t,n,i){return new Pe(ee.bytes,e)},string(e,t,n,i){return new Pe(ee.string,e)},boolean(e,t,n,i){return e?sn.true:sn.false},null(e,t,n,i){return sn.null},undefined(e,t,n,i){return sn.undefined},ArrayBuffer(e,t,n,i){return new Pe(ee.bytes,new Uint8Array(e))},DataView(e,t,n,i){return new Pe(ee.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,t,n,i){if(!e.length)return n.addBreakTokens===!0?[sn.emptyArray,new Pe(ee.break)]:sn.emptyArray;i=qi.createCheck(i,e);const r=[];let a=0;for(const l of e)r[a++]=Ci(l,n,i);return n.addBreakTokens?[new Pe(ee.array,e.length),r,new Pe(ee.break)]:[new Pe(ee.array,e.length),r]},Object(e,t,n,i){const r=t!=="Object",a=r?e.keys():Object.keys(e),l=r?e.size:a.length;if(!l)return n.addBreakTokens===!0?[sn.emptyMap,new Pe(ee.break)]:sn.emptyMap;i=qi.createCheck(i,e);const o=[];let h=0;for(const k of a)o[h++]=[Ci(k,n,i),Ci(r?e.get(k):e[k],n,i)];return rh(o,n),n.addBreakTokens?[new Pe(ee.map,l),o,new Pe(ee.break)]:[new Pe(ee.map,l),o]}};hn.Map=hn.Object;hn.Buffer=hn.Uint8Array;for(const e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))hn[`${e}Array`]=hn.DataView;function Ci(e,t={},n){const i=Xd(e),r=t&&t.typeEncoders&&t.typeEncoders[i]||hn[i];if(typeof r=="function"){const l=r(e,i,t,n);if(l!=null)return l}const a=hn[i];if(!a)throw new Error(`${fa} unsupported type: ${i}`);return a(e,i,t,n)}function rh(e,t){t.mapSorter&&e.sort(t.mapSorter)}function oh(e,t){const n=Array.isArray(e[0])?e[0][0]:e[0],i=Array.isArray(t[0])?t[0][0]:t[0];if(n.type!==i.type)return n.type.compare(i.type);const r=n.type.major,a=ya[r].compareTokens(n,i);return a===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),a}function wa(e,t,n,i){if(Array.isArray(t))for(const r of t)wa(e,r,n,i);else n[t.type.major](e,t,i)}function ah(e,t,n){const i=Ci(e,n);if(!Array.isArray(i)&&n.quickEncodeToken){const r=n.quickEncodeToken(i);if(r)return r;const a=t[i.type.major];if(a.encodedSize){const l=a.encodedSize(i,n),o=new da(l);if(a(o,i,n),o.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${i} was wrong`);return ca(o.chunks[0])}}return tr.reset(),wa(tr,i,t,n),tr.toBytes(!0)}function sh(e,t){return t=Object.assign({},nh,t),ah(e,ya,t)}const lh={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class uh{constructor(t,n={}){this._pos=0,this.data=t,this.options=n}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const t=this.data[this._pos];let n=Zt[t];if(n===void 0){const i=de[t];if(!i)throw new Error(`${je} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);const r=t&31;n=i(this.data,this._pos,r,this.options)}return this._pos+=n.encodedLength,n}}const Zn=Symbol.for("DONE"),Oi=Symbol.for("BREAK");function ch(e,t,n){const i=[];for(let r=0;r<e.value;r++){const a=Jn(t,n);if(a===Oi){if(e.value===1/0)break;throw new Error(`${je} got unexpected break to lengthed array`)}if(a===Zn)throw new Error(`${je} found array but not enough entries (got ${r}, expected ${e.value})`);i[r]=a}return i}function dh(e,t,n){const i=n.useMaps===!0,r=i?void 0:{},a=i?new Map:void 0;for(let l=0;l<e.value;l++){const o=Jn(t,n);if(o===Oi){if(e.value===1/0)break;throw new Error(`${je} got unexpected break to lengthed map`)}if(o===Zn)throw new Error(`${je} found map but not enough entries (got ${l} [no key], expected ${e.value})`);if(i!==!0&&typeof o!="string")throw new Error(`${je} non-string keys not supported (got ${typeof o})`);if(n.rejectDuplicateMapKeys===!0&&(i&&a.has(o)||!i&&o in r))throw new Error(`${je} found repeat map key "${o}"`);const h=Jn(t,n);if(h===Zn)throw new Error(`${je} found map but not enough entries (got ${l} [no value], expected ${e.value})`);i?a.set(o,h):r[o]=h}return i?a:r}function Jn(e,t){if(e.done())return Zn;const n=e.next();if(n.type===ee.break)return Oi;if(n.type.terminal)return n.value;if(n.type===ee.array)return ch(n,e,t);if(n.type===ee.map)return dh(n,e,t);if(n.type===ee.tag){if(t.tags&&typeof t.tags[n.value]=="function"){const i=Jn(e,t);return t.tags[n.value](i)}throw new Error(`${je} tag not supported (${n.value})`)}throw new Error("unsupported")}function fh(e,t){if(!(e instanceof Uint8Array))throw new Error(`${je} data to decode must be a Uint8Array`);t=Object.assign({},lh,t);const n=t.tokenizer||new uh(e,t),i=Jn(n,t);if(i===Zn)throw new Error(`${je} did not find any content to decode`);if(i===Oi)throw new Error(`${je} got unexpected break`);return[i,e.subarray(n.pos())]}function hh(e,t){const[n,i]=fh(e,t);if(i.length>0)throw new Error(`${je} too many terminals, data makes no sense`);return n}var ba=function(e){return rt.Buffer.from(sh(e))},ka=function(e){return hh(rt.Buffer.isBuffer(e)?e:rt.Buffer.from(e,"hex"))},xi=function(){function e(t,n){if(n===void 0&&(n="bytes"),this._cborPayload=t,this._type=n,!Di(this._type))throw new ra}return e.fromBuffer=function(t){return new e(ba(t))},e.from=function(t){return e.fromBuffer(rt.Buffer.from(t))},e.prototype.decodeCBOR=function(){return ka(this._cborPayload)},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cbor",{get:function(){return this._cborPayload},enumerable:!1,configurable:!0}),e.prototype.equals=function(t){return this.type===t.type&&this.cbor.equals(t.cbor)},e}(),mh=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,nr=Math.ceil,It=Math.floor,St="[BigNumber Error] ",wo=St+"Number primitive has more than 15 significant digits: ",Ft=1e14,$e=14,ir=9007199254740991,rr=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],ln=1e7,mt=1e9;function _a(e){var t,n,i,r=H.prototype={constructor:H,toString:null,valueOf:null},a=new H(1),l=20,o=4,h=-7,k=21,b=-1e7,S=1e7,T=!1,I=1,j=0,G={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},X="0123456789abcdefghijklmnopqrstuvwxyz",oe=!0;function H(g,_){var C,O,x,q,B,P,$,V,L=this;if(!(L instanceof H))return new H(g,_);if(_==null){if(g&&g._isBigNumber===!0){L.s=g.s,!g.c||g.e>S?L.c=L.e=null:g.e<b?L.c=[L.e=0]:(L.e=g.e,L.c=g.c.slice());return}if((P=typeof g=="number")&&g*0==0){if(L.s=1/g<0?(g=-g,-1):1,g===~~g){for(q=0,B=g;B>=10;B/=10,q++);q>S?L.c=L.e=null:(L.e=q,L.c=[g]);return}V=String(g)}else{if(!mh.test(V=String(g)))return i(L,V,P);L.s=V.charCodeAt(0)==45?(V=V.slice(1),-1):1}(q=V.indexOf("."))>-1&&(V=V.replace(".","")),(B=V.search(/e/i))>0?(q<0&&(q=B),q+=+V.slice(B+1),V=V.substring(0,B)):q<0&&(q=V.length)}else{if(at(_,2,X.length,"Base"),_==10&&oe)return L=new H(g),we(L,l+L.e+1,o);if(V=String(g),P=typeof g=="number"){if(g*0!=0)return i(L,V,P,_);if(L.s=1/g<0?(V=V.slice(1),-1):1,H.DEBUG&&V.replace(/^0\.0*|\./,"").length>15)throw Error(wo+g)}else L.s=V.charCodeAt(0)===45?(V=V.slice(1),-1):1;for(C=X.slice(0,_),q=B=0,$=V.length;B<$;B++)if(C.indexOf(O=V.charAt(B))<0){if(O=="."){if(B>q){q=$;continue}}else if(!x&&(V==V.toUpperCase()&&(V=V.toLowerCase())||V==V.toLowerCase()&&(V=V.toUpperCase()))){x=!0,B=-1,q=0;continue}return i(L,String(g),P,_)}P=!1,V=n(V,_,10,L.s),(q=V.indexOf("."))>-1?V=V.replace(".",""):q=V.length}for(B=0;V.charCodeAt(B)===48;B++);for($=V.length;V.charCodeAt(--$)===48;);if(V=V.slice(B,++$)){if($-=B,P&&H.DEBUG&&$>15&&(g>ir||g!==It(g)))throw Error(wo+L.s*g);if((q=q-B-1)>S)L.c=L.e=null;else if(q<b)L.c=[L.e=0];else{if(L.e=q,L.c=[],B=(q+1)%$e,q<0&&(B+=$e),B<$){for(B&&L.c.push(+V.slice(0,B)),$-=$e;B<$;)L.c.push(+V.slice(B,B+=$e));B=$e-(V=V.slice(B)).length}else B-=$;for(;B--;V+="0");L.c.push(+V)}}else L.c=[L.e=0]}H.clone=_a,H.ROUND_UP=0,H.ROUND_DOWN=1,H.ROUND_CEIL=2,H.ROUND_FLOOR=3,H.ROUND_HALF_UP=4,H.ROUND_HALF_DOWN=5,H.ROUND_HALF_EVEN=6,H.ROUND_HALF_CEIL=7,H.ROUND_HALF_FLOOR=8,H.EUCLID=9,H.config=H.set=function(g){var _,C;if(g!=null)if(typeof g=="object"){if(g.hasOwnProperty(_="DECIMAL_PLACES")&&(C=g[_],at(C,0,mt,_),l=C),g.hasOwnProperty(_="ROUNDING_MODE")&&(C=g[_],at(C,0,8,_),o=C),g.hasOwnProperty(_="EXPONENTIAL_AT")&&(C=g[_],C&&C.pop?(at(C[0],-mt,0,_),at(C[1],0,mt,_),h=C[0],k=C[1]):(at(C,-mt,mt,_),h=-(k=C<0?-C:C))),g.hasOwnProperty(_="RANGE"))if(C=g[_],C&&C.pop)at(C[0],-mt,-1,_),at(C[1],1,mt,_),b=C[0],S=C[1];else if(at(C,-mt,mt,_),C)b=-(S=C<0?-C:C);else throw Error(St+_+" cannot be zero: "+C);if(g.hasOwnProperty(_="CRYPTO"))if(C=g[_],C===!!C)if(C)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))T=C;else throw T=!C,Error(St+"crypto unavailable");else T=C;else throw Error(St+_+" not true or false: "+C);if(g.hasOwnProperty(_="MODULO_MODE")&&(C=g[_],at(C,0,9,_),I=C),g.hasOwnProperty(_="POW_PRECISION")&&(C=g[_],at(C,0,mt,_),j=C),g.hasOwnProperty(_="FORMAT"))if(C=g[_],typeof C=="object")G=C;else throw Error(St+_+" not an object: "+C);if(g.hasOwnProperty(_="ALPHABET"))if(C=g[_],typeof C=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(C))oe=C.slice(0,10)=="0123456789",X=C;else throw Error(St+_+" invalid: "+C)}else throw Error(St+"Object expected: "+g);return{DECIMAL_PLACES:l,ROUNDING_MODE:o,EXPONENTIAL_AT:[h,k],RANGE:[b,S],CRYPTO:T,MODULO_MODE:I,POW_PRECISION:j,FORMAT:G,ALPHABET:X}},H.isBigNumber=function(g){if(!g||g._isBigNumber!==!0)return!1;if(!H.DEBUG)return!0;var _,C,O=g.c,x=g.e,q=g.s;e:if({}.toString.call(O)=="[object Array]"){if((q===1||q===-1)&&x>=-mt&&x<=mt&&x===It(x)){if(O[0]===0){if(x===0&&O.length===1)return!0;break e}if(_=(x+1)%$e,_<1&&(_+=$e),String(O[0]).length==_){for(_=0;_<O.length;_++)if(C=O[_],C<0||C>=Ft||C!==It(C))break e;if(C!==0)return!0}}}else if(O===null&&x===null&&(q===null||q===1||q===-1))return!0;throw Error(St+"Invalid BigNumber: "+g)},H.maximum=H.max=function(){return ue(arguments,-1)},H.minimum=H.min=function(){return ue(arguments,1)},H.random=function(){var g=9007199254740992,_=Math.random()*g&2097151?function(){return It(Math.random()*g)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(C){var O,x,q,B,P,$=0,V=[],L=new H(a);if(C==null?C=l:at(C,0,mt),B=nr(C/$e),T)if(crypto.getRandomValues){for(O=crypto.getRandomValues(new Uint32Array(B*=2));$<B;)P=O[$]*131072+(O[$+1]>>>11),P>=9e15?(x=crypto.getRandomValues(new Uint32Array(2)),O[$]=x[0],O[$+1]=x[1]):(V.push(P%1e14),$+=2);$=B/2}else if(crypto.randomBytes){for(O=crypto.randomBytes(B*=7);$<B;)P=(O[$]&31)*281474976710656+O[$+1]*1099511627776+O[$+2]*4294967296+O[$+3]*16777216+(O[$+4]<<16)+(O[$+5]<<8)+O[$+6],P>=9e15?crypto.randomBytes(7).copy(O,$):(V.push(P%1e14),$+=7);$=B/7}else throw T=!1,Error(St+"crypto unavailable");if(!T)for(;$<B;)P=_(),P<9e15&&(V[$++]=P%1e14);for(B=V[--$],C%=$e,B&&C&&(P=rr[$e-C],V[$]=It(B/P)*P);V[$]===0;V.pop(),$--);if($<0)V=[q=0];else{for(q=-1;V[0]===0;V.splice(0,1),q-=$e);for($=1,P=V[0];P>=10;P/=10,$++);$<$e&&(q-=$e-$)}return L.e=q,L.c=V,L}}(),H.sum=function(){for(var g=1,_=arguments,C=new H(_[0]);g<_.length;)C=C.plus(_[g++]);return C},n=function(){var g="0123456789";function _(C,O,x,q){for(var B,P=[0],$,V=0,L=C.length;V<L;){for($=P.length;$--;P[$]*=O);for(P[0]+=q.indexOf(C.charAt(V++)),B=0;B<P.length;B++)P[B]>x-1&&(P[B+1]==null&&(P[B+1]=0),P[B+1]+=P[B]/x|0,P[B]%=x)}return P.reverse()}return function(C,O,x,q,B){var P,$,V,L,Q,ge,M,K,me=C.indexOf("."),Te=l,be=o;for(me>=0&&(L=j,j=0,C=C.replace(".",""),K=new H(O),ge=K.pow(C.length-me),j=L,K.c=_(en(Mt(ge.c),ge.e,"0"),10,x,g),K.e=K.c.length),M=_(C,O,x,B?(P=X,g):(P=g,X)),V=L=M.length;M[--L]==0;M.pop());if(!M[0])return P.charAt(0);if(me<0?--V:(ge.c=M,ge.e=V,ge.s=q,ge=t(ge,K,Te,be,x),M=ge.c,Q=ge.r,V=ge.e),$=V+Te+1,me=M[$],L=x/2,Q=Q||$<0||M[$+1]!=null,Q=be<4?(me!=null||Q)&&(be==0||be==(ge.s<0?3:2)):me>L||me==L&&(be==4||Q||be==6&&M[$-1]&1||be==(ge.s<0?8:7)),$<1||!M[0])C=Q?en(P.charAt(1),-Te,P.charAt(0)):P.charAt(0);else{if(M.length=$,Q)for(--x;++M[--$]>x;)M[$]=0,$||(++V,M=[1].concat(M));for(L=M.length;!M[--L];);for(me=0,C="";me<=L;C+=P.charAt(M[me++]));C=en(C,V,P.charAt(0))}return C}}(),t=function(){function g(O,x,q){var B,P,$,V,L=0,Q=O.length,ge=x%ln,M=x/ln|0;for(O=O.slice();Q--;)$=O[Q]%ln,V=O[Q]/ln|0,B=M*$+V*ge,P=ge*$+B%ln*ln+L,L=(P/q|0)+(B/ln|0)+M*V,O[Q]=P%q;return L&&(O=[L].concat(O)),O}function _(O,x,q,B){var P,$;if(q!=B)$=q>B?1:-1;else for(P=$=0;P<q;P++)if(O[P]!=x[P]){$=O[P]>x[P]?1:-1;break}return $}function C(O,x,q,B){for(var P=0;q--;)O[q]-=P,P=O[q]<x[q]?1:0,O[q]=P*B+O[q]-x[q];for(;!O[0]&&O.length>1;O.splice(0,1));}return function(O,x,q,B,P){var $,V,L,Q,ge,M,K,me,Te,be,ce,ke,Fe,le,Ge,Ye,st,Ue=O.s==x.s?1:-1,ze=O.c,Oe=x.c;if(!ze||!ze[0]||!Oe||!Oe[0])return new H(!O.s||!x.s||(ze?Oe&&ze[0]==Oe[0]:!Oe)?NaN:ze&&ze[0]==0||!Oe?Ue*0:Ue/0);for(me=new H(Ue),Te=me.c=[],V=O.e-x.e,Ue=q+V+1,P||(P=Ft,V=At(O.e/$e)-At(x.e/$e),Ue=Ue/$e|0),L=0;Oe[L]==(ze[L]||0);L++);if(Oe[L]>(ze[L]||0)&&V--,Ue<0)Te.push(1),Q=!0;else{for(le=ze.length,Ye=Oe.length,L=0,Ue+=2,ge=It(P/(Oe[0]+1)),ge>1&&(Oe=g(Oe,ge,P),ze=g(ze,ge,P),Ye=Oe.length,le=ze.length),Fe=Ye,be=ze.slice(0,Ye),ce=be.length;ce<Ye;be[ce++]=0);st=Oe.slice(),st=[0].concat(st),Ge=Oe[0],Oe[1]>=P/2&&Ge++;do{if(ge=0,$=_(Oe,be,Ye,ce),$<0){if(ke=be[0],Ye!=ce&&(ke=ke*P+(be[1]||0)),ge=It(ke/Ge),ge>1)for(ge>=P&&(ge=P-1),M=g(Oe,ge,P),K=M.length,ce=be.length;_(M,be,K,ce)==1;)ge--,C(M,Ye<K?st:Oe,K,P),K=M.length,$=1;else ge==0&&($=ge=1),M=Oe.slice(),K=M.length;if(K<ce&&(M=[0].concat(M)),C(be,M,ce,P),ce=be.length,$==-1)for(;_(Oe,be,Ye,ce)<1;)ge++,C(be,Ye<ce?st:Oe,ce,P),ce=be.length}else $===0&&(ge++,be=[0]);Te[L++]=ge,be[0]?be[ce++]=ze[Fe]||0:(be=[ze[Fe]],ce=1)}while((Fe++<le||be[0]!=null)&&Ue--);Q=be[0]!=null,Te[0]||Te.splice(0,1)}if(P==Ft){for(L=1,Ue=Te[0];Ue>=10;Ue/=10,L++);we(me,q+(me.e=L+V*$e-1)+1,B,Q)}else me.e=V,me.r=+Q;return me}}();function te(g,_,C,O){var x,q,B,P,$;if(C==null?C=o:at(C,0,8),!g.c)return g.toString();if(x=g.c[0],B=g.e,_==null)$=Mt(g.c),$=O==1||O==2&&(B<=h||B>=k)?gi($,B):en($,B,"0");else if(g=we(new H(g),_,C),q=g.e,$=Mt(g.c),P=$.length,O==1||O==2&&(_<=q||q<=h)){for(;P<_;$+="0",P++);$=gi($,q)}else if(_-=B,$=en($,q,"0"),q+1>P){if(--_>0)for($+=".";_--;$+="0");}else if(_+=q-P,_>0)for(q+1==P&&($+=".");_--;$+="0");return g.s<0&&x?"-"+$:$}function ue(g,_){for(var C,O,x=1,q=new H(g[0]);x<g.length;x++)O=new H(g[x]),(!O.s||(C=gn(q,O))===_||C===0&&q.s===_)&&(q=O);return q}function _e(g,_,C){for(var O=1,x=_.length;!_[--x];_.pop());for(x=_[0];x>=10;x/=10,O++);return(C=O+C*$e-1)>S?g.c=g.e=null:C<b?g.c=[g.e=0]:(g.e=C,g.c=_),g}i=function(){var g=/^(-?)0([xbo])(?=\w[\w.]*$)/i,_=/^([^.]+)\.$/,C=/^\.([^.]+)$/,O=/^-?(Infinity|NaN)$/,x=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(q,B,P,$){var V,L=P?B:B.replace(x,"");if(O.test(L))q.s=isNaN(L)?null:L<0?-1:1;else{if(!P&&(L=L.replace(g,function(Q,ge,M){return V=(M=M.toLowerCase())=="x"?16:M=="b"?2:8,!$||$==V?ge:Q}),$&&(V=$,L=L.replace(_,"$1").replace(C,"0.$1")),B!=L))return new H(L,V);if(H.DEBUG)throw Error(St+"Not a"+($?" base "+$:"")+" number: "+B);q.s=null}q.c=q.e=null}}();function we(g,_,C,O){var x,q,B,P,$,V,L,Q=g.c,ge=rr;if(Q){e:{for(x=1,P=Q[0];P>=10;P/=10,x++);if(q=_-x,q<0)q+=$e,B=_,$=Q[V=0],L=It($/ge[x-B-1]%10);else if(V=nr((q+1)/$e),V>=Q.length)if(O){for(;Q.length<=V;Q.push(0));$=L=0,x=1,q%=$e,B=q-$e+1}else break e;else{for($=P=Q[V],x=1;P>=10;P/=10,x++);q%=$e,B=q-$e+x,L=B<0?0:It($/ge[x-B-1]%10)}if(O=O||_<0||Q[V+1]!=null||(B<0?$:$%ge[x-B-1]),O=C<4?(L||O)&&(C==0||C==(g.s<0?3:2)):L>5||L==5&&(C==4||O||C==6&&(q>0?B>0?$/ge[x-B]:0:Q[V-1])%10&1||C==(g.s<0?8:7)),_<1||!Q[0])return Q.length=0,O?(_-=g.e+1,Q[0]=ge[($e-_%$e)%$e],g.e=-_||0):Q[0]=g.e=0,g;if(q==0?(Q.length=V,P=1,V--):(Q.length=V+1,P=ge[$e-q],Q[V]=B>0?It($/ge[x-B]%ge[B])*P:0),O)for(;;)if(V==0){for(q=1,B=Q[0];B>=10;B/=10,q++);for(B=Q[0]+=P,P=1;B>=10;B/=10,P++);q!=P&&(g.e++,Q[0]==Ft&&(Q[0]=1));break}else{if(Q[V]+=P,Q[V]!=Ft)break;Q[V--]=0,P=1}for(q=Q.length;Q[--q]===0;Q.pop());}g.e>S?g.c=g.e=null:g.e<b&&(g.c=[g.e=0])}return g}function fe(g){var _,C=g.e;return C===null?g.toString():(_=Mt(g.c),_=C<=h||C>=k?gi(_,C):en(_,C,"0"),g.s<0?"-"+_:_)}return r.absoluteValue=r.abs=function(){var g=new H(this);return g.s<0&&(g.s=1),g},r.comparedTo=function(g,_){return gn(this,new H(g,_))},r.decimalPlaces=r.dp=function(g,_){var C,O,x,q=this;if(g!=null)return at(g,0,mt),_==null?_=o:at(_,0,8),we(new H(q),g+q.e+1,_);if(!(C=q.c))return null;if(O=((x=C.length-1)-At(this.e/$e))*$e,x=C[x])for(;x%10==0;x/=10,O--);return O<0&&(O=0),O},r.dividedBy=r.div=function(g,_){return t(this,new H(g,_),l,o)},r.dividedToIntegerBy=r.idiv=function(g,_){return t(this,new H(g,_),0,1)},r.exponentiatedBy=r.pow=function(g,_){var C,O,x,q,B,P,$,V,L,Q=this;if(g=new H(g),g.c&&!g.isInteger())throw Error(St+"Exponent not an integer: "+fe(g));if(_!=null&&(_=new H(_)),P=g.e>14,!Q.c||!Q.c[0]||Q.c[0]==1&&!Q.e&&Q.c.length==1||!g.c||!g.c[0])return L=new H(Math.pow(+fe(Q),P?g.s*(2-mi(g)):+fe(g))),_?L.mod(_):L;if($=g.s<0,_){if(_.c?!_.c[0]:!_.s)return new H(NaN);O=!$&&Q.isInteger()&&_.isInteger(),O&&(Q=Q.mod(_))}else{if(g.e>9&&(Q.e>0||Q.e<-1||(Q.e==0?Q.c[0]>1||P&&Q.c[1]>=24e7:Q.c[0]<8e13||P&&Q.c[0]<=9999975e7)))return q=Q.s<0&&mi(g)?-0:0,Q.e>-1&&(q=1/q),new H($?1/q:q);j&&(q=nr(j/$e+2))}for(P?(C=new H(.5),$&&(g.s=1),V=mi(g)):(x=Math.abs(+fe(g)),V=x%2),L=new H(a);;){if(V){if(L=L.times(Q),!L.c)break;q?L.c.length>q&&(L.c.length=q):O&&(L=L.mod(_))}if(x){if(x=It(x/2),x===0)break;V=x%2}else if(g=g.times(C),we(g,g.e+1,1),g.e>14)V=mi(g);else{if(x=+fe(g),x===0)break;V=x%2}Q=Q.times(Q),q?Q.c&&Q.c.length>q&&(Q.c.length=q):O&&(Q=Q.mod(_))}return O?L:($&&(L=a.div(L)),_?L.mod(_):q?we(L,j,o,B):L)},r.integerValue=function(g){var _=new H(this);return g==null?g=o:at(g,0,8),we(_,_.e+1,g)},r.isEqualTo=r.eq=function(g,_){return gn(this,new H(g,_))===0},r.isFinite=function(){return!!this.c},r.isGreaterThan=r.gt=function(g,_){return gn(this,new H(g,_))>0},r.isGreaterThanOrEqualTo=r.gte=function(g,_){return(_=gn(this,new H(g,_)))===1||_===0},r.isInteger=function(){return!!this.c&&At(this.e/$e)>this.c.length-2},r.isLessThan=r.lt=function(g,_){return gn(this,new H(g,_))<0},r.isLessThanOrEqualTo=r.lte=function(g,_){return(_=gn(this,new H(g,_)))===-1||_===0},r.isNaN=function(){return!this.s},r.isNegative=function(){return this.s<0},r.isPositive=function(){return this.s>0},r.isZero=function(){return!!this.c&&this.c[0]==0},r.minus=function(g,_){var C,O,x,q,B=this,P=B.s;if(g=new H(g,_),_=g.s,!P||!_)return new H(NaN);if(P!=_)return g.s=-_,B.plus(g);var $=B.e/$e,V=g.e/$e,L=B.c,Q=g.c;if(!$||!V){if(!L||!Q)return L?(g.s=-_,g):new H(Q?B:NaN);if(!L[0]||!Q[0])return Q[0]?(g.s=-_,g):new H(L[0]?B:o==3?-0:0)}if($=At($),V=At(V),L=L.slice(),P=$-V){for((q=P<0)?(P=-P,x=L):(V=$,x=Q),x.reverse(),_=P;_--;x.push(0));x.reverse()}else for(O=(q=(P=L.length)<(_=Q.length))?P:_,P=_=0;_<O;_++)if(L[_]!=Q[_]){q=L[_]<Q[_];break}if(q&&(x=L,L=Q,Q=x,g.s=-g.s),_=(O=Q.length)-(C=L.length),_>0)for(;_--;L[C++]=0);for(_=Ft-1;O>P;){if(L[--O]<Q[O]){for(C=O;C&&!L[--C];L[C]=_);--L[C],L[O]+=Ft}L[O]-=Q[O]}for(;L[0]==0;L.splice(0,1),--V);return L[0]?_e(g,L,V):(g.s=o==3?-1:1,g.c=[g.e=0],g)},r.modulo=r.mod=function(g,_){var C,O,x=this;return g=new H(g,_),!x.c||!g.s||g.c&&!g.c[0]?new H(NaN):!g.c||x.c&&!x.c[0]?new H(x):(I==9?(O=g.s,g.s=1,C=t(x,g,0,3),g.s=O,C.s*=O):C=t(x,g,0,I),g=x.minus(C.times(g)),!g.c[0]&&I==1&&(g.s=x.s),g)},r.multipliedBy=r.times=function(g,_){var C,O,x,q,B,P,$,V,L,Q,ge,M,K,me,Te,be=this,ce=be.c,ke=(g=new H(g,_)).c;if(!ce||!ke||!ce[0]||!ke[0])return!be.s||!g.s||ce&&!ce[0]&&!ke||ke&&!ke[0]&&!ce?g.c=g.e=g.s=null:(g.s*=be.s,!ce||!ke?g.c=g.e=null:(g.c=[0],g.e=0)),g;for(O=At(be.e/$e)+At(g.e/$e),g.s*=be.s,$=ce.length,Q=ke.length,$<Q&&(K=ce,ce=ke,ke=K,x=$,$=Q,Q=x),x=$+Q,K=[];x--;K.push(0));for(me=Ft,Te=ln,x=Q;--x>=0;){for(C=0,ge=ke[x]%Te,M=ke[x]/Te|0,B=$,q=x+B;q>x;)V=ce[--B]%Te,L=ce[B]/Te|0,P=M*V+L*ge,V=ge*V+P%Te*Te+K[q]+C,C=(V/me|0)+(P/Te|0)+M*L,K[q--]=V%me;K[q]=C}return C?++O:K.splice(0,1),_e(g,K,O)},r.negated=function(){var g=new H(this);return g.s=-g.s||null,g},r.plus=function(g,_){var C,O=this,x=O.s;if(g=new H(g,_),_=g.s,!x||!_)return new H(NaN);if(x!=_)return g.s=-_,O.minus(g);var q=O.e/$e,B=g.e/$e,P=O.c,$=g.c;if(!q||!B){if(!P||!$)return new H(x/0);if(!P[0]||!$[0])return $[0]?g:new H(P[0]?O:x*0)}if(q=At(q),B=At(B),P=P.slice(),x=q-B){for(x>0?(B=q,C=$):(x=-x,C=P),C.reverse();x--;C.push(0));C.reverse()}for(x=P.length,_=$.length,x-_<0&&(C=$,$=P,P=C,_=x),x=0;_;)x=(P[--_]=P[_]+$[_]+x)/Ft|0,P[_]=Ft===P[_]?0:P[_]%Ft;return x&&(P=[x].concat(P),++B),_e(g,P,B)},r.precision=r.sd=function(g,_){var C,O,x,q=this;if(g!=null&&g!==!!g)return at(g,1,mt),_==null?_=o:at(_,0,8),we(new H(q),g,_);if(!(C=q.c))return null;if(x=C.length-1,O=x*$e+1,x=C[x]){for(;x%10==0;x/=10,O--);for(x=C[0];x>=10;x/=10,O++);}return g&&q.e+1>O&&(O=q.e+1),O},r.shiftedBy=function(g){return at(g,-ir,ir),this.times("1e"+g)},r.squareRoot=r.sqrt=function(){var g,_,C,O,x,q=this,B=q.c,P=q.s,$=q.e,V=l+4,L=new H("0.5");if(P!==1||!B||!B[0])return new H(!P||P<0&&(!B||B[0])?NaN:B?q:1/0);if(P=Math.sqrt(+fe(q)),P==0||P==1/0?(_=Mt(B),(_.length+$)%2==0&&(_+="0"),P=Math.sqrt(+_),$=At(($+1)/2)-($<0||$%2),P==1/0?_="5e"+$:(_=P.toExponential(),_=_.slice(0,_.indexOf("e")+1)+$),C=new H(_)):C=new H(P+""),C.c[0]){for($=C.e,P=$+V,P<3&&(P=0);;)if(x=C,C=L.times(x.plus(t(q,x,V,1))),Mt(x.c).slice(0,P)===(_=Mt(C.c)).slice(0,P))if(C.e<$&&--P,_=_.slice(P-3,P+1),_=="9999"||!O&&_=="4999"){if(!O&&(we(x,x.e+l+2,0),x.times(x).eq(q))){C=x;break}V+=4,P+=4,O=1}else{(!+_||!+_.slice(1)&&_.charAt(0)=="5")&&(we(C,C.e+l+2,1),g=!C.times(C).eq(q));break}}return we(C,C.e+l+1,o,g)},r.toExponential=function(g,_){return g!=null&&(at(g,0,mt),g++),te(this,g,_,1)},r.toFixed=function(g,_){return g!=null&&(at(g,0,mt),g=g+this.e+1),te(this,g,_)},r.toFormat=function(g,_,C){var O,x=this;if(C==null)g!=null&&_&&typeof _=="object"?(C=_,_=null):g&&typeof g=="object"?(C=g,g=_=null):C=G;else if(typeof C!="object")throw Error(St+"Argument not an object: "+C);if(O=x.toFixed(g,_),x.c){var q,B=O.split("."),P=+C.groupSize,$=+C.secondaryGroupSize,V=C.groupSeparator||"",L=B[0],Q=B[1],ge=x.s<0,M=ge?L.slice(1):L,K=M.length;if($&&(q=P,P=$,$=q,K-=q),P>0&&K>0){for(q=K%P||P,L=M.substr(0,q);q<K;q+=P)L+=V+M.substr(q,P);$>0&&(L+=V+M.slice(q)),ge&&(L="-"+L)}O=Q?L+(C.decimalSeparator||"")+(($=+C.fractionGroupSize)?Q.replace(new RegExp("\\d{"+$+"}\\B","g"),"$&"+(C.fractionGroupSeparator||"")):Q):L}return(C.prefix||"")+O+(C.suffix||"")},r.toFraction=function(g){var _,C,O,x,q,B,P,$,V,L,Q,ge,M=this,K=M.c;if(g!=null&&(P=new H(g),!P.isInteger()&&(P.c||P.s!==1)||P.lt(a)))throw Error(St+"Argument "+(P.isInteger()?"out of range: ":"not an integer: ")+fe(P));if(!K)return new H(M);for(_=new H(a),V=C=new H(a),O=$=new H(a),ge=Mt(K),q=_.e=ge.length-M.e-1,_.c[0]=rr[(B=q%$e)<0?$e+B:B],g=!g||P.comparedTo(_)>0?q>0?_:V:P,B=S,S=1/0,P=new H(ge),$.c[0]=0;L=t(P,_,0,1),x=C.plus(L.times(O)),x.comparedTo(g)!=1;)C=O,O=x,V=$.plus(L.times(x=V)),$=x,_=P.minus(L.times(x=_)),P=x;return x=t(g.minus(C),O,0,1),$=$.plus(x.times(V)),C=C.plus(x.times(O)),$.s=V.s=M.s,q=q*2,Q=t(V,O,q,o).minus(M).abs().comparedTo(t($,C,q,o).minus(M).abs())<1?[V,O]:[$,C],S=B,Q},r.toNumber=function(){return+fe(this)},r.toPrecision=function(g,_){return g!=null&&at(g,1,mt),te(this,g,_,2)},r.toString=function(g){var _,C=this,O=C.s,x=C.e;return x===null?O?(_="Infinity",O<0&&(_="-"+_)):_="NaN":(g==null?_=x<=h||x>=k?gi(Mt(C.c),x):en(Mt(C.c),x,"0"):g===10&&oe?(C=we(new H(C),l+x+1,o),_=en(Mt(C.c),C.e,"0")):(at(g,2,X.length,"Base"),_=n(en(Mt(C.c),x,"0"),10,g,O,!0)),O<0&&C.c[0]&&(_="-"+_)),_},r.valueOf=r.toJSON=function(){return fe(this)},r._isBigNumber=!0,r[Symbol.toStringTag]="BigNumber",r[Symbol.for("nodejs.util.inspect.custom")]=r.valueOf,e!=null&&H.set(e),H}function At(e){var t=e|0;return e>0||e===t?t:t-1}function Mt(e){for(var t,n,i=1,r=e.length,a=e[0]+"";i<r;){for(t=e[i++]+"",n=$e-t.length;n--;t="0"+t);a+=t}for(r=a.length;a.charCodeAt(--r)===48;);return a.slice(0,r+1||1)}function gn(e,t){var n,i,r=e.c,a=t.c,l=e.s,o=t.s,h=e.e,k=t.e;if(!l||!o)return null;if(n=r&&!r[0],i=a&&!a[0],n||i)return n?i?0:-o:l;if(l!=o)return l;if(n=l<0,i=h==k,!r||!a)return i?0:!r^n?1:-1;if(!i)return h>k^n?1:-1;for(o=(h=r.length)<(k=a.length)?h:k,l=0;l<o;l++)if(r[l]!=a[l])return r[l]>a[l]^n?1:-1;return h==k?0:h>k^n?1:-1}function at(e,t,n,i){if(e<t||e>n||e!==It(e))throw Error(St+(i||"Argument")+(typeof e=="number"?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function mi(e){var t=e.c.length-1;return At(e.e/$e)==t&&e.c[t]%2!=0}function gi(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function en(e,t,n){var i,r;if(t<0){for(r=n+".";++t;r+=n);e=r+e}else if(i=e.length,++t>i){for(r=n,t-=i;--t;r+=n);e+=r}else t<i&&(e=e.slice(0,t)+"."+e.slice(t));return e}var bo=_a();class p extends Array{constructor(t,n){if(t>p.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded");super(t),this.sign=n}static BigInt(t){var n=Math.floor,i=Number.isFinite;if(typeof t=="number"){if(t===0)return p.__zero();if((0|t)===t)return 0>t?p.__oneDigit(-t,!0):p.__oneDigit(t,!1);if(!i(t)||n(t)!==t)throw new RangeError("The number "+t+" cannot be converted to BigInt because it is not an integer");return p.__fromDouble(t)}if(typeof t=="string"){const r=p.__fromString(t);if(r===null)throw new SyntaxError("Cannot convert "+t+" to a BigInt");return r}if(typeof t=="boolean")return t===!0?p.__oneDigit(1,!1):p.__zero();if(typeof t=="object"){if(t.constructor===p)return t;const r=p.__toPrimitive(t);return p.BigInt(r)}throw new TypeError("Cannot convert "+t+" to a BigInt")}toDebugString(){const t=["BigInt["];for(const n of this)t.push((n&&(n>>>0).toString(16))+", ");return t.push("]"),t.join("")}toString(t=10){if(2>t||36<t)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":(t&t-1)==0?p.__toStringBasePowerOfTwo(this,t):p.__toStringGeneric(this,t,!1)}static toNumber(t){const n=t.length;if(n===0)return 0;if(n===1){const X=t.__unsignedDigit(0);return t.sign?-X:X}const i=t.__digit(n-1),r=p.__clz32(i),a=32*n-r;if(1024<a)return t.sign?-1/0:1/0;let l=a-1,o=i,h=n-1;const k=r+1;let b=k===32?0:o<<k;b>>>=12;const S=k-12;let T=12<=k?0:o<<20+k,I=20+k;0<S&&0<h&&(h--,o=t.__digit(h),b|=o>>>32-S,T=o<<S,I=S),0<I&&0<h&&(h--,o=t.__digit(h),T|=o>>>32-I,I-=32);const j=p.__decideRounding(t,I,h,o);if((j===1||j===0&&(1&T)==1)&&(T=T+1>>>0,T===0&&(b++,b>>>20!=0&&(b=0,l++,1023<l))))return t.sign?-1/0:1/0;const G=t.sign?-2147483648:0;return l=l+1023<<20,p.__kBitConversionInts[1]=G|l|b,p.__kBitConversionInts[0]=T,p.__kBitConversionDouble[0]}static unaryMinus(t){if(t.length===0)return t;const n=t.__copy();return n.sign=!t.sign,n}static bitwiseNot(t){return t.sign?p.__absoluteSubOne(t).__trim():p.__absoluteAddOne(t,!0)}static exponentiate(t,n){if(n.sign)throw new RangeError("Exponent must be positive");if(n.length===0)return p.__oneDigit(1,!1);if(t.length===0)return t;if(t.length===1&&t.__digit(0)===1)return t.sign&&(1&n.__digit(0))==0?p.unaryMinus(t):t;if(1<n.length)throw new RangeError("BigInt too big");let i=n.__unsignedDigit(0);if(i===1)return t;if(i>=p.__kMaxLengthBits)throw new RangeError("BigInt too big");if(t.length===1&&t.__digit(0)===2){const l=1+(i>>>5),o=t.sign&&(1&i)!=0,h=new p(l,o);h.__initializeDigits();const k=1<<(31&i);return h.__setDigit(l-1,k),h}let r=null,a=t;for((1&i)!=0&&(r=t),i>>=1;i!==0;i>>=1)a=p.multiply(a,a),(1&i)!=0&&(r===null?r=a:r=p.multiply(r,a));return r}static multiply(t,n){if(t.length===0)return t;if(n.length===0)return n;let i=t.length+n.length;32<=t.__clzmsd()+n.__clzmsd()&&i--;const r=new p(i,t.sign!==n.sign);r.__initializeDigits();for(let a=0;a<t.length;a++)p.__multiplyAccumulate(n,t.__digit(a),r,a);return r.__trim()}static divide(t,n){if(n.length===0)throw new RangeError("Division by zero");if(0>p.__absoluteCompare(t,n))return p.__zero();const i=t.sign!==n.sign,r=n.__unsignedDigit(0);let a;if(n.length===1&&65535>=r){if(r===1)return i===t.sign?t:p.unaryMinus(t);a=p.__absoluteDivSmall(t,r,null)}else a=p.__absoluteDivLarge(t,n,!0,!1);return a.sign=i,a.__trim()}static remainder(t,n){if(n.length===0)throw new RangeError("Division by zero");if(0>p.__absoluteCompare(t,n))return t;const i=n.__unsignedDigit(0);if(n.length===1&&65535>=i){if(i===1)return p.__zero();const a=p.__absoluteModSmall(t,i);return a===0?p.__zero():p.__oneDigit(a,t.sign)}const r=p.__absoluteDivLarge(t,n,!1,!0);return r.sign=t.sign,r.__trim()}static add(t,n){const i=t.sign;return i===n.sign?p.__absoluteAdd(t,n,i):0<=p.__absoluteCompare(t,n)?p.__absoluteSub(t,n,i):p.__absoluteSub(n,t,!i)}static subtract(t,n){const i=t.sign;return i===n.sign?0<=p.__absoluteCompare(t,n)?p.__absoluteSub(t,n,i):p.__absoluteSub(n,t,!i):p.__absoluteAdd(t,n,i)}static leftShift(t,n){return n.length===0||t.length===0?t:n.sign?p.__rightShiftByAbsolute(t,n):p.__leftShiftByAbsolute(t,n)}static signedRightShift(t,n){return n.length===0||t.length===0?t:n.sign?p.__leftShiftByAbsolute(t,n):p.__rightShiftByAbsolute(t,n)}static unsignedRightShift(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}static lessThan(t,n){return 0>p.__compareToBigInt(t,n)}static lessThanOrEqual(t,n){return 0>=p.__compareToBigInt(t,n)}static greaterThan(t,n){return 0<p.__compareToBigInt(t,n)}static greaterThanOrEqual(t,n){return 0<=p.__compareToBigInt(t,n)}static equal(t,n){if(t.sign!==n.sign||t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t.__digit(i)!==n.__digit(i))return!1;return!0}static notEqual(t,n){return!p.equal(t,n)}static bitwiseAnd(t,n){var i=Math.max;if(!t.sign&&!n.sign)return p.__absoluteAnd(t,n).__trim();if(t.sign&&n.sign){const r=i(t.length,n.length)+1;let a=p.__absoluteSubOne(t,r);const l=p.__absoluteSubOne(n);return a=p.__absoluteOr(a,l,a),p.__absoluteAddOne(a,!0,a).__trim()}return t.sign&&([t,n]=[n,t]),p.__absoluteAndNot(t,p.__absoluteSubOne(n)).__trim()}static bitwiseXor(t,n){var i=Math.max;if(!t.sign&&!n.sign)return p.__absoluteXor(t,n).__trim();if(t.sign&&n.sign){const l=i(t.length,n.length),o=p.__absoluteSubOne(t,l),h=p.__absoluteSubOne(n);return p.__absoluteXor(o,h,o).__trim()}const r=i(t.length,n.length)+1;t.sign&&([t,n]=[n,t]);let a=p.__absoluteSubOne(n,r);return a=p.__absoluteXor(a,t,a),p.__absoluteAddOne(a,!0,a).__trim()}static bitwiseOr(t,n){var i=Math.max;const r=i(t.length,n.length);if(!t.sign&&!n.sign)return p.__absoluteOr(t,n).__trim();if(t.sign&&n.sign){let l=p.__absoluteSubOne(t,r);const o=p.__absoluteSubOne(n);return l=p.__absoluteAnd(l,o,l),p.__absoluteAddOne(l,!0,l).__trim()}t.sign&&([t,n]=[n,t]);let a=p.__absoluteSubOne(n,r);return a=p.__absoluteAndNot(a,t,a),p.__absoluteAddOne(a,!0,a).__trim()}static asIntN(t,n){if(n.length===0)return n;if(t===0)return p.__zero();if(t>=p.__kMaxLengthBits)return n;const i=t+31>>>5;if(n.length<i)return n;const r=n.__unsignedDigit(i-1),a=1<<(31&t-1);if(n.length===i&&r<a)return n;if((r&a)!==a)return p.__truncateToNBits(t,n);if(!n.sign)return p.__truncateAndSubFromPowerOfTwo(t,n,!0);if((r&a-1)==0){for(let l=i-2;0<=l;l--)if(n.__digit(l)!==0)return p.__truncateAndSubFromPowerOfTwo(t,n,!1);return n.length===i&&r===a?n:p.__truncateToNBits(t,n)}return p.__truncateAndSubFromPowerOfTwo(t,n,!1)}static asUintN(t,n){if(n.length===0)return n;if(t===0)return p.__zero();if(n.sign){if(t>p.__kMaxLengthBits)throw new RangeError("BigInt too big");return p.__truncateAndSubFromPowerOfTwo(t,n,!1)}if(t>=p.__kMaxLengthBits)return n;const i=t+31>>>5;if(n.length<i)return n;const r=31&t;return n.length==i&&(r===0||n.__digit(i-1)>>>r==0)?n:p.__truncateToNBits(t,n)}static ADD(t,n){if(t=p.__toPrimitive(t),n=p.__toPrimitive(n),typeof t=="string")return typeof n!="string"&&(n=n.toString()),t+n;if(typeof n=="string")return t.toString()+n;if(t=p.__toNumeric(t),n=p.__toNumeric(n),p.__isBigInt(t)&&p.__isBigInt(n))return p.add(t,n);if(typeof t=="number"&&typeof n=="number")return t+n;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}static LT(t,n){return p.__compare(t,n,0)}static LE(t,n){return p.__compare(t,n,1)}static GT(t,n){return p.__compare(t,n,2)}static GE(t,n){return p.__compare(t,n,3)}static EQ(t,n){for(;;){if(p.__isBigInt(t))return p.__isBigInt(n)?p.equal(t,n):p.EQ(n,t);if(typeof t=="number"){if(p.__isBigInt(n))return p.__equalToNumber(n,t);if(typeof n!="object")return t==n;n=p.__toPrimitive(n)}else if(typeof t=="string"){if(p.__isBigInt(n))return t=p.__fromString(t),t!==null&&p.equal(t,n);if(typeof n!="object")return t==n;n=p.__toPrimitive(n)}else if(typeof t=="boolean"){if(p.__isBigInt(n))return p.__equalToNumber(n,+t);if(typeof n!="object")return t==n;n=p.__toPrimitive(n)}else if(typeof t=="symbol"){if(p.__isBigInt(n))return!1;if(typeof n!="object")return t==n;n=p.__toPrimitive(n)}else if(typeof t=="object"){if(typeof n=="object"&&n.constructor!==p)return t==n;t=p.__toPrimitive(t)}else return t==n}}static NE(t,n){return!p.EQ(t,n)}static __zero(){return new p(0,!1)}static __oneDigit(t,n){const i=new p(1,n);return i.__setDigit(0,t),i}__copy(){const t=new p(this.length,this.sign);for(let n=0;n<this.length;n++)t[n]=this[n];return t}__trim(){let t=this.length,n=this[t-1];for(;n===0;)t--,n=this[t-1],this.pop();return t===0&&(this.sign=!1),this}__initializeDigits(){for(let t=0;t<this.length;t++)this[t]=0}static __decideRounding(t,n,i,r){if(0<n)return-1;let a;if(0>n)a=-n-1;else{if(i===0)return-1;i--,r=t.__digit(i),a=31}let l=1<<a;if((r&l)==0)return-1;if(l-=1,(r&l)!=0)return 1;for(;0<i;)if(i--,t.__digit(i)!==0)return 1;return 0}static __fromDouble(t){p.__kBitConversionDouble[0]=t;const n=2047&p.__kBitConversionInts[1]>>>20,i=n-1023,r=(i>>>5)+1,a=new p(r,0>t);let l=1048575&p.__kBitConversionInts[1]|1048576,o=p.__kBitConversionInts[0];const h=20,k=31&i;let b,S=0;if(k<20){const T=h-k;S=T+32,b=l>>>T,l=l<<32-T|o>>>T,o<<=32-T}else if(k===20)S=32,b=l,l=o;else{const T=k-h;S=32-T,b=l<<T|o>>>32-T,l=o<<T}a.__setDigit(r-1,b);for(let T=r-2;0<=T;T--)0<S?(S-=32,b=l,l=o):b=0,a.__setDigit(T,b);return a.__trim()}static __isWhitespace(t){return 13>=t&&9<=t||(159>=t?t==32:131071>=t?t==160||t==5760:196607>=t?(t&=131071,10>=t||t==40||t==41||t==47||t==95||t==4096):t==65279)}static __fromString(t,n=0){let i=0;const r=t.length;let a=0;if(a===r)return p.__zero();let l=t.charCodeAt(a);for(;p.__isWhitespace(l);){if(++a===r)return p.__zero();l=t.charCodeAt(a)}if(l===43){if(++a===r)return null;l=t.charCodeAt(a),i=1}else if(l===45){if(++a===r)return null;l=t.charCodeAt(a),i=-1}if(n===0){if(n=10,l===48){if(++a===r)return p.__zero();if(l=t.charCodeAt(a),l===88||l===120){if(n=16,++a===r)return null;l=t.charCodeAt(a)}else if(l===79||l===111){if(n=8,++a===r)return null;l=t.charCodeAt(a)}else if(l===66||l===98){if(n=2,++a===r)return null;l=t.charCodeAt(a)}}}else if(n===16&&l===48){if(++a===r)return p.__zero();if(l=t.charCodeAt(a),l===88||l===120){if(++a===r)return null;l=t.charCodeAt(a)}}for(;l===48;){if(++a===r)return p.__zero();l=t.charCodeAt(a)}const o=r-a;let h=p.__kMaxBitsPerChar[n],k=p.__kBitsPerCharTableMultiplier-1;if(o>1073741824/h)return null;const b=h*o+k>>>p.__kBitsPerCharTableShift,S=new p(b+31>>>5,!1),T=10>n?n:10,I=10<n?n-10:0;if((n&n-1)==0){h>>=p.__kBitsPerCharTableShift;const j=[],G=[];let X=!1;do{let oe=0,H=0;for(;;){let te;if(l-48>>>0<T)te=l-48;else if((32|l)-97>>>0<I)te=(32|l)-87;else{X=!0;break}if(H+=h,oe=oe<<h|te,++a===r){X=!0;break}if(l=t.charCodeAt(a),32<H+h)break}j.push(oe),G.push(H)}while(!X);p.__fillFromParts(S,j,G)}else{S.__initializeDigits();let j=!1,G=0;do{let X=0,oe=1;for(;;){let te;if(l-48>>>0<T)te=l-48;else if((32|l)-97>>>0<I)te=(32|l)-87;else{j=!0;break}const ue=oe*n;if(4294967295<ue)break;if(oe=ue,X=X*n+te,G++,++a===r){j=!0;break}l=t.charCodeAt(a)}k=32*p.__kBitsPerCharTableMultiplier-1;const H=h*G+k>>>p.__kBitsPerCharTableShift+5;S.__inplaceMultiplyAdd(oe,X,H)}while(!j)}if(a!==r){if(!p.__isWhitespace(l))return null;for(a++;a<r;a++)if(l=t.charCodeAt(a),!p.__isWhitespace(l))return null}return i!=0&&n!==10?null:(S.sign=i==-1,S.__trim())}static __fillFromParts(t,n,i){let r=0,a=0,l=0;for(let o=n.length-1;0<=o;o--){const h=n[o],k=i[o];a|=h<<l,l+=k,l===32?(t.__setDigit(r++,a),l=0,a=0):32<l&&(t.__setDigit(r++,a),l-=32,a=h>>>k-l)}if(a!==0){if(r>=t.length)throw new Error("implementation bug");t.__setDigit(r++,a)}for(;r<t.length;r++)t.__setDigit(r,0)}static __toStringBasePowerOfTwo(t,n){const i=t.length;let r=n-1;r=(85&r>>>1)+(85&r),r=(51&r>>>2)+(51&r),r=(15&r>>>4)+(15&r);const a=r,l=n-1,o=t.__digit(i-1),h=p.__clz32(o);let k=0|(32*i-h+a-1)/a;if(t.sign&&k++,268435456<k)throw new Error("string too long");const b=Array(k);let S=k-1,T=0,I=0;for(let G=0;G<i-1;G++){const X=t.__digit(G),oe=(T|X<<I)&l;b[S--]=p.__kConversionChars[oe];const H=a-I;for(T=X>>>H,I=32-H;I>=a;)b[S--]=p.__kConversionChars[T&l],T>>>=a,I-=a}const j=(T|o<<I)&l;for(b[S--]=p.__kConversionChars[j],T=o>>>a-I;T!==0;)b[S--]=p.__kConversionChars[T&l],T>>>=a;if(t.sign&&(b[S--]="-"),S!=-1)throw new Error("implementation bug");return b.join("")}static __toStringGeneric(t,n,i){const r=t.length;if(r===0)return"";if(r===1){let G=t.__unsignedDigit(0).toString(n);return i===!1&&t.sign&&(G="-"+G),G}const a=32*r-p.__clz32(t.__digit(r-1)),l=p.__kMaxBitsPerChar[n],o=l-1;let h=a*p.__kBitsPerCharTableMultiplier;h+=o-1,h=0|h/o;const k=h+1>>1,b=p.exponentiate(p.__oneDigit(n,!1),p.__oneDigit(k,!1));let S,T;const I=b.__unsignedDigit(0);if(b.length===1&&65535>=I){S=new p(t.length,!1),S.__initializeDigits();let G=0;for(let X=2*t.length-1;0<=X;X--){const oe=G<<16|t.__halfDigit(X);S.__setHalfDigit(X,0|oe/I),G=0|oe%I}T=G.toString(n)}else{const G=p.__absoluteDivLarge(t,b,!0,!0);S=G.quotient;const X=G.remainder.__trim();T=p.__toStringGeneric(X,n,!0)}S.__trim();let j=p.__toStringGeneric(S,n,!0);for(;T.length<k;)T="0"+T;return i===!1&&t.sign&&(j="-"+j),j+T}static __unequalSign(t){return t?-1:1}static __absoluteGreater(t){return t?-1:1}static __absoluteLess(t){return t?1:-1}static __compareToBigInt(t,n){const i=t.sign;if(i!==n.sign)return p.__unequalSign(i);const r=p.__absoluteCompare(t,n);return 0<r?p.__absoluteGreater(i):0>r?p.__absoluteLess(i):0}static __compareToNumber(t,n){if(n|!0){const i=t.sign,r=0>n;if(i!==r)return p.__unequalSign(i);if(t.length===0){if(r)throw new Error("implementation bug");return n===0?0:-1}if(1<t.length)return p.__absoluteGreater(i);const a=Math.abs(n),l=t.__unsignedDigit(0);return l>a?p.__absoluteGreater(i):l<a?p.__absoluteLess(i):0}return p.__compareToDouble(t,n)}static __compareToDouble(t,n){if(n!==n)return n;if(n===1/0)return-1;if(n===-1/0)return 1;const i=t.sign;if(i!==0>n)return p.__unequalSign(i);if(n===0)throw new Error("implementation bug: should be handled elsewhere");if(t.length===0)return-1;p.__kBitConversionDouble[0]=n;const r=2047&p.__kBitConversionInts[1]>>>20;if(r==2047)throw new Error("implementation bug: handled elsewhere");const a=r-1023;if(0>a)return p.__absoluteGreater(i);const l=t.length;let o=t.__digit(l-1);const h=p.__clz32(o),k=32*l-h,b=a+1;if(k<b)return p.__absoluteLess(i);if(k>b)return p.__absoluteGreater(i);let S=1048576|1048575&p.__kBitConversionInts[1],T=p.__kBitConversionInts[0];const I=20,j=31-h;if(j!==(k-1)%31)throw new Error("implementation bug");let G,X=0;if(20>j){const oe=I-j;X=oe+32,G=S>>>oe,S=S<<32-oe|T>>>oe,T<<=32-oe}else if(j===20)X=32,G=S,S=T;else{const oe=j-I;X=32-oe,G=S<<oe|T>>>32-oe,S=T<<oe}if(o>>>=0,G>>>=0,o>G)return p.__absoluteGreater(i);if(o<G)return p.__absoluteLess(i);for(let oe=l-2;0<=oe;oe--){0<X?(X-=32,G=S>>>0,S=T,T=0):G=0;const H=t.__unsignedDigit(oe);if(H>G)return p.__absoluteGreater(i);if(H<G)return p.__absoluteLess(i)}if(S!==0||T!==0){if(X===0)throw new Error("implementation bug");return p.__absoluteLess(i)}return 0}static __equalToNumber(t,n){var i=Math.abs;return n|n===0?n===0?t.length===0:t.length===1&&t.sign===0>n&&t.__unsignedDigit(0)===i(n):p.__compareToDouble(t,n)===0}static __comparisonResultToBool(t,n){switch(n){case 0:return 0>t;case 1:return 0>=t;case 2:return 0<t;case 3:return 0<=t}throw new Error("unreachable")}static __compare(t,n,i){if(t=p.__toPrimitive(t),n=p.__toPrimitive(n),typeof t=="string"&&typeof n=="string")switch(i){case 0:return t<n;case 1:return t<=n;case 2:return t>n;case 3:return t>=n}if(p.__isBigInt(t)&&typeof n=="string")return n=p.__fromString(n),n!==null&&p.__comparisonResultToBool(p.__compareToBigInt(t,n),i);if(typeof t=="string"&&p.__isBigInt(n))return t=p.__fromString(t),t!==null&&p.__comparisonResultToBool(p.__compareToBigInt(t,n),i);if(t=p.__toNumeric(t),n=p.__toNumeric(n),p.__isBigInt(t)){if(p.__isBigInt(n))return p.__comparisonResultToBool(p.__compareToBigInt(t,n),i);if(typeof n!="number")throw new Error("implementation bug");return p.__comparisonResultToBool(p.__compareToNumber(t,n),i)}if(typeof t!="number")throw new Error("implementation bug");if(p.__isBigInt(n))return p.__comparisonResultToBool(p.__compareToNumber(n,t),2^i);if(typeof n!="number")throw new Error("implementation bug");return i===0?t<n:i===1?t<=n:i===2?t>n:i===3?t>=n:void 0}__clzmsd(){return p.__clz32(this[this.length-1])}static __absoluteAdd(t,n,i){if(t.length<n.length)return p.__absoluteAdd(n,t,i);if(t.length===0)return t;if(n.length===0)return t.sign===i?t:p.unaryMinus(t);let r=t.length;(t.__clzmsd()===0||n.length===t.length&&n.__clzmsd()===0)&&r++;const a=new p(r,i);let l=0,o=0;for(;o<n.length;o++){const h=n.__digit(o),k=t.__digit(o),b=(65535&k)+(65535&h)+l,S=(k>>>16)+(h>>>16)+(b>>>16);l=S>>>16,a.__setDigit(o,65535&b|S<<16)}for(;o<t.length;o++){const h=t.__digit(o),k=(65535&h)+l,b=(h>>>16)+(k>>>16);l=b>>>16,a.__setDigit(o,65535&k|b<<16)}return o<a.length&&a.__setDigit(o,l),a.__trim()}static __absoluteSub(t,n,i){if(t.length===0)return t;if(n.length===0)return t.sign===i?t:p.unaryMinus(t);const r=new p(t.length,i);let a=0,l=0;for(;l<n.length;l++){const o=t.__digit(l),h=n.__digit(l),k=(65535&o)-(65535&h)-a;a=1&k>>>16;const b=(o>>>16)-(h>>>16)-a;a=1&b>>>16,r.__setDigit(l,65535&k|b<<16)}for(;l<t.length;l++){const o=t.__digit(l),h=(65535&o)-a;a=1&h>>>16;const k=(o>>>16)-a;a=1&k>>>16,r.__setDigit(l,65535&h|k<<16)}return r.__trim()}static __absoluteAddOne(t,n,i=null){const r=t.length;i===null?i=new p(r,n):i.sign=n;let a=!0;for(let l,o=0;o<r;o++){if(l=t.__digit(o),a){const h=l===-1;l=0|l+1,a=h}i.__setDigit(o,l)}return a&&i.__setDigitGrow(r,1),i}static __absoluteSubOne(t,n){const i=t.length;n=n||i;const r=new p(n,!1);let a=!0;for(let l,o=0;o<i;o++){if(l=t.__digit(o),a){const h=l===0;l=0|l-1,a=h}r.__setDigit(o,l)}if(a)throw new Error("implementation bug");for(let l=i;l<n;l++)r.__setDigit(l,0);return r}static __absoluteAnd(t,n,i=null){let r=t.length,a=n.length,l=a;if(r<a){l=r;const k=t,b=r;t=n,r=a,n=k,a=b}let o=l;i===null?i=new p(o,!1):o=i.length;let h=0;for(;h<l;h++)i.__setDigit(h,t.__digit(h)&n.__digit(h));for(;h<o;h++)i.__setDigit(h,0);return i}static __absoluteAndNot(t,n,i=null){const r=t.length,a=n.length;let l=a;r<a&&(l=r);let o=r;i===null?i=new p(o,!1):o=i.length;let h=0;for(;h<l;h++)i.__setDigit(h,t.__digit(h)&~n.__digit(h));for(;h<r;h++)i.__setDigit(h,t.__digit(h));for(;h<o;h++)i.__setDigit(h,0);return i}static __absoluteOr(t,n,i=null){let r=t.length,a=n.length,l=a;if(r<a){l=r;const k=t,b=r;t=n,r=a,n=k,a=b}let o=r;i===null?i=new p(o,!1):o=i.length;let h=0;for(;h<l;h++)i.__setDigit(h,t.__digit(h)|n.__digit(h));for(;h<r;h++)i.__setDigit(h,t.__digit(h));for(;h<o;h++)i.__setDigit(h,0);return i}static __absoluteXor(t,n,i=null){let r=t.length,a=n.length,l=a;if(r<a){l=r;const k=t,b=r;t=n,r=a,n=k,a=b}let o=r;i===null?i=new p(o,!1):o=i.length;let h=0;for(;h<l;h++)i.__setDigit(h,t.__digit(h)^n.__digit(h));for(;h<r;h++)i.__setDigit(h,t.__digit(h));for(;h<o;h++)i.__setDigit(h,0);return i}static __absoluteCompare(t,n){const i=t.length-n.length;if(i!=0)return i;let r=t.length-1;for(;0<=r&&t.__digit(r)===n.__digit(r);)r--;return 0>r?0:t.__unsignedDigit(r)>n.__unsignedDigit(r)?1:-1}static __multiplyAccumulate(t,n,i,r){if(n===0)return;const a=65535&n,l=n>>>16;let o=0,h=0,k=0;for(let b=0;b<t.length;b++,r++){let S=i.__digit(r),T=65535&S,I=S>>>16;const j=t.__digit(b),G=65535&j,X=j>>>16,oe=p.__imul(G,a),H=p.__imul(G,l),te=p.__imul(X,a),ue=p.__imul(X,l);T+=h+(65535&oe),I+=k+o+(T>>>16)+(oe>>>16)+(65535&H)+(65535&te),o=I>>>16,h=(H>>>16)+(te>>>16)+(65535&ue)+o,o=h>>>16,h&=65535,k=ue>>>16,S=65535&T|I<<16,i.__setDigit(r,S)}for(;o!=0||h!==0||k!==0;r++){let b=i.__digit(r);const S=(65535&b)+h,T=(b>>>16)+(S>>>16)+k+o;h=0,k=0,o=T>>>16,b=65535&S|T<<16,i.__setDigit(r,b)}}static __internalMultiplyAdd(t,n,i,r,a){let l=i,o=0;for(let h=0;h<r;h++){const k=t.__digit(h),b=p.__imul(65535&k,n),S=(65535&b)+o+l;l=S>>>16;const T=p.__imul(k>>>16,n),I=(65535&T)+(b>>>16)+l;l=I>>>16,o=T>>>16,a.__setDigit(h,I<<16|65535&S)}if(a.length>r)for(a.__setDigit(r++,l+o);r<a.length;)a.__setDigit(r++,0);else if(l+o!==0)throw new Error("implementation bug")}__inplaceMultiplyAdd(t,n,i){i>this.length&&(i=this.length);const r=65535&t,a=t>>>16;let l=0,o=65535&n,h=n>>>16;for(let k=0;k<i;k++){const b=this.__digit(k),S=65535&b,T=b>>>16,I=p.__imul(S,r),j=p.__imul(S,a),G=p.__imul(T,r),X=p.__imul(T,a),oe=o+(65535&I),H=h+l+(oe>>>16)+(I>>>16)+(65535&j)+(65535&G);o=(j>>>16)+(G>>>16)+(65535&X)+(H>>>16),l=o>>>16,o&=65535,h=X>>>16,this.__setDigit(k,65535&oe|H<<16)}if(l!=0||o!==0||h!==0)throw new Error("implementation bug")}static __absoluteDivSmall(t,n,i){i===null&&(i=new p(t.length,!1));let r=0;for(let a,l=2*t.length-1;0<=l;l-=2){a=(r<<16|t.__halfDigit(l))>>>0;const o=0|a/n;r=0|a%n,a=(r<<16|t.__halfDigit(l-1))>>>0;const h=0|a/n;r=0|a%n,i.__setDigit(l>>>1,o<<16|h)}return i}static __absoluteModSmall(t,n){let i=0;for(let r=2*t.length-1;0<=r;r--){const a=(i<<16|t.__halfDigit(r))>>>0;i=0|a%n}return i}static __absoluteDivLarge(t,n,i,r){const a=n.__halfDigitLength(),l=n.length,o=t.__halfDigitLength()-a;let h=null;i&&(h=new p(o+2>>>1,!1),h.__initializeDigits());const k=new p(a+2>>>1,!1);k.__initializeDigits();const b=p.__clz16(n.__halfDigit(a-1));0<b&&(n=p.__specialLeftShift(n,b,0));const S=p.__specialLeftShift(t,b,1),T=n.__halfDigit(a-1);let I=0;for(let j,G=o;0<=G;G--){j=65535;const X=S.__halfDigit(G+a);if(X!==T){const H=(X<<16|S.__halfDigit(G+a-1))>>>0;j=0|H/T;let te=0|H%T;const ue=n.__halfDigit(a-2),_e=S.__halfDigit(G+a-2);for(;p.__imul(j,ue)>>>0>(te<<16|_e)>>>0&&(j--,te+=T,!(65535<te)););}p.__internalMultiplyAdd(n,j,0,l,k);let oe=S.__inplaceSub(k,G,a+1);oe!==0&&(oe=S.__inplaceAdd(n,G,a),S.__setHalfDigit(G+a,S.__halfDigit(G+a)+oe),j--),i&&(1&G?I=j<<16:h.__setDigit(G>>>1,I|j))}return r?(S.__inplaceRightShift(b),i?{quotient:h,remainder:S}:S):i?h:void 0}static __clz16(t){return p.__clz32(t)-16}__inplaceAdd(t,n,i){let r=0;for(let a=0;a<i;a++){const l=this.__halfDigit(n+a)+t.__halfDigit(a)+r;r=l>>>16,this.__setHalfDigit(n+a,l)}return r}__inplaceSub(t,n,i){let r=0;if(1&n){n>>=1;let a=this.__digit(n),l=65535&a,o=0;for(;o<i-1>>>1;o++){const b=t.__digit(o),S=(a>>>16)-(65535&b)-r;r=1&S>>>16,this.__setDigit(n+o,S<<16|65535&l),a=this.__digit(n+o+1),l=(65535&a)-(b>>>16)-r,r=1&l>>>16}const h=t.__digit(o),k=(a>>>16)-(65535&h)-r;if(r=1&k>>>16,this.__setDigit(n+o,k<<16|65535&l),n+o+1>=this.length)throw new RangeError("out of bounds");(1&i)==0&&(a=this.__digit(n+o+1),l=(65535&a)-(h>>>16)-r,r=1&l>>>16,this.__setDigit(n+t.length,4294901760&a|65535&l))}else{n>>=1;let a=0;for(;a<t.length-1;a++){const b=this.__digit(n+a),S=t.__digit(a),T=(65535&b)-(65535&S)-r;r=1&T>>>16;const I=(b>>>16)-(S>>>16)-r;r=1&I>>>16,this.__setDigit(n+a,I<<16|65535&T)}const l=this.__digit(n+a),o=t.__digit(a),h=(65535&l)-(65535&o)-r;r=1&h>>>16;let k=0;(1&i)==0&&(k=(l>>>16)-(o>>>16)-r,r=1&k>>>16),this.__setDigit(n+a,k<<16|65535&h)}return r}__inplaceRightShift(t){if(t===0)return;let n=this.__digit(0)>>>t;const i=this.length-1;for(let r=0;r<i;r++){const a=this.__digit(r+1);this.__setDigit(r,a<<32-t|n),n=a>>>t}this.__setDigit(i,n)}static __specialLeftShift(t,n,i){const r=t.length,a=new p(r+i,!1);if(n===0){for(let o=0;o<r;o++)a.__setDigit(o,t.__digit(o));return 0<i&&a.__setDigit(r,0),a}let l=0;for(let o=0;o<r;o++){const h=t.__digit(o);a.__setDigit(o,h<<n|l),l=h>>>32-n}return 0<i&&a.__setDigit(r,l),a}static __leftShiftByAbsolute(t,n){const i=p.__toShiftAmount(n);if(0>i)throw new RangeError("BigInt too big");const r=i>>>5,a=31&i,l=t.length,o=a!==0&&t.__digit(l-1)>>>32-a!=0,h=l+r+(o?1:0),k=new p(h,t.sign);if(a===0){let b=0;for(;b<r;b++)k.__setDigit(b,0);for(;b<h;b++)k.__setDigit(b,t.__digit(b-r))}else{let b=0;for(let S=0;S<r;S++)k.__setDigit(S,0);for(let S=0;S<l;S++){const T=t.__digit(S);k.__setDigit(S+r,T<<a|b),b=T>>>32-a}if(o)k.__setDigit(l+r,b);else if(b!==0)throw new Error("implementation bug")}return k.__trim()}static __rightShiftByAbsolute(t,n){const i=t.length,r=t.sign,a=p.__toShiftAmount(n);if(0>a)return p.__rightShiftByMaximum(r);const l=a>>>5,o=31&a;let h=i-l;if(0>=h)return p.__rightShiftByMaximum(r);let k=!1;if(r){if((t.__digit(l)&(1<<o)-1)!=0)k=!0;else for(let S=0;S<l;S++)if(t.__digit(S)!==0){k=!0;break}}k&&o===0&&~t.__digit(i-1)==0&&h++;let b=new p(h,r);if(o===0)for(let S=l;S<i;S++)b.__setDigit(S-l,t.__digit(S));else{let S=t.__digit(l)>>>o;const T=i-l-1;for(let I=0;I<T;I++){const j=t.__digit(I+l+1);b.__setDigit(I,j<<32-o|S),S=j>>>o}b.__setDigit(T,S)}return k&&(b=p.__absoluteAddOne(b,!0,b)),b.__trim()}static __rightShiftByMaximum(t){return t?p.__oneDigit(1,!0):p.__zero()}static __toShiftAmount(t){if(1<t.length)return-1;const n=t.__unsignedDigit(0);return n>p.__kMaxLengthBits?-1:n}static __toPrimitive(t,n="default"){if(typeof t!="object"||t.constructor===p)return t;const i=t[Symbol.toPrimitive];if(i){const l=i(n);if(typeof l!="object")return l;throw new TypeError("Cannot convert object to primitive value")}const r=t.valueOf;if(r){const l=r.call(t);if(typeof l!="object")return l}const a=t.toString;if(a){const l=a.call(t);if(typeof l!="object")return l}throw new TypeError("Cannot convert object to primitive value")}static __toNumeric(t){return p.__isBigInt(t)?t:+t}static __isBigInt(t){return typeof t=="object"&&t!==null&&t.constructor===p}static __truncateToNBits(t,n){const i=t+31>>>5,r=new p(i,n.sign),a=i-1;for(let o=0;o<a;o++)r.__setDigit(o,n.__digit(o));let l=n.__digit(a);if((31&t)!=0){const o=32-(31&t);l=l<<o>>>o}return r.__setDigit(a,l),r.__trim()}static __truncateAndSubFromPowerOfTwo(t,n,i){var r=Math.min;const a=t+31>>>5,l=new p(a,i);let o=0;const h=a-1;let k=0;for(const I=r(h,n.length);o<I;o++){const j=n.__digit(o),G=0-(65535&j)-k;k=1&G>>>16;const X=0-(j>>>16)-k;k=1&X>>>16,l.__setDigit(o,65535&G|X<<16)}for(;o<h;o++)l.__setDigit(o,0|-k);let b=h<n.length?n.__digit(h):0;const S=31&t;let T;if(S==0){const I=0-(65535&b)-k;k=1&I>>>16;const j=0-(b>>>16)-k;T=65535&I|j<<16}else{const I=32-S;b=b<<I>>>I;const j=1<<32-I,G=(65535&j)-(65535&b)-k;k=1&G>>>16;const X=(j>>>16)-(b>>>16)-k;T=65535&G|X<<16,T&=j-1}return l.__setDigit(h,T),l.__trim()}__digit(t){return this[t]}__unsignedDigit(t){return this[t]>>>0}__setDigit(t,n){this[t]=0|n}__setDigitGrow(t,n){this[t]=0|n}__halfDigitLength(){const t=this.length;return 65535>=this.__unsignedDigit(t-1)?2*t-1:2*t}__halfDigit(t){return 65535&this[t>>>1]>>>((1&t)<<4)}__setHalfDigit(t,n){const i=t>>>1,r=this.__digit(i),a=1&t?65535&r|n<<16:4294901760&r|65535&n;this.__setDigit(i,a)}static __digitPow(t,n){let i=1;for(;0<n;)1&n&&(i*=t),n>>>=1,t*=t;return i}}p.__kMaxLength=33554432,p.__kMaxLengthBits=p.__kMaxLength<<5,p.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],p.__kBitsPerCharTableShift=5,p.__kBitsPerCharTableMultiplier=1<<p.__kBitsPerCharTableShift,p.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],p.__kBitConversionBuffer=new ArrayBuffer(8),p.__kBitConversionDouble=new Float64Array(p.__kBitConversionBuffer),p.__kBitConversionInts=new Int32Array(p.__kBitConversionBuffer),p.__clz32=Math.clz32||function(e){return e===0?32:0|31-(0|Math.log(e>>>0)/Math.LN2)},p.__imul=Math.imul||function(e,t){return 0|e*t};var gh=globalThis&&globalThis.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),r=0,t=0;t<n;t++)for(var a=arguments[t],l=0,o=a.length;l<o;l++,r++)i[r]=a[l];return i},ph=18446744073709552e3,ko=function(e,t){return p.bitwiseXor(p.asUintN(64,p.leftShift(e,p.BigInt(t))),p.BigInt(p.asUintN(64,p.signedRightShift(e,p.subtract(p.BigInt(64),p.BigInt(t))))))},vh=function(){function e(t){var n=this;this.next=function(){return new bo(n.roll().toString())},this.nextDouble=function(){return new bo(n.roll().toString()).div(ph+1)},this.nextInt=function(r,a){return Math.floor(n.nextDouble().toNumber()*(a-r+1)+r)},this.nextByte=function(){return n.nextInt(0,255)},this.nextData=function(r){return gh(new Array(r)).map(function(){return n.nextByte()})};var i=zd(t);this.s=[p.BigInt(0),p.BigInt(0),p.BigInt(0),p.BigInt(0)],this.setS(i)}return e.prototype.setS=function(t){for(var n=0;n<4;n++){for(var i=n*8,r=p.BigInt(0),a=0;a<8;a++)r=p.asUintN(64,p.leftShift(r,p.BigInt(8))),r=p.asUintN(64,p.bitwiseOr(r,p.BigInt(t[i+a])));this.s[n]=p.asUintN(64,r)}},e.prototype.roll=function(){var t=p.asUintN(64,p.multiply(ko(p.asUintN(64,p.multiply(this.s[1],p.BigInt(5))),7),p.BigInt(9))),n=p.asUintN(64,p.leftShift(this.s[1],p.BigInt(17)));return this.s[2]=p.asUintN(64,p.bitwiseXor(this.s[2],p.BigInt(this.s[0]))),this.s[3]=p.asUintN(64,p.bitwiseXor(this.s[3],p.BigInt(this.s[1]))),this.s[1]=p.asUintN(64,p.bitwiseXor(this.s[1],p.BigInt(this.s[2]))),this.s[0]=p.asUintN(64,p.bitwiseXor(this.s[0],p.BigInt(this.s[3]))),this.s[2]=p.asUintN(64,p.bitwiseXor(this.s[2],p.BigInt(n))),this.s[3]=p.asUintN(64,ko(this.s[3],45)),t},e}();function ai(e,t,n){this.alias=[],this.prob=[],this.outcomes=t||this.indexedOutcomes(e.length),this.rng=n||Math.random,this.precomputeAlias(e)}ai.prototype.next=function(e){var t=e||1,n=[],i=0;do{var r=Math.floor(this.rng()*this.prob.length);n[i]=this.outcomes[this.rng()<this.prob[r]?r:this.alias[r]]}while(++i<t);return t>1?n:n[0]};ai.prototype.precomputeAlias=function(e){var t=e.length,n=0,i=0,r=0,a=[],l=[],o=[],h,k,b;for(k=0;k<t;++k){if(e[k]<0)throw"Probability must be a positive: p["+k+"]="+e[k];n+=e[k]}if(n===0)throw"Probability cannot be zero.";for(k=0;k<t;++k)a[k]=e[k]*t/n;for(k=t-1;k>=0;--k)a[k]<1?l[i++]=k:o[r++]=k;for(;i&&r;)b=l[--i],h=o[--r],this.prob[b]=a[b],this.alias[b]=h,a[h]=a[h]+a[b]-1,a[h]<1?l[i++]=h:o[r++]=h;for(;r;)this.prob[o[--r]]=1;for(;i;)this.prob[l[--i]]=1};ai.prototype.indexedOutcomes=function(e){for(var t=[],n=0;n<e;n++)t[n]=n;return t};ai.prototype.randomInt=function(e,t){return Math.floor(this.rng()*(t-e))+e};var yh=function(e,t,n){return new ai(e,t,n)},$r=globalThis&&globalThis.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),r=0,t=0;t<n;t++)for(var a=arguments[t],l=0,o=a.length;l<o;l++,r++)i[r]=a[l];return i},wh=function(e,t){var n=$r(new Array(e)).map(function(r,a){return 1/(a+1)}),i=yh(n,null,t.nextDouble);return i.next()+1},bh=function(e,t){for(var n=$r(e),i=[];n.length>0;){var r=t.nextInt(0,n.length-1),a=n[r];n.splice(r,1),i.push(a)}return i},Da=function(e,t,n){if(e<=t)return[e-1];var i=rt.Buffer.concat([mo(e),mo(n)]),r=new vh(i),a=wh(t,r),l=$r(new Array(t)).map(function(h,k){return k}),o=bh(l,r);return o.slice(0,a)},Ca=function(){function e(t,n,i,r,a){this._seqNum=t,this._seqLength=n,this._messageLength=i,this._checksum=r,this._fragment=a}return Object.defineProperty(e.prototype,"messageLength",{get:function(){return this._messageLength},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fragment",{get:function(){return this._fragment},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seqNum",{get:function(){return this._seqNum},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seqLength",{get:function(){return this._seqLength},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"checksum",{get:function(){return this._checksum},enumerable:!1,configurable:!0}),e.prototype.cbor=function(){var t=ba([this._seqNum,this._seqLength,this._messageLength,this._checksum,this._fragment]);return rt.Buffer.from(t)},e.prototype.description=function(){return"seqNum:"+this._seqNum+", seqLen:"+this._seqLength+", messageLen:"+this._messageLength+", checksum:"+this._checksum+", data:"+this._fragment.toString("hex")},e.fromCBOR=function(t){var n=ka(t),i=n[0],r=n[1],a=n[2],l=n[3],o=n[4];if(typeof i!="number"||typeof r!="number"||typeof a!="number"||typeof l!="number"||rt.Buffer.isBuffer(o)&&o.length<=0)throw new Error("type error");return new e(i,r,a,l,rt.Buffer.from(o))},e}(),kh=function(){function e(t,n,i,r){n===void 0&&(n=100),i===void 0&&(i=0),r===void 0&&(r=10);var a=e.findNominalFragmentLength(t.length,r,n);this._messageLength=t.length,this._fragments=e.partitionMessage(t,a),this.fragmentLength=a,this.seqNum=mr(i),this.checksum=sa(t)}return Object.defineProperty(e.prototype,"fragmentsLength",{get:function(){return this._fragments.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fragments",{get:function(){return this._fragments},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"messageLength",{get:function(){return this._messageLength},enumerable:!1,configurable:!0}),e.prototype.isComplete=function(){return this.seqNum>=this._fragments.length},e.prototype.isSinglePart=function(){return this._fragments.length===1},e.prototype.seqLength=function(){return this._fragments.length},e.prototype.mix=function(t){var n=this;return t.reduce(function(i,r){return ua(n._fragments[r],i)},rt.Buffer.alloc(this.fragmentLength,0))},e.prototype.nextPart=function(){this.seqNum=mr(this.seqNum+1);var t=Da(this.seqNum,this._fragments.length,this.checksum),n=this.mix(t);return new Ca(this.seqNum,this._fragments.length,this._messageLength,this.checksum,n)},e.findNominalFragmentLength=function(t,n,i){if(t<=0||n<=0||i<n)throw new Error("invalid fragment or message length");for(var r=Math.ceil(t/n),a=0,l=1;l<=r&&(a=Math.ceil(t/l),!(a<=i));l++);return a},e.partitionMessage=function(t,n){for(var i,r=rt.Buffer.from(t),a,l=[];r.length>0;)i=aa(r,-n),a=i[0],r=i[1],a=rt.Buffer.alloc(n,0).fill(a,0,a.length),l.push(a);return l},e}(),xa=globalThis&&globalThis.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),r=0,t=0;t<n;t++)for(var a=arguments[t],l=0,o=a.length;l<o;l++,r++)i[r]=a[l];return i},_h="ableacidalsoapexaquaarchatomauntawayaxisbackbaldbarnbeltbetabiasbluebodybragbrewbulbbuzzcalmcashcatschefcityclawcodecolacookcostcruxcurlcuspcyandarkdatadaysdelidicedietdoordowndrawdropdrumdulldutyeacheasyechoedgeepicevenexamexiteyesfactfairfernfigsfilmfishfizzflapflewfluxfoxyfreefrogfuelfundgalagamegeargemsgiftgirlglowgoodgraygrimgurugushgyrohalfhanghardhawkheathelphighhillholyhopehornhutsicedideaidleinchinkyintoirisironitemjadejazzjoinjoltjowljudojugsjumpjunkjurykeepkenokeptkeyskickkilnkingkitekiwiknoblamblavalazyleaflegsliarlimplionlistlogoloudloveluaulucklungmainmanymathmazememomenumeowmildmintmissmonknailnavyneednewsnextnoonnotenumbobeyoboeomitonyxopenovalowlspaidpartpeckplaypluspoempoolposepuffpumapurrquadquizraceramprealredorichroadrockroofrubyruinrunsrustsafesagascarsetssilkskewslotsoapsolosongstubsurfswantacotasktaxitenttiedtimetinytoiltombtoystriptunatwinuglyundouniturgeuservastveryvetovialvibeviewvisavoidvowswallwandwarmwaspwavewaxywebswhatwhenwhizwolfworkyankyawnyellyogayurtzapszerozestzinczonezoom",pi=[],Dh=256,fn=4,Ch=2,Vt;(function(e){e.STANDARD="standard",e.URI="uri",e.MINIMAL="minimal"})(Vt||(Vt={}));var Pi=function(e){return _h.slice(e*fn,e*fn+fn)},xh=function(e){var t=Pi(e);return""+t[0]+t[fn-1]},Sa=function(e){var t=la(rt.Buffer.from(e,"hex"));return""+e+t},_o=function(e,t){var n=Sa(e),i=rt.Buffer.from(n,"hex"),r=i.reduce(function(a,l){return xa(a,[Pi(l)])},[]);return r.join(t)},Sh=function(e){var t=Sa(e),n=rt.Buffer.from(t,"hex"),i=n.reduce(function(r,a){return r+xh(a)},"");return i},Th=function(e,t){if(e.length!==t)throw new Error("'Invalid Bytewords: word.length does not match wordLength provided'");var n=26;if(pi.length===0){var i=n*n;pi=xa(new Array(i)).map(function(){return-1});for(var r=0;r<Dh;r++){var a=Pi(r),l=a[0].charCodeAt(0)-"a".charCodeAt(0),o=a[3].charCodeAt(0)-"a".charCodeAt(0),h=o*n+l;pi[h]=r}}var k=e[0].toLowerCase().charCodeAt(0)-"a".charCodeAt(0),b=e[t==4?3:1].toLowerCase().charCodeAt(0)-"a".charCodeAt(0);if(!(0<=k&&k<n&&0<=b&&b<n))throw new Error("Invalid Bytewords: invalid word");var S=b*n+k,T=pi[S];if(T===-1)throw new Error("Invalid Bytewords: value not in lookup table");if(t==fn){var a=Pi(T),I=e[1].toLowerCase(),j=e[2].toLowerCase();if(!(I===a[1]&&j===a[2]))throw new Error("Invalid Bytewords: invalid middle letters of word")}return rt.Buffer.from([T]).toString("hex")},or=function(e,t,n){var i=n==fn?e.split(t):jd(e,2),r=i.map(function(k){return Th(k,n)}).join("");if(r.length<5)throw new Error("Invalid Bytewords: invalid decoded string length");var a=aa(rt.Buffer.from(r,"hex"),4),l=a[0],o=a[1],h=la(l);if(h!==o.toString("hex"))throw new Error("Invalid Checksum");return l.toString("hex")},Eh=function(e,t){switch(t===void 0&&(t=Vt.MINIMAL),t){case Vt.STANDARD:return or(e," ",fn);case Vt.URI:return or(e,"-",fn);case Vt.MINIMAL:return or(e,"",Ch);default:throw new Error("Invalid style "+t)}},qh=function(e,t){switch(t===void 0&&(t=Vt.MINIMAL),t){case Vt.STANDARD:return _o(e," ");case Vt.URI:return _o(e,"-");case Vt.MINIMAL:return Sh(e);default:throw new Error("Invalid style "+t)}},un={decode:Eh,encode:qh,STYLES:Vt},Ph=globalThis&&globalThis.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),r=0,t=0;t<n;t++)for(var a=arguments[t],l=0,o=a.length;l<o;l++,r++)i[r]=a[l];return i},Mh=function(){function e(t,n,i,r){this.ur=t,this.fountainEncoder=new kh(t.cbor,n,i,r)}return Object.defineProperty(e.prototype,"fragmentsLength",{get:function(){return this.fountainEncoder.fragmentsLength},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fragments",{get:function(){return this.fountainEncoder.fragments},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"messageLength",{get:function(){return this.fountainEncoder.messageLength},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cbor",{get:function(){return this.ur.cbor},enumerable:!1,configurable:!0}),e.prototype.encodeWhole=function(){var t=this;return Ph(new Array(this.fragmentsLength)).map(function(){return t.nextPart()})},e.prototype.nextPart=function(){var t=this.fountainEncoder.nextPart();return this.fountainEncoder.isSinglePart()?e.encodeSinglePart(this.ur):e.encodePart(this.ur.type,t)},e.encodeUri=function(t,n){var i=n.join("/");return[t,i].join(":")},e.encodeUR=function(t){return e.encodeUri("ur",t)},e.encodePart=function(t,n){var i=n.seqNum+"-"+n.seqLength,r=un.encode(n.cbor().toString("hex"),un.STYLES.MINIMAL);return e.encodeUR([t,i,r])},e.encodeSinglePart=function(t){var n=un.encode(t.cbor.toString("hex"),un.STYLES.MINIMAL);return e.encodeUR([t.type,n])},e}(),vi=globalThis&&globalThis.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),r=0,t=0;t<n;t++)for(var a=arguments[t],l=0,o=a.length;l<o;l++,r++)i[r]=a[l];return i},Do=function(){function e(t,n){this._indexes=t,this._fragment=n}return Object.defineProperty(e.prototype,"indexes",{get:function(){return this._indexes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fragment",{get:function(){return this._fragment},enumerable:!1,configurable:!0}),e.fromEncoderPart=function(t){var n=Da(t.seqNum,t.seqLength,t.checksum),i=t.fragment;return new e(n,i)},e.prototype.isSimple=function(){return this.indexes.length===1},e}(),Ih=function(){function e(){this.result=void 0,this.expectedMessageLength=0,this.expectedChecksum=0,this.expectedFragmentLength=0,this.processedPartsCount=0,this.expectedPartIndexes=[],this.lastPartIndexes=[],this.queuedParts=[],this.receivedPartIndexes=[],this.mixedParts=[],this.simpleParts=[]}return e.prototype.validatePart=function(t){var n=this;if(this.expectedPartIndexes.length===0)vi(new Array(t.seqLength)).forEach(function(i,r){return n.expectedPartIndexes.push(r)}),this.expectedMessageLength=t.messageLength,this.expectedChecksum=t.checksum,this.expectedFragmentLength=t.fragment.length;else if(this.expectedPartIndexes.length!==t.seqLength||this.expectedMessageLength!==t.messageLength||this.expectedChecksum!==t.checksum||this.expectedFragmentLength!==t.fragment.length)return!1;return!0},e.prototype.reducePartByPart=function(t,n){if(Wd(t.indexes,n.indexes)){var i=Hd(t.indexes,n.indexes),r=ua(t.fragment,n.fragment);return new Do(i,r)}else return t},e.prototype.reduceMixedBy=function(t){var n=this,i=[];this.mixedParts.map(function(r){var a=r.value;return n.reducePartByPart(a,t)}).forEach(function(r){r.isSimple()?n.queuedParts.push(r):i.push({key:r.indexes,value:r})}),this.mixedParts=i},e.prototype.processSimplePart=function(t){var n=t.indexes[0];if(!this.receivedPartIndexes.includes(n))if(this.simpleParts.push({key:t.indexes,value:t}),this.receivedPartIndexes.push(n),go(this.receivedPartIndexes,this.expectedPartIndexes)){var i=this.simpleParts.map(function(l){var o=l.value;return o}).sort(function(l,o){return l.indexes[0]-o.indexes[0]}),r=e.joinFragments(i.map(function(l){return l.fragment}),this.expectedMessageLength),a=sa(r);a===this.expectedChecksum?this.result=r:this.error=new Od}else this.reduceMixedBy(t)},e.prototype.processMixedPart=function(t){var n=this;if(!this.mixedParts.some(function(r){var a=r.key;return go(a,t.indexes)})){var i=this.simpleParts.reduce(function(r,a){var l=a.value;return n.reducePartByPart(r,l)},t);i=this.mixedParts.reduce(function(r,a){var l=a.value;return n.reducePartByPart(r,l)},i),i.isSimple()?this.queuedParts.push(i):(this.reduceMixedBy(i),this.mixedParts.push({key:i.indexes,value:i}))}},e.prototype.processQueuedItem=function(){if(this.queuedParts.length!==0){var t=this.queuedParts.shift();t.isSimple()?this.processSimplePart(t):this.processMixedPart(t)}},e.prototype.receivePart=function(t){if(this.isComplete()||!this.validatePart(t))return!1;var n=Do.fromEncoderPart(t);for(this.lastPartIndexes=n.indexes,this.queuedParts.push(n);!this.isComplete()&&this.queuedParts.length>0;)this.processQueuedItem();return this.processedPartsCount+=1,!0},e.prototype.isComplete=function(){return Boolean(this.result!==void 0&&this.result.length>0)},e.prototype.isSuccess=function(){return Boolean(this.error===void 0&&this.isComplete())},e.prototype.resultMessage=function(){return this.isSuccess()?this.result:rt.Buffer.from([])},e.prototype.isFailure=function(){return this.error!==void 0},e.prototype.resultError=function(){return this.error?this.error.message:""},e.prototype.expectedPartCount=function(){return this.expectedPartIndexes.length},e.prototype.getExpectedPartIndexes=function(){return vi(this.expectedPartIndexes)},e.prototype.getReceivedPartIndexes=function(){return vi(this.receivedPartIndexes)},e.prototype.getLastPartIndexes=function(){return vi(this.lastPartIndexes)},e.prototype.estimatedPercentComplete=function(){if(this.isComplete())return 1;var t=this.expectedPartCount();return t===0?0:Math.min(.99,this.processedPartsCount/(t*1.75))},e.prototype.getProgress=function(){if(this.isComplete())return 1;var t=this.expectedPartCount();return t===0?0:this.receivedPartIndexes.length/t},e.joinFragments=function(t,n){return rt.Buffer.concat(t).slice(0,n)},e}(),Ah=function(){function e(t,n){if(t===void 0&&(t=new Ih),n===void 0&&(n="bytes"),this.fountainDecoder=t,this.type=n,!Di(n))throw new Error("Invalid UR type");this.expected_type=""}return e.decodeBody=function(t,n){var i=un.decode(n,un.STYLES.MINIMAL);return new xi(rt.Buffer.from(i,"hex"),t)},e.prototype.validatePart=function(t){return this.expected_type?this.expected_type===t:Di(t)?(this.expected_type=t,!0):!1},e.decode=function(t){var n=this.parse(t),i=n[0],r=n[1];if(r.length===0)throw new er;var a=r[0];return e.decodeBody(i,a)},e.parse=function(t){var n=t.toLowerCase(),i=n.slice(0,3);if(i!=="ur:")throw new fo;var r=n.slice(3).split("/"),a=r[0];if(r.length<2)throw new er;if(!Di(a))throw new ra;return[a,r.slice(1)]},e.parseSequenceComponent=function(t){var n=t.split("-");if(n.length!==2)throw new ho;var i=mr(Number(n[0])),r=Number(n[1]);if(i<1||r<1)throw new ho;return[i,r]},e.prototype.receivePart=function(t){if(this.result!==void 0)return!1;var n=e.parse(t),i=n[0],r=n[1];if(!this.validatePart(i))return!1;if(r.length===1)return this.result=e.decodeBody(i,r[0]),!0;if(r.length!==2)throw new er;var a=r[0],l=r[1],o=e.parseSequenceComponent(a),h=o[0],k=o[1],b=un.decode(l,un.STYLES.MINIMAL),S=Ca.fromCBOR(b);return h!==S.seqNum||k!==S.seqLength||!this.fountainDecoder.receivePart(S)?!1:(this.fountainDecoder.isSuccess()?this.result=new xi(this.fountainDecoder.resultMessage(),i):this.fountainDecoder.isFailure()&&(this.error=new fo),!0)},e.prototype.resultUR=function(){return this.result?this.result:new xi(rt.Buffer.from([]))},e.prototype.isComplete=function(){return!!(this.result&&this.result.cbor.length>0)},e.prototype.isSuccess=function(){return!this.error&&this.isComplete()},e.prototype.isError=function(){return this.error!==void 0},e.prototype.resultError=function(){return this.error?this.error.message:""},e.prototype.expectedPartCount=function(){return this.fountainDecoder.expectedPartCount()},e.prototype.expectedPartIndexes=function(){return this.fountainDecoder.getExpectedPartIndexes()},e.prototype.receivedPartIndexes=function(){return this.fountainDecoder.getReceivedPartIndexes()},e.prototype.lastPartIndexes=function(){return this.fountainDecoder.getLastPartIndexes()},e.prototype.estimatedPercentComplete=function(){return this.fountainDecoder.estimatedPercentComplete()},e.prototype.getProgress=function(){return this.fountainDecoder.getProgress()},e}();const Uh=ut({name:"SendPaymentRequest",mixins:[windowMixin],props:{},data:function(){return{}},watch:{},computed:{...Ie(ni,["showSendTokens","showLockInput","sendData"]),...Se(Ke,["activeMintUrl","mints"])},methods:{...Ee(Gt,["isLocked","isLockedToUs"]),...Ee(jt,["parseAndPayPaymentRequest"]),clickPaymentRequest:function(){this.parseAndPayPaymentRequest(this.sendData.paymentRequest,this.sendData.tokensBase64)},getPaymentRequestTransportType:function(e){if(!e||!e.transport)return"Unknown";console.log(`### getPaymentRequestTransportType: ${e}`);const t=e.transport;for(const n of t){if(n.type==ci.NOSTR)return"Nostr";if(n.type==ci.POST)return"HTTP"}},getPaymentRequestTarget:function(e){if(!e||!e.transport)return"Unknown";console.log(`### getPaymentRequestDestination: ${e}`);const t=e.transport;for(const n of t){if(n.type==ci.NOSTR)return`${n.target.slice(0,20)}..${n.target.slice(-10)}`;if(n.type==ci.POST)try{return new URL(n.target).hostname}catch(i){return console.error(`Invalid URL in transport.target: ${n.target}`,i),"Invalid URL"}}}}}),Bh={key:0,class:"q-pa-none q-ma-none q-mt-md"},$h={class:"q-mb-md text-center"},Rh={class:"q-mb-md text-center"},Fh={class:"q-mt-md q-mb-md text-center",style:{"white-space":"pre-wrap","word-wrap":"break-word","max-width":"350px",margin:"0 auto"}};function Lh(e,t,n,i,r,a){return e.sendData.paymentRequest?(F(),se("div",Bh,[E("div",$h,[m(J,{rounded:"",dense:"",color:"primary",class:"q-px-md",onClick:e.clickPaymentRequest},{default:v(()=>[m(Me,{name:"send",class:"q-pr-xs"}),W(" Pay via "+De(e.getPaymentRequestTransportType(e.sendData.paymentRequest)),1)]),_:1},8,["onClick"])]),E("div",Rh,[E("pre",Fh,De(e.getPaymentRequestTarget(e.sendData.paymentRequest))+`
      `,1)])])):re("",!0)}var Nh=ot(Uh,[["render",Lh]]);const Oh=ut({name:"NumericKeyboard",props:{modelValue:{type:String,default:"0"}},emits:["update:modelValue","done"],computed:{...Ie(et,["showNumericKeyboard"]),...Ie(bn,["useNumericKeyboard"])},methods:{addDigit(e){const t=this.modelValue||"0",n=t==="0"?e:t+e;this.$emit("update:modelValue",n)},backspace(){const e=this.modelValue||"0",t=e.length>1?e.slice(0,-1):"0";this.$emit("update:modelValue",t)},addComma(){const e=this.modelValue||"0";e.includes(".")||this.$emit("update:modelValue",e+".")},closeKeyboard(){this.useNumericKeyboard=!1,this.showNumericKeyboard=!1,Lo("Keyboard disabled. You can re-enable the keyboard in the settings.","bottom")},emitDone(){this.$emit("done")}}}),Vh={class:"keyboard-grid"};function zh(e,t,n,i,r,a){return F(),ne(Pt,{name:"slide-up-fade"},{default:v(()=>[e.showNumericKeyboard?(F(),ne(kt,{key:0,class:"numeric-keyboard q-pa-md q-pb-xl q-pt-lg",style:{position:"fixed",bottom:"0",left:"50%",transform:"translateX(-50%)",width:"100%","max-width":"650px"}},{default:v(()=>[E("div",Vh,[m(J,{flat:"",dense:"",class:"text-h5",onClick:t[0]||(t[0]=l=>e.addDigit("1"))},{default:v(()=>t[10]||(t[10]=[W("1")])),_:1}),m(J,{flat:"",dense:"",class:"text-h5",onClick:t[1]||(t[1]=l=>e.addDigit("2"))},{default:v(()=>t[11]||(t[11]=[W("2")])),_:1}),m(J,{flat:"",dense:"",class:"text-h5",onClick:t[2]||(t[2]=l=>e.addDigit("3"))},{default:v(()=>t[12]||(t[12]=[W("3")])),_:1}),m(J,{flat:"",dense:"",class:"text-h5",onClick:t[3]||(t[3]=l=>e.addDigit("4"))},{default:v(()=>t[13]||(t[13]=[W("4")])),_:1}),m(J,{flat:"",dense:"",class:"text-h5",onClick:t[4]||(t[4]=l=>e.addDigit("5"))},{default:v(()=>t[14]||(t[14]=[W("5")])),_:1}),m(J,{flat:"",dense:"",class:"text-h5",onClick:t[5]||(t[5]=l=>e.addDigit("6"))},{default:v(()=>t[15]||(t[15]=[W("6")])),_:1}),m(J,{flat:"",dense:"",class:"text-h5",onClick:t[6]||(t[6]=l=>e.addDigit("7"))},{default:v(()=>t[16]||(t[16]=[W("7")])),_:1}),m(J,{flat:"",dense:"",class:"text-h5",onClick:t[7]||(t[7]=l=>e.addDigit("8"))},{default:v(()=>t[17]||(t[17]=[W("8")])),_:1}),m(J,{flat:"",dense:"",class:"text-h5",onClick:t[8]||(t[8]=l=>e.addDigit("9"))},{default:v(()=>t[18]||(t[18]=[W("9")])),_:1}),m(J,{flat:"",dense:"",class:"text-h5",onClick:e.addComma},{default:v(()=>t[19]||(t[19]=[W(".")])),_:1},8,["onClick"]),m(J,{flat:"",dense:"",class:"text-h5",onClick:t[9]||(t[9]=l=>e.addDigit("0"))},{default:v(()=>t[20]||(t[20]=[W("0")])),_:1}),m(J,{flat:"",dense:"",class:"text-h5",onClick:e.backspace},{default:v(()=>[m(Me,{name:"backspace",size:"sm"})]),_:1},8,["onClick"]),m(J,{flat:"",dense:"",onClick:e.closeKeyboard},{default:v(()=>t[21]||(t[21]=[W("Close")])),_:1},8,["onClick"]),t[23]||(t[23]=E("br",null,null,-1)),m(J,{flat:"",dense:"",onClick:e.emitDone},{default:v(()=>t[22]||(t[22]=[W("Enter")])),_:1},8,["onClick"])])]),_:1})):re("",!0)]),_:1})}var Ta=ot(Oh,[["render",zh],["__scopeId","data-v-3f1fbef3"]]);/**
 * @license lucide-vue-next v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-vue-next v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yi={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=({size:e,strokeWidth:t=2,absoluteStrokeWidth:n,color:i,iconNode:r,name:a,class:l,...o},{slots:h})=>pe("svg",{...yi,width:e||yi.width,height:e||yi.height,stroke:i||yi.stroke,"stroke-width":n?Number(t)*24/Number(e):t,class:["lucide",`lucide-${jh(a??"icon")}`],...o},[...r.map(k=>pe(...k)),...h.default?[h.default()]:[]]);/**
 * @license lucide-vue-next v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=(e,t)=>(n,{slots:i})=>pe(Wh,{...n,iconNode:t,name:e},i);/**
 * @license lucide-vue-next v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=an("ChevronLeftIcon",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-vue-next v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=an("ClipboardIcon",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-vue-next v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=an("CoinsIcon",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-vue-next v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=an("FileTextIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=an("LockIcon",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-vue-next v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=an("NfcIcon",[["path",{d:"M6 8.32a7.43 7.43 0 0 1 0 7.36",key:"9iaqei"}],["path",{d:"M9.46 6.21a11.76 11.76 0 0 1 0 11.58",key:"1yha7l"}],["path",{d:"M12.91 4.1a15.91 15.91 0 0 1 .01 15.8",key:"4iu2gk"}],["path",{d:"M16.37 2a20.16 20.16 0 0 1 0 20",key:"sap9u2"}]]);/**
 * @license lucide-vue-next v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=an("ScanIcon",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-vue-next v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=an("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-vue-next v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=an("ZapIcon",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);var qe={},qt={};Object.defineProperty(qt,"__esModule",{value:!0});qt.encodeBase64ToJson=qt.encodeJsonToBase64=qt.encodeBase64toUint8=qt.encodeUint8toBase64Url=qt.encodeUint8toBase64=void 0;var si=Vo;function Gh(e){return si.Buffer.from(e).toString("base64")}qt.encodeUint8toBase64=Gh;function Yh(e){return si.Buffer.from(e).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}qt.encodeUint8toBase64Url=Yh;function Zh(e){return si.Buffer.from(e,"base64")}qt.encodeBase64toUint8=Zh;function Jh(e){var t=JSON.stringify(e);return nm(si.Buffer.from(t).toString("base64"))}qt.encodeJsonToBase64=Jh;function em(e){var t=si.Buffer.from(tm(e),"base64").toString(),n=JSON.parse(t);return n}qt.encodeBase64ToJson=em;function tm(e){return e.replace(/-/g,"+").replace(/_/g,"/").split("=")[0]}function nm(e){return e.replace(/\+/g,"-").replace(/\//g,"_").split("=")[0]}var $n={};Object.defineProperty($n,"__esModule",{value:!0});$n.TOKEN_PREFIX=$n.TOKEN_VERSION=void 0;var im="A";$n.TOKEN_VERSION=im;var rm="cashu";$n.TOKEN_PREFIX=rm;var wn={};Object.defineProperty(wn,"__esModule",{value:!0});wn.decodeCBOR=wn.encodeCBOR=void 0;function om(e){return typeof e=="number"||typeof e=="string"}function am(e){var t=[];return Fr(e,t),new Uint8Array(t)}wn.encodeCBOR=am;function Fr(e,t){if(e===null)t.push(246);else if(e===void 0)t.push(247);else if(typeof e=="boolean")t.push(e?245:244);else if(typeof e=="number")Ma(e,t);else if(typeof e=="string")Ia(e,t);else if(Array.isArray(e))lm(e,t);else if(e instanceof Uint8Array)sm(e,t);else if(typeof e=="object")um(e,t);else throw new Error("Unsupported type")}function Ma(e,t){if(e<24)t.push(e);else if(e<256)t.push(24,e);else if(e<65536)t.push(25,e>>8,e&255);else if(e<4294967296)t.push(26,e>>24,e>>16&255,e>>8&255,e&255);else throw new Error("Unsupported integer size")}function sm(e,t){var n=e.length;if(n<24)t.push(64+n);else if(n<256)t.push(88,n);else if(n<65536)t.push(89,n>>8&255,n&255);else if(n<4294967296)t.push(90,n>>24&255,n>>16&255,n>>8&255,n&255);else throw new Error("Byte string too long to encode");for(var i=0;i<e.length;i++)t.push(e[i])}function Ia(e,t){var n=new TextEncoder().encode(e),i=n.length;if(i<24)t.push(96+i);else if(i<256)t.push(120,i);else if(i<65536)t.push(121,i>>8&255,i&255);else if(i<4294967296)t.push(122,i>>24&255,i>>16&255,i>>8&255,i&255);else throw new Error("String too long to encode");for(var r=0;r<n.length;r++)t.push(n[r])}function lm(e,t){var n=e.length;if(n<24)t.push(128|n);else if(n<256)t.push(152,n);else if(n<65536)t.push(153,n>>8,n&255);else throw new Error("Unsupported array length");for(var i=0,r=e;i<r.length;i++){var a=r[i];Fr(a,t)}}function um(e,t){var n=Object.keys(e);Ma(n.length,t),t[t.length-1]|=160;for(var i=0,r=n;i<r.length;i++){var a=r[i];Ia(a,t),Fr(e[a],t)}}function cm(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=Mi(t,0);return n.value}wn.decodeCBOR=cm;function Mi(e,t){if(t>=e.byteLength)throw new Error("Unexpected end of data");var n=e.getUint8(t++),i=n>>5,r=n&31;switch(i){case 0:return dm(e,t,r);case 1:return fm(e,t,r);case 2:return hm(e,t,r);case 3:return mm(e,t,r);case 4:return gm(e,t,r);case 5:return pm(e,t,r);case 7:return ym(e,t,r);default:throw new Error("Unsupported major type: ".concat(i))}}function Vn(e,t,n){if(n<24)return{value:n,offset:t};if(n===24)return{value:e.getUint8(t++),offset:t};if(n===25){var i=e.getUint16(t,!1);return t+=2,{value:i,offset:t}}if(n===26){var i=e.getUint32(t,!1);return t+=4,{value:i,offset:t}}if(n===27){var r=e.getUint32(t,!1),a=e.getUint32(t+4,!1);return t+=8,{value:r*Math.pow(2,32)+a,offset:t}}throw new Error("Unsupported length: ".concat(n))}function dm(e,t,n){var i=Vn(e,t,n),r=i.value,a=i.offset;return{value:r,offset:a}}function fm(e,t,n){var i=Vn(e,t,n),r=i.value,a=i.offset;return{value:-1-r,offset:a}}function hm(e,t,n){var i=Vn(e,t,n),r=i.value,a=i.offset;if(a+r>e.byteLength)throw new Error("Byte string length exceeds data length");var l=new Uint8Array(e.buffer,e.byteOffset+a,r);return{value:l,offset:a+r}}function mm(e,t,n){var i=Vn(e,t,n),r=i.value,a=i.offset;if(a+r>e.byteLength)throw new Error("String length exceeds data length");var l=new Uint8Array(e.buffer,e.byteOffset+a,r),o=new TextDecoder().decode(l);return{value:o,offset:a+r}}function gm(e,t,n){for(var i=Vn(e,t,n),r=i.value,a=i.offset,l=[],o=a,h=0;h<r;h++){var k=Mi(e,o);l.push(k.value),o=k.offset}return{value:l,offset:o}}function pm(e,t,n){for(var i=Vn(e,t,n),r=i.value,a=i.offset,l={},o=a,h=0;h<r;h++){var k=Mi(e,o);if(!om(k.value))throw new Error("Invalid key type");var b=Mi(e,k.offset);l[k.value]=b.value,o=b.offset}return{value:l,offset:o}}function vm(e){var t=(e&31744)>>10,n=e&1023,i=e&32768?-1:1;return t===0?i*Math.pow(2,-14)*(n/1024):t===31?n?NaN:i*(1/0):i*Math.pow(2,t-15)*(1+n/1024)}function ym(e,t,n){if(n<24)switch(n){case 20:return{value:!1,offset:t};case 21:return{value:!0,offset:t};case 22:return{value:null,offset:t};case 23:return{value:void 0,offset:t};default:throw new Error("Unknown simple value: ".concat(n))}if(n===24)return{value:e.getUint8(t++),offset:t};if(n===25){var i=vm(e.getUint16(t,!1));return t+=2,{value:i,offset:t}}if(n===26){var i=e.getFloat32(t,!1);return t+=4,{value:i,offset:t}}if(n===27){var i=e.getFloat64(t,!1);return t+=8,{value:i,offset:t}}throw new Error("Unknown simple or float value: ".concat(n))}var Vi={};Object.defineProperty(Vi,"__esModule",{value:!0});Vi.PaymentRequest=void 0;var wm=qt,Co=wn,bm=Vo,km=function(){function e(t,n,i,r,a,l,o){o===void 0&&(o=!1),this.transport=t,this.id=n,this.amount=i,this.unit=r,this.mints=a,this.description=l,this.singleUse=o}return e.prototype.toEncodedRequest=function(){var t={t:this.transport.map(function(r){return{t:r.type,a:r.target,g:r.tags}})};this.id&&(t.i=this.id),this.amount&&(t.a=this.amount),this.unit&&(t.u=this.unit),this.mints&&(t.m=this.mints),this.description&&(t.d=this.description),this.singleUse&&(t.s=this.singleUse);var n=(0,Co.encodeCBOR)(t),i=bm.Buffer.from(n).toString("base64");return"creqA"+i},e.prototype.getTransport=function(t){return this.transport.find(function(n){return n.type===t})},e.fromEncodedRequest=function(t){if(!t.startsWith("creq"))throw new Error("unsupported pr: invalid prefix");var n=t[4];if(n!=="A")throw new Error("unsupported pr version");var i=t.slice(5),r=(0,wm.encodeBase64toUint8)(i),a=(0,Co.decodeCBOR)(r),l=a.t.map(function(o){return{type:o.t,target:o.a,tags:o.g}});return new e(l,a.i,a.a,a.u,a.m,a.d,a.s)},e}();Vi.PaymentRequest=km;var ei=oo&&oo.__assign||function(){return ei=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ei.apply(this,arguments)};Object.defineProperty(qe,"__esModule",{value:!0});qe.hasValidDleq=qe.stripDleq=qe.MessageQueue=qe.MessageNode=qe.decodePaymentRequest=qe.sumProofs=qe.sanitizeUrl=qe.joinUrls=qe.checkResponse=qe.isObj=qe.sortProofsById=qe.mergeUInt8Arrays=qe.deriveKeysetId=qe.handleTokens=qe.getDecodedToken=qe.getEncodedTokenV4=qe.getEncodedToken=gr=qe.getEncodedTokenV3=qe.bigIntStringify=qe.hasNonHexId=qe.numberToHexPadded64=qe.hexToNumber=qe.bytesToNumber=qe.hasCorrespondingKey=qe.getKeysetAmounts=qe.getKeepAmounts=qe.splitAmount=void 0;var Ii=qt,xo=$n,Et=nl,_m=il,Aa=wn,Dm=Vi,So=rl,Cm=ol;function Ua(e,t,n,i){if(n){if(n.reduce(function(a,l){return a+l},0)>e)throw new Error("Split is greater than total amount: ".concat(n.reduce(function(a,l){return a+l},0)," > ").concat(e));n.forEach(function(a){if(!Nr(a,t))throw new Error("Provided amount preferences do not match the amounts of the mint keyset.")}),e=e-n.reduce(function(a,l){return a+l},0)}else n=[];var r=Lr(t);return r.forEach(function(a){for(var l=Math.floor(e/a),o=0;o<l;++o)n?.push(a);e%=a}),n.sort(function(a,l){return i==="desc"?l-a:a-l})}qe.splitAmount=Ua;function xm(e,t,n,i){var r=[],a=e.map(function(b){return b.amount}),l=Lr(n,"asc");l.forEach(function(b){for(var S=a.filter(function(j){return j===b}).length,T=Math.max(i-S,0),I=0;I<T&&!(r.reduce(function(j,G){return j+G},0)+b>t);++I)r.push(b)});var o=t-r.reduce(function(b,S){return b+S},0);if(o){var h=Ua(o,n);h.forEach(function(b){r.push(b)})}var k=r.sort(function(b,S){return b-S});return k}qe.getKeepAmounts=xm;function Lr(e,t){return t===void 0&&(t="desc"),t=="desc"?Object.keys(e).map(function(n){return parseInt(n)}).sort(function(n,i){return i-n}):Object.keys(e).map(function(n){return parseInt(n)}).sort(function(n,i){return n-i})}qe.getKeysetAmounts=Lr;function Nr(e,t){return e in t}qe.hasCorrespondingKey=Nr;function Sm(e){return Or((0,Et.bytesToHex)(e))}qe.bytesToNumber=Sm;function Or(e){return BigInt("0x".concat(e))}qe.hexToNumber=Or;function Tm(e){return e.toString(16).padStart(64,"0")}qe.numberToHexPadded64=Tm;function To(e){return/^[a-f0-9]*$/i.test(e)}function Vr(e){return Array.isArray(e)?e.some(function(t){return!To(t.id)}):To(e.id)}qe.hasNonHexId=Vr;function Em(e,t){return typeof t=="bigint"?t.toString():t}qe.bigIntStringify=Em;function Ba(e){var t={token:[{mint:e.mint,proofs:e.proofs}]};return e.unit&&(t.unit=e.unit),e.memo&&(t.memo=e.memo),xo.TOKEN_PREFIX+xo.TOKEN_VERSION+(0,Ii.encodeJsonToBase64)(t)}var gr=qe.getEncodedTokenV3=Ba;function qm(e,t){var n=Vr(e.proofs);if(n||t?.version===3){if(t?.version===4)throw new Error("can not encode to v4 token if proofs contain non-hex keyset id");return Ba(e)}return $a(e)}qe.getEncodedToken=qm;function $a(e){e.proofs.forEach(function(S){if(S.dleq&&S.dleq.r==null)throw new Error("Missing blinding factor in included DLEQ proof")});var t=Vr(e.proofs);if(t)throw new Error("can not encode to v4 token if proofs contain non-hex keyset id");for(var n={},i=e.mint,r=0;r<e.proofs.length;r++){var a=e.proofs[r];n[a.id]?n[a.id].push(a):n[a.id]=[a]}var l={m:i,u:e.unit||"sat",t:Object.keys(n).map(function(S){return{i:(0,Et.hexToBytes)(S),p:n[S].map(function(T){var I;return ei({a:T.amount,s:T.secret,c:(0,Et.hexToBytes)(T.C)},T.dleq&&{d:{e:(0,Et.hexToBytes)(T.dleq.e),s:(0,Et.hexToBytes)(T.dleq.s),r:(0,Et.hexToBytes)((I=T.dleq.r)!==null&&I!==void 0?I:"00")}})})}})};e.memo&&(l.d=e.memo);var o=(0,Aa.encodeCBOR)(l),h="cashu",k="B",b=(0,Ii.encodeUint8toBase64Url)(o);return h+k+b}qe.getEncodedTokenV4=$a;function Pm(e){var t=["web+cashu://","cashu://","cashu:","cashu"];return t.forEach(function(n){!e.startsWith(n)||(e=e.slice(n.length))}),Ra(e)}qe.getDecodedToken=Pm;function Ra(e){var t=e.slice(0,1),n=e.slice(1);if(t==="A"){var i=(0,Ii.encodeBase64ToJson)(n);if(i.token.length>1)throw new Error("Multi entry token are not supported");var r=i.token[0],a={mint:r.mint,proofs:r.proofs,unit:i.unit||"sat"};return i.memo&&(a.memo=i.memo),a}else if(t==="B"){var l=(0,Ii.encodeBase64toUint8)(n),o=(0,Aa.decodeCBOR)(l),h=[];o.t.forEach(function(b){return b.p.forEach(function(S){h.push(ei({secret:S.s,C:(0,Et.bytesToHex)(S.c),amount:S.a,id:(0,Et.bytesToHex)(b.i)},S.d&&{dleq:{r:(0,Et.bytesToHex)(S.d.r),s:(0,Et.bytesToHex)(S.d.s),e:(0,Et.bytesToHex)(S.d.e)}}))})});var k={mint:o.m,proofs:h,unit:o.u||"sat"};return o.d&&(k.memo=o.d),k}throw new Error("Token version is not supported")}qe.handleTokens=Ra;function Mm(e){var t=Object.entries(e).sort(function(r,a){return+r[0]-+a[0]}).map(function(r){var a=r[1];return(0,Et.hexToBytes)(a)}).reduce(function(r,a){return Fa(r,a)},new Uint8Array),n=(0,_m.sha256)(t),i=Buffer.from(n).toString("hex").slice(0,14);return"00"+i}qe.deriveKeysetId=Mm;function Fa(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}qe.mergeUInt8Arrays=Fa;function Im(e){return e.sort(function(t,n){return t.id.localeCompare(n.id)})}qe.sortProofsById=Im;function La(e){return typeof e=="object"}qe.isObj=La;function Am(e){if(!!La(e)){if("error"in e&&e.error)throw new Error(e.error);if("detail"in e&&e.detail)throw new Error(e.detail)}}qe.checkResponse=Am;function Um(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.map(function(n){return n.replace(/(^\/+|\/+$)/g,"")}).join("/")}qe.joinUrls=Um;function Bm(e){return e.replace(/\/$/,"")}qe.sanitizeUrl=Bm;function $m(e){return e.reduce(function(t,n){return t+n.amount},0)}qe.sumProofs=$m;function Rm(e){return Dm.PaymentRequest.fromEncodedRequest(e)}qe.decodePaymentRequest=Rm;var Na=function(){function e(t){this._value=t,this._next=null}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"next",{get:function(){return this._next},set:function(t){this._next=t},enumerable:!1,configurable:!0}),e}();qe.MessageNode=Na;var Fm=function(){function e(){this._first=null,this._last=null,this._size=0}return Object.defineProperty(e.prototype,"first",{get:function(){return this._first},set:function(t){this._first=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this._last},set:function(t){this._last=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(t){this._size=t},enumerable:!1,configurable:!0}),e.prototype.enqueue=function(t){var n=new Na(t);return this._size===0||!this._last?(this._first=n,this._last=n):(this._last.next=n,this._last=n),this._size++,!0},e.prototype.dequeue=function(){if(this._size===0||!this._first)return null;var t=this._first;return this._first=t.next,t.next=null,this._size--,t.value},e}();qe.MessageQueue=Fm;function Lm(e){return e.map(function(t){var n=ei({},t);return delete n.dleq,delete n.dleqValid,n})}qe.stripDleq=Lm;function Nm(e,t){var n;if(e.dleq==null)return!1;var i={e:(0,Et.hexToBytes)(e.dleq.e),s:(0,Et.hexToBytes)(e.dleq.s),r:Or((n=e.dleq.r)!==null&&n!==void 0?n:"00")};if(!Nr(e.amount,t.keys))throw new Error("undefined key for amount ".concat(e.amount));var r=t.keys[e.amount];return!!(0,Cm.verifyDLEQProof_reblind)(new TextEncoder().encode(e.secret),i,(0,So.pointFromHex)(e.C),(0,So.pointFromHex)(r))}qe.hasValidDleq=Nm;const Om=ut({name:"SendTokenDialog",mixins:[windowMixin],components:{ChooseMint:Fi,TokenInformation:ea,SendPaymentRequest:Nh,NumericKeyboard:Ta,ScanIcon:Sn,NfcIcon:Rr},props:{},data:function(){return{baseURL:location.protocol+"//"+location.host+location.pathname,showAnimatedQR:!1,qrCodeFragment:"",qrInterval:null,encoder:null,showDeleteDialog:!1,p2pkInput:"",currentFragmentLength:150,fragmentLengthMedium:100,fragmentLengthShort:50,fragmentLengthLong:150,fragmentLengthLabel:"L",currentFragmentInterval:150,fragmentIntervalMedium:250,fragmentIntervalFast:150,framentInervalSlow:500,fragmentSpeedLabel:"F",isV4Token:!1,scanningCard:!1}},computed:{...Ie(ni,["showSendTokens","showLockInput","sendData"]),...Ie(pt,["camera","hasCamera"]),...Se(et,["tickerShort","canPasteFromClipboard","globalMutexLock","ndefSupported"]),...Ie(et,["showNumericKeyboard"]),...Se(Ke,["mints","activeProofs","activeUnit","activeUnitLabel","activeUnitCurrencyMultiplyer","activeMintUrl","activeMintBalance"]),...Se(bn,["checkSentTokens","includeFeesInSendAmount","nfcEncoding","useNumericKeyboard"]),...Se(Yn,["bitcoinPrice"]),...Se(yn,["tokenWorkerRunning"]),sumProofs:function(){return He.getProofs(He.decode(this.sendData.tokensBase64)).flat().reduce((t,n)=>t+=n.amount,0)},displayUnit:function(){return this.formatCurrency(this.sumProofs,this.tokenUnit)},tokenUnit:function(){return He.getUnit(He.decode(this.sendData.tokensBase64))},tokenMintUrl:function(){return He.getMint(He.decode(this.sendData.tokensBase64))},paidFees:function(){return this.sumProofs-Math.abs(this.sendData.historyAmount)},displayMemo:function(){return He.getMemo(He.decode(this.sendData.tokensBase64))},shortUrl:function(){return Xt(this.tokenMintUrl)},decodedToken:function(){return He.decode(this.sendData.tokensBase64)},runnerActive:function(){return this.tokenWorkerRunning},canSpendOffline:function(){if(!this.sendData.amount)return!1;let e=this.spendableProofs(this.activeProofs);const t=dt().wallet;let n=this.coinSelect(e,t,this.sendData.amount*this.activeUnitCurrencyMultiplyer,this.includeFeesInSendAmount);const i=this.includeFeesInSendAmount?this.getFeesForProofs(n):0;return n.flat().reduce((a,l)=>a+=l.amount,0)==this.sendData.amount*this.activeUnitCurrencyMultiplyer+i}},watch:{"sendData.tokensBase64":function(e){if(this.showAnimatedQR=!1,!e.length)return;const n=He.decode(e).proofs;if(n.length)n.length<=2?this.qrCodeFragment=e:(this.showAnimatedQR=!0,this.qrCodeFragment="",this.startQrCodeLoop());else return;this.isV4Token=e.startsWith("cashuB")},showSendTokens:function(e){e?this.$nextTick(()=>{this.sendData.tokensBase64.length?this.showNumericKeyboard=!1:this.showNumericKeyboard=!0}):(clearInterval(this.qrInterval),this.sendData.data="",this.sendData.tokensBase64="")}},methods:{...Ee(yn,["clearAllWorkers"]),...Ee(dt,["send","sendToLock","coinSelect","spendableProofs","getFeesForProofs","onTokenPaid","mintWallet"]),...Ee(jo,["serializeProofs"]),...Ee(Qt,["addPendingToken","setTokenPaid","deleteToken"]),...Ee(Gt,["isValidPubkey"]),...Ee(pt,["closeCamera","showCamera"]),...Ee(Ke,["toggleUnit"]),decodeToken:function(e){return He.decode(e)},getProofs:function(e){return He.getProofs(e)},getAmount:function(e){return He.getAmount(e)},getUnit:function(e){return He.getUnit(e)},getMint:function(e){return He.getMint(e)},startQrCodeLoop:async function(){if(this.sendData.tokensBase64.length==0)return;const e=Jo.Buffer.from(this.sendData.tokensBase64),t=xi.fromBuffer(e),n=0;this.encoder=new Mh(t,this.currentFragmentLength,n),clearInterval(this.qrInterval),this.qrInterval=setInterval(()=>{this.qrCodeFragment=this.encoder.nextPart()},this.currentFragmentInterval)},updateQrCode:function(){this.qrCodeFragment=this.encoder.nextPart()},changeSpeed:function(){this.currentFragmentInterval==this.fragmentIntervalMedium?(this.currentFragmentInterval=this.framentInervalSlow,this.fragmentSpeedLabel="S"):this.currentFragmentInterval==this.framentInervalSlow?(this.currentFragmentInterval=this.fragmentIntervalFast,this.fragmentSpeedLabel="F"):(this.currentFragmentInterval=this.fragmentIntervalMedium,this.fragmentSpeedLabel="M"),console.log("### this.currentFragmentInterval",this.currentFragmentInterval),this.startQrCodeLoop()},changeSize:function(){this.currentFragmentLength==this.fragmentLengthMedium?(this.currentFragmentLength=this.fragmentLengthShort,this.fragmentLengthLabel="S"):this.currentFragmentLength==this.fragmentLengthShort?(this.currentFragmentLength=this.fragmentLengthLong,this.fragmentLengthLabel="L"):(this.currentFragmentLength=this.fragmentLengthMedium,this.fragmentLengthLabel="M"),console.log("### this.currentFragmentLength",this.currentFragmentLength),this.startQrCodeLoop()},toggleTokenEncoding:function(){const e=al(this.sendData.tokensBase64);if(this.sendData.tokensBase64.startsWith("cashuA"))try{this.sendData.tokensBase64=sl(e)}catch{console.log("### Could not encode token to V4"),this.sendData.tokensBase64=gr(e)}else this.sendData.tokensBase64=gr(e)},deleteThisToken:function(){this.deleteToken(this.sendData.tokensBase64),this.showSendTokens=!1,this.showDeleteDialog=!1,this.clearAllWorkers()},writeTokensToCard:function(){if(!this.scanningCard)try{this.ndef=new NDEFReader,this.controller=new AbortController;const e=this.controller.signal;this.ndef.scan({signal:e}).then(()=>{console.log("> Scan started"),this.ndef.onreadingerror=t=>{console.error(`Cannot read NDEF data! ${t}`),pn("Cannot read data from the NFC tag"),this.controller.abort(),this.scanningCard=!1},this.ndef.onreading=({message:t,serialNumber:n})=>{console.log(`Read card ${n}`),this.controller.abort(),this.scanningCard=!1;try{let i=[];switch(this.nfcEncoding){case"text":i=[{recordType:"text",data:`${this.sendData.tokensBase64}`}];break;case"weburl":i=[{recordType:"url",data:`${window.location}#token=${this.sendData.tokensBase64}`}];break;case"binary":throw new Error("Binary encoding not supported yet");default:throw new Error(`Unknown NFC encoding: ${this.nfcEncoding}`)}this.ndef.write({records:i},{overwrite:!0}).then(()=>{console.log("Successfully flashed token to card!"),zo("Successfully flashed token to card!"),this.showSendTokens=!1}).catch(r=>{console.error(`NFC write failed: The card may not have enough capacity (needed ${i[0].data.length} bytes).`),pn(`The card may not have enough capacity (needed ${i[0].data.length} bytes).`,"NFC write failed")})}catch(i){console.error(`NFC error: ${i.message}`),pn(`${i.message}`,"NFC error")}},this.scanningCard=!0}).catch(t=>{console.error(`NFC error: ${t.message}`),pn(`${err.message}`,"NFC error"),this.scanningCard=!1}),Si("This will overwrite your card!")}catch(e){console.error(`NFC error: ${e.message}`),pn(`${err.message}`,"NFC error"),this.scanningCard=!1}},closeCardScanner:function(){this.controller.abort(),this.scanningCard=!1},lockTokens:async function(){let e=this.sendData.amount;(this.activeUnit==="usd"||this.activeUnit=="eur")&&(e=e*100);try{const t=this.mintWallet(this.activeMintUrl,this.activeUnit);let{_:n,sendProofs:i}=await this.sendToLock(this.activeProofs,t,e,this.sendData.p2pkPubkey);this.sendData.tokens=i,this.sendData.tokensBase64=this.serializeProofs(i);const r={amount:-this.sendData.amount,token:this.sendData.tokensBase64,unit:this.activeUnit,mint:this.activeMintUrl};this.addPendingToken(r),this.g.offline||this.onTokenPaid(r)}catch(t){console.error(t)}},sendTokens:async function(){if(this.showNumericKeyboard=!1,this.sendData.p2pkPubkey&&this.isValidPubkey(this.sendData.p2pkPubkey)){await this.lockTokens();return}try{let e=this.sendData.amount*this.activeUnitCurrencyMultiplyer;const t=this.mintWallet(this.activeMintUrl,this.activeUnit);let{_:n,sendProofs:i}=await this.send(this.activeProofs,t,e,!0,this.includeFeesInSendAmount);this.sendData.tokens=i,this.sendData.tokensBase64=this.serializeProofs(i),this.sendData.historyAmount=-this.sendData.amount*this.activeUnitCurrencyMultiplyer;const r={amount:-e,token:this.sendData.tokensBase64,unit:this.activeUnit,mint:this.activeMintUrl,paymentRequest:this.sendData.paymentRequest};this.addPendingToken(r),this.g.offline||this.onTokenPaid(r)}catch(e){console.error(e)}},pasteToP2PKField:async function(){console.log("pasteToParseDialog");const e=await et().pasteFromClipboard();this.sendData.p2pkPubkey=e.trim()}}}),Vm={key:1},zm={class:"row items-center no-wrap q-mb-sm q-pr-lg q-py-lg"},jm={class:"col-9"},Wm={class:"text-h6"},Hm={key:0,class:"q-ml-xs text-subtitle2 text-grey-6"},Km={class:"col-3",style:{height:"30px"}},Qm={class:"row items-center no-wrap q-my-sm q-py-none"},Xm={class:"col-12"},Gm={key:0,class:"row items-center no-wrap"},Ym={class:"col-4 q-mx-md"},Zm={key:0,class:"row q-mt-lg"},Jm={key:1,class:"row"},eg={key:1,class:"row q-mt-lg"},tg={key:2,class:"text-center q-mb-xs"},ng={key:0,class:"text-center q-mb-md"},ig={class:"q-pb-xs q-ba-none q-gutter-sm"},rg={class:"row justify-center"},og={class:"row justify-center q-pt-sm"},ag={key:0,class:"row justify-center q-pt-sm"},sg={class:"row justify-center q-pt-md"},lg={key:1,class:"row justify-center q-pt-sm"},ug={class:"row q-mt-lg"},cg={class:"row items-center no-wrap q-my-sm q-py-none"},dg={class:"col-12"},fg={class:"row q-mt-lg"};function hg(e,t,n,i,r,a){const l=xe("NumericKeyboard"),o=xe("ChooseMint"),h=xe("ScanIcon"),k=xe("vue-qrcode"),b=xe("TokenInformation"),S=xe("SendPaymentRequest"),T=xe("NfcIcon");return F(),se(Tt,null,[m(Dt,{modelValue:e.showSendTokens,"onUpdate:modelValue":t[9]||(t[9]=I=>e.showSendTokens=I),position:"top",maximized:e.$q.screen.lt.sm,"backdrop-filter":"blur(2px) brightness(60%)","transition-show":"fade","transition-hide":"fade","no-backdrop-dismiss":"","full-height":"",onShow:e.onDialogShown},{default:v(()=>[m(kt,{class:"q-pa-none q-pt-none qcard"},{default:v(()=>[e.showNumericKeyboard&&e.useNumericKeyboard?(F(),ne(l,{key:0,"model-value":e.sendData.amount,"onUpdate:modelValue":t[0]||(t[0]=I=>e.sendData.amount=I),onDone:e.sendTokens},null,8,["model-value","onDone"])):re("",!0),e.sendData.tokens?(F(),se("div",tg,[m(gt,{class:"q-pa-none q-pt-md"},{default:v(()=>[e.qrCodeFragment?(F(),se("div",ng,[m(Ri,{ratio:1,class:"q-mx-none"},{default:v(()=>[m(k,{value:e.qrCodeFragment,options:{width:400},class:"rounded-borders",onClick:t[5]||(t[5]=I=>e.copyText(e.sendData.tokensBase64))},null,8,["value"])]),_:1})])):re("",!0),E("div",ig,[e.showAnimatedQR?(F(),ne(J,{key:0,flat:"",style:{"font-size":"10px"},color:"grey",class:"q-ma-none",onClick:e.changeSpeed},{default:v(()=>[m(Me,{name:"speed",style:{"margin-right":"8px"}}),W(" Speed: "+De(e.fragmentSpeedLabel),1)]),_:1},8,["onClick"])):re("",!0),m(cn,{color:e.isV4Token?"grey":"primary",label:e.isV4Token?"V4":"V3",class:"q-my-sm q-mx-md cursor-pointer",onClick:e.toggleTokenEncoding,outline:e.isV4Token},null,8,["color","label","onClick","outline"]),e.showAnimatedQR?(F(),ne(J,{key:1,flat:"",style:{"font-size":"10px"},class:"q-ma-none",color:"grey",onClick:e.changeSize},{default:v(()=>[m(Me,{name:"zoom_in",style:{"margin-right":"8px"}}),W(" Size: "+De(e.fragmentLengthLabel),1)]),_:1},8,["onClick"])):re("",!0)]),m(gt,{class:"q-pa-sm"},{default:v(()=>[E("div",rg,[m(Le,{overline:"",class:"q-mb-sm text-white",style:{"font-size":"1rem"}},{default:v(()=>[W(De(e.sendData.historyAmount&&e.sendData.historyAmount<0?"Sent":"Received")+" Ecash",1)]),_:1})]),E("div",og,[m(Le,{style:{"font-size":"30px"},class:"text-weight-bold"},{default:v(()=>[e.runnerActive?(F(),ne(xd,{key:0,color:"primary",size:"0.8em",class:"q-mr-md"})):re("",!0),E("strong",null,De(e.displayUnit),1)]),_:1})]),e.paidFees?(F(),se("div",ag,[m(Le,{class:"text-weight-bold"},{default:v(()=>[W(" Fee: "+De(e.formatCurrency(e.paidFees,e.tokenUnit)),1)]),_:1})])):re("",!0),E("div",sg,[m(b,{encodedToken:e.sendData.tokensBase64,showAmount:!1,showP2PKCheck:!1},null,8,["encodedToken"])]),e.sendData.paymentRequest?(F(),se("div",lg,[m(S)])):re("",!0),E("div",ug,[m(J,{class:"q-mx-sm",size:"md",flat:"",dense:"",onClick:t[6]||(t[6]=I=>e.copyText(e.sendData.tokensBase64))},{default:v(()=>t[19]||(t[19]=[W("Copy")])),_:1}),m(J,{class:"q-mr-sm",color:"grey",size:"md",dense:"",icon:"link",flat:"",onClick:t[7]||(t[7]=I=>e.copyText(e.baseURL+"#token="+e.sendData.tokensBase64))},{default:v(()=>[m(yt,null,{default:v(()=>t[20]||(t[20]=[W("Copy link")])),_:1})]),_:1}),e.hasCamera&&!e.sendData.paymentRequest&&e.sendData.historyAmount<0?(F(),ne(J,{key:0,unelevated:"",dense:"",class:"q-mx-sm",onClick:e.showCamera},{default:v(()=>[m(h)]),_:1},8,["onClick"])):re("",!0),e.ndefSupported&&!e.sendData.paymentRequest&&e.sendData.historyAmount<0?(F(),ne(J,{key:1,unelevated:"",dense:"",disabled:e.scanningCard,loading:e.scanningCard,class:"q-mx-sm",size:"md",onClick:e.writeTokensToCard,flat:""},{loading:v(()=>[m(Ui,{onClick:e.closeCardScanner},null,8,["onClick"])]),default:v(()=>[m(T),m(yt,null,{default:v(()=>[W(De(e.ndefSupported?"Flash to NFC card":"NDEF unsupported"),1)]),_:1})]),_:1},8,["disabled","loading","onClick"])):re("",!0),m(J,{class:"q-mx-none",color:"grey",icon:"delete",size:"md",onClick:t[8]||(t[8]=I=>{e.showDeleteDialog=!0,e.closeCardScanner()}),flat:""},{default:v(()=>[m(yt,null,{default:v(()=>t[21]||(t[21]=[W("Delete from history")])),_:1})]),_:1}),it((F(),ne(J,{onClick:e.closeCardScanner,flat:"",color:"grey",class:"q-ml-auto"},{default:v(()=>t[22]||(t[22]=[W("Close")])),_:1},8,["onClick"])),[[lt]])])]),_:1})]),_:1})])):(F(),se("div",Vm,[m(gt,{class:"q-pa-lg q-pt-md"},{default:v(()=>[E("div",zm,[E("div",jm,[E("span",Wm,"Send "+De(e.sendData.amount?e.formatCurrency(e.sendData.amount*e.activeUnitCurrencyMultiplyer,e.activeUnit):"Ecash"),1),e.sendData.amount&&e.bitcoinPrice&&e.activeUnit=="sat"?(F(),se("span",Hm," ("+De(e.formatCurrency(e.bitcoinPrice/1e8*e.sendData.amount*e.activeUnitCurrencyMultiplyer,"USD",!0))+") ",1)):re("",!0)]),E("div",Km,[m(Pt,{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:v(()=>[e.canSpendOffline&&!e.sendData.p2pkPubkey&&!e.showLockInput?(F(),ne(cn,{key:0,outline:"",rounded:"",color:"grey",class:"q-mr-auto q-pl-sm q-ml-md q-pr-sm q-my-xs q-mt-xs",size:"lg"},{default:v(()=>[m(Me,{name:"check",color:"primary",class:"q-mr-sm",size:"sm"}),t[11]||(t[11]=E("span",{class:"text-subtitle2 text-weight-medium"},"Offline",-1))]),_:1})):re("",!0)]),_:1})])]),E("div",Qm,[E("div",Xm,[m(o)])]),m(_t,{type:"number",modelValue:e.sendData.amount,"onUpdate:modelValue":t[2]||(t[2]=I=>e.sendData.amount=I),modelModifiers:{number:!0},label:"Amount ("+e.tickerShort+") *",mask:"#","fill-mask":"0","reverse-fill-mask":"",round:"",outlined:"",autofocus:"",class:"q-mb-lg",onKeyup:Kt(e.sendTokens,["enter"])},{default:v(()=>[m(J,{flat:"",color:"primary",onClick:t[1]||(t[1]=I=>e.toggleUnit()),label:e.activeUnitLabel},null,8,["label"])]),_:1},8,["modelValue","label","onKeyup"]),m(Pt,{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:v(()=>[e.showLockInput?(F(),se("div",Gm,[E("div",{class:sr(e.sendData.p2pkPubkey?"col-12":"col-8")},[m(_t,{modelValue:e.sendData.p2pkPubkey,"onUpdate:modelValue":t[3]||(t[3]=I=>e.sendData.p2pkPubkey=I),label:e.sendData.p2pkPubkey&&!e.isValidPubkey(e.sendData.p2pkPubkey)?"Invalid public key":"Receiver public key",outlined:"",clearable:"",color:e.sendData.p2pkPubkey&&!e.isValidPubkey(e.sendData.p2pkPubkey)?"red":"",onKeyup:Kt(e.lockTokens,["enter"])},null,8,["modelValue","label","color","onKeyup"])],2),E("div",Ym,[e.canPasteFromClipboard&&!e.sendData.p2pkPubkey?(F(),ne(J,{key:0,unelevated:"",icon:"content_paste",onClick:e.pasteToP2PKField},{default:v(()=>[m(yt,null,{default:v(()=>t[12]||(t[12]=[W("Paste")])),_:1})]),_:1},8,["onClick"])):re("",!0),e.sendData.p2pkPubkey?re("",!0):(F(),ne(J,{key:1,align:"center",flat:"",outline:"",color:"primary",round:"",onClick:e.showCamera},{default:v(()=>[m(h,{size:"1.5em"})]),_:1},8,["onClick"]))])])):re("",!0)]),_:1}),e.activeMintBalance()>=e.sendData.amount?(F(),se("div",Zm,[e.sendData.tokens?re("",!0):(F(),ne(J,{key:0,disable:e.sendData.amount==null||e.sendData.amount<=0||e.sendData.p2pkPubkey!=""&&!e.isValidPubkey(e.sendData.p2pkPubkey),onClick:e.sendTokens,color:"primary",rounded:"",type:"submit",loading:e.globalMutexLock},{loading:v(()=>[m(Ot)]),default:v(()=>[t[13]||(t[13]=W("Send "))]),_:1},8,["disable","onClick","loading"])),e.sendData.p2pkPubkey&&e.isValidPubkey(e.sendData.p2pkPubkey)?(F(),se("div",Jm,[m(Pt,{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:v(()=>[m(dn,{outline:"",color:"primary",icon:"lock",class:"q-ml-md q-pa-md"},{default:v(()=>t[14]||(t[14]=[W(" Locked ")])),_:1})]),_:1})])):re("",!0),m(Pt,{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:v(()=>[e.sendData.amount>0&&!e.showLockInput&&e.activeMintBalance()>=e.sendData.amount?(F(),ne(J,{key:0,disable:e.sendData.p2pkPubkey==null||e.sendData.amount<=0,color:"primary",class:"q-ml-sm",rounded:"",flat:"",onClick:t[4]||(t[4]=I=>e.showLockInput=!0)},{default:v(()=>t[15]||(t[15]=[W(" Lock")])),_:1},8,["disable"])):re("",!0)]),_:1}),it((F(),ne(J,{rounded:"",flat:"",color:"grey",class:"q-ml-auto"},{default:v(()=>t[16]||(t[16]=[W("Close")])),_:1})),[[lt]])])):(F(),se("div",eg,[m(J,{unelevated:"",rounded:"",disabled:"",color:"yellow","text-color":"black"},{default:v(()=>t[17]||(t[17]=[W("Too much")])),_:1}),it((F(),ne(J,{rounded:"",flat:"",color:"grey",class:"q-ml-auto"},{default:v(()=>t[18]||(t[18]=[W("Close")])),_:1})),[[lt]])]))]),_:1})]))]),_:1})]),_:1},8,["modelValue","maximized","onShow"]),m(Dt,{modelValue:e.showDeleteDialog,"onUpdate:modelValue":t[10]||(t[10]=I=>e.showDeleteDialog=I)},{default:v(()=>[m(kt,{class:"q-pa-lg q-pt-md qcard"},{default:v(()=>[m(gt,{class:"q-pa-none"},{default:v(()=>[t[27]||(t[27]=E("div",{class:"row items-center no-wrap q-mb-sm"},[E("div",{class:"col-12"},[E("span",{class:"text-h6"},"Delete Ecash")])],-1)),E("div",cg,[E("div",dg,[m(Le,null,{default:v(()=>t[23]||(t[23]=[W(" Are you sure you want to delete this transaction from your history? ")])),_:1}),m(Le,{class:"q-pt-md text-weight-bold"},{default:v(()=>t[24]||(t[24]=[W(" Warning: This action cannot be undone and there is no way to recover the token. ")])),_:1})])]),E("div",fg,[m(J,{onClick:e.deleteThisToken,color:"negative",rounded:"",class:"q-mr-sm"},{default:v(()=>t[25]||(t[25]=[W("Delete")])),_:1},8,["onClick"]),it((F(),ne(J,{rounded:"",flat:"",color:"grey",class:"q-ml-auto"},{default:v(()=>t[26]||(t[26]=[W("Cancel")])),_:1})),[[lt]])])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}var mg=ot(Om,[["render",hg]]);const gg=1.7778;var pg=$t({name:"QImg",props:{...Ks,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:gg},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:t,emit:n}){const i=Re(e.initialRatio),r=Qs(e,i),a=Yt(),{registerTimeout:l,removeTimeout:o}=Xn(),{registerTimeout:h,removeTimeout:k}=Xn(),b=ae(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),S=ae(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),T=[Re(null),Re(b.value)],I=Re(0),j=Re(!1),G=Re(!1),X=ae(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),oe=ae(()=>({width:e.width,height:e.height})),H=ae(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),te=ae(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function ue(){if(k(),e.loadingShowDelay===0){j.value=!0;return}h(()=>{j.value=!0},e.loadingShowDelay)}function _e(){k(),j.value=!1}function we({target:x}){wi(a)===!1&&(o(),i.value=x.naturalHeight===0?.5:x.naturalWidth/x.naturalHeight,fe(x,1))}function fe(x,q){q===1e3||wi(a)===!0||(x.complete===!0?g(x):l(()=>{fe(x,q+1)},50))}function g(x){wi(a)!==!0&&(I.value=I.value^1,T[I.value].value=null,_e(),x.getAttribute("__qerror")!=="true"&&(G.value=!1),n("load",x.currentSrc||x.src))}function _(x){o(),_e(),G.value=!0,T[I.value].value=S.value,T[I.value^1].value=b.value,n("error",x)}function C(x){const q=T[x].value,B={key:"img_"+x,class:H.value,style:te.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...q};return I.value===x?Object.assign(B,{class:B.class+"current",onLoad:we,onError:_}):B.class+="loaded",pe("div",{class:"q-img__container absolute-full",key:"img"+x},pe("img",B))}function O(){return j.value===!1?pe("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},ti(t[G.value===!0?"error":"default"])):pe("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},t.loading!==void 0?t.loading():e.noSpinner===!0?void 0:[pe(Ui,{color:e.spinnerColor,size:e.spinnerSize})])}{let x=function(){xt(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,q=>{o(),G.value=!1,q===null?(_e(),T[I.value^1].value=b.value):ue(),T[I.value].value=q},{immediate:!0})};ws.value===!0?Ai(x):x()}return()=>{const x=[];return r.value!==null&&x.push(pe("div",{key:"filler",style:r.value})),T[0].value!==null&&x.push(C(0)),T[1].value!==null&&x.push(C(1)),x.push(pe(Pt,{name:"q-transition--fade"},O)),pe("div",{key:"main",class:X.value,style:oe.value,role:"img","aria-label":e.alt},x)}}}),Eo=$t({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:t,emit:n}){const i=Yt(),r=Re(null);let a=0;const l=[];function o(I){const j=typeof I=="boolean"?I:e.noErrorFocus!==!0,G=++a,X=(te,ue)=>{n(`validation${te===!0?"Success":"Error"}`,ue)},oe=te=>{const ue=te.validate();return typeof ue.then=="function"?ue.then(_e=>({valid:_e,comp:te}),_e=>({valid:!1,comp:te,err:_e})):Promise.resolve({valid:ue,comp:te})};return(e.greedy===!0?Promise.all(l.map(oe)).then(te=>te.filter(ue=>ue.valid!==!0)):l.reduce((te,ue)=>te.then(()=>oe(ue).then(_e=>{if(_e.valid===!1)return Promise.reject(_e)})),Promise.resolve()).catch(te=>[te])).then(te=>{if(te===void 0||te.length===0)return G===a&&X(!0),!0;if(G===a){const{comp:ue,err:_e}=te[0];if(_e!==void 0&&console.error(_e),X(!1,ue),j===!0){const we=te.find(({comp:fe})=>typeof fe.focus=="function"&&wi(fe.$)===!1);we!==void 0&&we.comp.focus()}}return!1})}function h(){a++,l.forEach(I=>{typeof I.resetValidation=="function"&&I.resetValidation()})}function k(I){I!==void 0&&Bt(I);const j=a+1;o().then(G=>{j===a&&G===!0&&(e.onSubmit!==void 0?n("submit",I):I!==void 0&&I.target!==void 0&&typeof I.target.submit=="function"&&I.target.submit())})}function b(I){I!==void 0&&Bt(I),n("reset"),tn(()=>{h(),e.autofocus===!0&&e.noResetFocus!==!0&&S()})}function S(){Wo(()=>{if(r.value===null)return;const I=r.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||r.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||r.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(r.value.querySelectorAll("[tabindex]"),j=>j.tabIndex!==-1);I?.focus({preventScroll:!0})})}Io(bs,{bindComponent(I){l.push(I)},unbindComponent(I){const j=l.indexOf(I);j!==-1&&l.splice(j,1)}});let T=!1;return yr(()=>{T=!0}),wr(()=>{T===!0&&e.autofocus===!0&&S()}),Ai(()=>{e.autofocus===!0&&S()}),Object.assign(i.proxy,{validate:o,resetValidation:h,submit:k,reset:b,focus:S,getValidationComponents:()=>l}),()=>pe("form",{class:"q-form",ref:r,onSubmit:k,onReset:b},ti(t.default))}});const vg=ut({name:"PayInvoiceDialog",mixins:[windowMixin],components:{ChooseMint:Fi,ToggleUnit:xr,ScanIcon:Sn},props:{},data:function(){return{}},watch:{activeMintUrl:async function(){this.payInvoiceData.show&&await this.meltQuoteInvoiceData()},activeUnit:async function(){this.payInvoiceData.show&&await this.meltQuoteInvoiceData()}},computed:{...Se(et,["tickerShort","globalMutexLock"]),...Ie(pt,["camera","hasCamera"]),...Se(dt,["payInvoiceData"]),...Se(Ke,["activeMintUrl","activeProofs","mints","proofs","activeUnit","activeBalance","activeMintBalance"]),...Se(Yn,["bitcoinPrice"]),canPasteFromClipboard:function(){return window.isSecureContext&&navigator.clipboard&&navigator.clipboard.readText},enoughActiveBalance:function(){return this.activeMintBalance()>=this.payInvoiceData.meltQuote.response.amount}},methods:{...Ee(dt,["meltInvoiceData","meltQuoteInvoiceData","decodeRequest","lnurlPaySecond"]),...Ee(pt,["closeCamera","showCamera"]),canPay:function(){return this.payInvoiceData.invoice?payInvoiceData.meltQuote.response.amount<=this.activeBalance:!1},closeParseDialog:function(){setTimeout(()=>{clearInterval(this.payInvoiceData.paymentChecker)},1e4)},decodeAndQuote:async function(e){await this.decodeRequest(e)},pasteToParseDialog:async function(){console.log("pasteToParseDialog");const e=await et().pasteFromClipboard();e&&(this.payInvoiceData.input.request=e.trim())},handleMeltButton:function(){if(this.payInvoiceData.blocking)throw new Error("already processing an invoice.");this.meltInvoiceData()}},created:function(){}}),yg={key:0},wg={class:"row items-center no-wrap q-mb-sm"},bg={class:"col-10"},kg={key:0},_g={class:"q-my-none inline-block"},Dg={key:0,class:"q-ml-xs text-subtitle2 text-grey-6"},Cg={key:1,class:"q-my-none"},xg={key:2,class:"q-my-none"},Sg={class:"col-2"},Tg={class:"text-wrap"},Eg={key:0},qg={class:"col-12"},Pg={key:0,class:"row q-mt-lg"},Mg={key:1,class:"row q-mt-lg"},Ig={key:1},Ag={key:0,class:"q-my-none text-h6 text-center"},Ug={key:1,class:"q-my-none text-h6 text-center"},Bg={key:2,class:"row"},$g={class:"col text-justify text-italic"},Rg={key:0,class:"col-4 q-pl-md"},Fg={class:"row"},Lg={class:"col"},Ng={key:0,class:"col-8 q-pl-md"},Og={class:"row q-mt-lg"},Vg={key:2},zg={class:"row q-mt-lg"};function jg(e,t,n,i,r,a){const l=xe("ToggleUnit"),o=xe("ChooseMint"),h=xe("ScanIcon");return e.camera.show?re("",!0):(F(),ne(Dt,{key:0,modelValue:e.payInvoiceData.show,"onUpdate:modelValue":t[6]||(t[6]=k=>e.payInvoiceData.show=k),onHide:e.closeParseDialog,position:"top",maximized:e.$q.screen.lt.sm,"backdrop-filter":"blur(2px) brightness(60%)","transition-show":"fade","transition-hide":"fade","no-backdrop-dismiss":"","full-height":""},{default:v(()=>[m(kt,{class:"q-pa-lg q-pt-xl qcard"},{default:v(()=>[e.payInvoiceData.invoice?(F(),se("div",yg,[E("div",wg,[E("div",bg,[e.payInvoiceData.meltQuote.response&&e.payInvoiceData.meltQuote.response.amount>0?(F(),se("div",kg,[E("h6",_g," Pay "+De(e.formatCurrency(e.payInvoiceData.meltQuote.response.amount,e.activeUnit,!0)),1),e.bitcoinPrice&&e.activeUnit=="sat"?(F(),se("span",Dg," ("+De(e.formatCurrency(e.bitcoinPrice/1e8*e.payInvoiceData.meltQuote.response.amount,"USD",!0))+") ",1)):re("",!0)])):e.payInvoiceData.meltQuote.error!=""?(F(),se("h6",Cg,De(e.payInvoiceData.meltQuote.error),1)):(F(),se("h6",xg,"Processing..."))]),E("div",Sg,[m(l,{class:"q-mt-md"})])]),E("p",Tg,[e.payInvoiceData.invoice.description?(F(),se("strong",Eg,"Memo:")):re("",!0),W(" "+De(e.payInvoiceData.invoice.description),1),t[7]||(t[7]=E("br",null,null,-1))]),E("div",qg,[m(o)]),e.enoughActiveBalance?(F(),se("div",Pg,[m(J,{unelevated:"",rounded:"",color:"primary",disabled:e.payInvoiceData.blocking||e.payInvoiceData.meltQuote.error!="",onClick:e.handleMeltButton,label:e.payInvoiceData.meltQuote.error!=""?"Error":e.payInvoiceData.blocking?"Processing...":"Pay",loading:e.globalMutexLock&&!e.payInvoiceData.blocking,class:"q-px-lg"},{loading:v(()=>[m(Ot)]),_:1},8,["disabled","onClick","label","loading"]),it((F(),ne(J,{flat:"",color:"grey",class:"q-ml-auto"},{default:v(()=>t[8]||(t[8]=[W("Close")])),_:1})),[[lt]])])):(F(),se("div",Mg,[m(J,{unelevated:"",rounded:"",disabled:"",color:"yellow","text-color":"black"},{default:v(()=>t[9]||(t[9]=[W("Balance too low")])),_:1}),it((F(),ne(J,{flat:"",color:"grey",class:"q-ml-auto"},{default:v(()=>t[10]||(t[10]=[W("Close")])),_:1})),[[lt]])]))])):e.payInvoiceData.lnurlpay?(F(),se("div",Ig,[m(Eo,{onSubmit:e.lnurlPaySecond,class:"q-gutter-md"},{default:v(()=>[e.payInvoiceData.lnurlpay.maxSendable==e.payInvoiceData.lnurlpay.minSendable?(F(),se("p",Ag,[E("b",null,De(e.payInvoiceData.lnurlpay.domain),1),W(" is requesting "+De(e.payInvoiceData.lnurlpay.maxSendable/1e3)+" "+De(e.tickerShort),1)])):(F(),se("p",Ug,[E("b",null,De(e.payInvoiceData.lnurlpay.targetUser||e.payInvoiceData.lnurlpay.domain),1),t[11]||(t[11]=W(" is requesting ")),t[12]||(t[12]=E("br",null,null,-1)),t[13]||(t[13]=W(" between ")),E("b",null,De(e.payInvoiceData.lnurlpay.minSendable/1e3),1),t[14]||(t[14]=W(" and ")),E("b",null,De(e.payInvoiceData.lnurlpay.maxSendable/1e3),1),W(" "+De(e.tickerShort),1)])),m(_r,{class:"q-my-sm"}),e.payInvoiceData.lnurlpay.description?(F(),se("div",Bg,[E("p",$g,De(e.payInvoiceData.lnurlpay.description),1),e.payInvoiceData.lnurlpay.image?(F(),se("p",Rg,[m(pg,{src:e.payInvoiceData.lnurlpay.image},null,8,["src"])])):re("",!0)])):re("",!0),E("div",Fg,[E("div",Lg,[m(_t,{filled:"",dense:"",autofocus:"",modelValue:e.payInvoiceData.input.amount,"onUpdate:modelValue":t[0]||(t[0]=k=>e.payInvoiceData.input.amount=k),modelModifiers:{number:!0},type:"number",label:"Amount ("+e.tickerShort+") *",min:e.payInvoiceData.lnurlpay.minSendable/1e3,max:e.payInvoiceData.lnurlpay.maxSendable/1e3,readonly:e.payInvoiceData.lnurlpay.maxSendable==e.payInvoiceData.lnurlpay.minSendable},null,8,["modelValue","label","min","max","readonly"])]),e.payInvoiceData.lnurlpay.commentAllowed>0?(F(),se("div",Ng,[m(_t,{filled:"",dense:"",modelValue:e.payInvoiceData.input.comment,"onUpdate:modelValue":t[1]||(t[1]=k=>e.payInvoiceData.input.comment=k),_type:"payInvoiceData.lnurlpay.commentAllowed > 64 ? 'textarea' : 'text'",label:"Comment (optional)",maxlength:e.payInvoiceData.lnurlpay.commentAllowed},null,8,["modelValue","maxlength"])])):re("",!0)]),E("div",Og,[m(J,{unelevated:"",color:"primary",type:"submit"},{default:v(()=>t[15]||(t[15]=[W("Send")])),_:1}),it((F(),ne(J,{flat:"",color:"grey",class:"q-ml-auto"},{default:v(()=>t[16]||(t[16]=[W("Close")])),_:1})),[[lt]])])]),_:1},8,["onSubmit"])])):(F(),se("div",Vg,[t[21]||(t[21]=E("div",{class:"row items-center no-wrap q-mb-xl"},[E("div",{class:"col-10"},[E("span",{class:"text-h6"},"Pay Lightning")])],-1)),e.camera.show?re("",!0):(F(),ne(Eo,{key:0,onSubmit:t[5]||(t[5]=k=>e.decodeAndQuote(e.payInvoiceData.input.request)),class:"q-gutter-md relative-container"},{default:v(()=>[m(_t,{ref:"parseDialogInput",round:"",outlined:"",class:"request-input",spellcheck:"false",modelValue:e.payInvoiceData.input.request,"onUpdate:modelValue":t[3]||(t[3]=k=>e.payInvoiceData.input.request=k),modelModifiers:{trim:!0},type:"textarea",label:"Lightning invoice or address",autofocus:"",onKeyup:t[4]||(t[4]=Kt(k=>e.decodeAndQuote(e.payInvoiceData.input.request),["enter"]))},{default:v(()=>[e.payInvoiceData.input.request?(F(),ne(Me,{key:0,name:"close",color:"dark",class:"cursor-pointer floating-button",onClick:t[2]||(t[2]=k=>e.payInvoiceData.input.request="")})):re("",!0)]),_:1},8,["modelValue"]),E("div",zg,[e.payInvoiceData.input.request!=""?(F(),ne(J,{key:0,rounded:"",color:"primary",class:"q-mr-sm",type:"submit"},{default:v(()=>t[17]||(t[17]=[W("Enter")])),_:1})):re("",!0),e.canPasteFromClipboard&&e.payInvoiceData.input.request==""?(F(),ne(J,{key:1,unelevated:"",dense:"",onClick:e.pasteToParseDialog},{default:v(()=>[m(Me,{name:"content_paste",class:"q-pr-sm"}),t[18]||(t[18]=W("Paste"))]),_:1},8,["onClick"])):re("",!0),e.hasCamera&&e.payInvoiceData.input.request==""?(F(),ne(J,{key:2,unelevated:"",class:"q-mx-0",onClick:e.showCamera},{default:v(()=>[m(h),t[19]||(t[19]=E("span",{class:"q-pl-sm"},"Scan",-1))]),_:1},8,["onClick"])):re("",!0),it((F(),ne(J,{flat:"",rounded:"",color:"grey",class:"q-ml-auto"},{default:v(()=>t[20]||(t[20]=[W("Close")])),_:1})),[[lt]])])]),_:1}))]))]),_:1})]),_:1},8,["modelValue","onHide","maximized"]))}var Wg=ot(vg,[["render",jg],["__scopeId","data-v-093c4ade"]]);const Hg=ut({name:"InvoiceDetailDialog",mixins:[windowMixin],components:{ChooseMint:Fi,VueQrcode:Dr,NumericKeyboard:Ta},props:{},data:function(){return{createInvoiceButtonBlocked:!1}},watch:{showInvoiceDetails:function(e){e&&this.$nextTick(()=>{this.invoiceData.amount?this.showNumericKeyboard=!1:this.showNumericKeyboard=!0})}},computed:{...Se(dt,["invoiceData"]),...Se(Ke,["activeUnit","activeUnitLabel","activeUnitCurrencyMultiplyer"]),...Se(yn,["invoiceWorkerRunning"]),...Ie(et,["showInvoiceDetails","tickerShort","globalMutexLock","showNumericKeyboard"]),...Se(bn,["useNumericKeyboard"]),displayUnit:function(){return this.formatCurrency(this.invoiceData.amount,this.invoiceData.unit,!0)},shortUrl:function(){return Xt(this.invoiceData.mint)},runnerActive:function(){return this.invoiceWorkerRunning},isSmallScreen(){return this.$q.screen.lt.sm}},methods:{...Ee(dt,["requestMint","lnurlPaySecond","mintOnPaid"]),...Ee(Ke,["toggleUnit"]),requestMintButton:async function(){if(!!this.invoiceData.amount)try{this.showNumericKeyboard=!1;const e=Ke();this.invoiceData.amount*=this.activeUnitCurrencyMultiplyer,this.createInvoiceButtonBlocked=!0;const t=dt().mintWallet(e.activeMintUrl,e.activeUnit),n=await this.requestMint(this.invoiceData.amount,t);await this.mintOnPaid(n.quote)}catch(e){console.log("#### requestMintButton",e)}finally{this.createInvoiceButtonBlocked=!1}}}}),Kg={key:1},Qg={class:"row items-center no-wrap q-my-sm q-py-none"},Xg={class:"col-12"},Gg={class:"row items-center no-wrap q-my-sm q-py-none"},Yg={key:2,class:"text-center q-mt-none q-pt-none"},Zg=["href"],Jg={class:"row justify-center"},e0={class:"row justify-center"},t0={class:"row justify-center q-py-md"},n0={key:0,class:"row justify-center q-pt-sm"},i0={key:1,class:"row justify-center"},r0={class:"q-mt-lg text-h6"},o0={class:"row q-mt-lg"};function a0(e,t,n,i,r,a){const l=xe("NumericKeyboard"),o=xe("ChooseMint"),h=xe("vue-qrcode");return F(),ne(Dt,{modelValue:e.showInvoiceDetails,"onUpdate:modelValue":t[4]||(t[4]=k=>e.showInvoiceDetails=k),position:"top",maximized:e.$q.screen.lt.sm,"full-width":e.$q.screen.lt.sm,"full-height":e.$q.screen.lt.sm,"backdrop-filter":"blur(2px) brightness(60%)","transition-show":"fade","transition-hide":"fade","no-backdrop-dismiss":""},{default:v(()=>[m(kt,{class:"q-pa-lg q-px-sm qcard q-card-top"},{default:v(()=>[e.showNumericKeyboard&&e.useNumericKeyboard?(F(),ne(l,{key:0,"model-value":e.invoiceData.amount,"onUpdate:modelValue":t[0]||(t[0]=k=>e.invoiceData.amount=k),onDone:e.requestMintButton},null,8,["model-value","onDone"])):re("",!0),e.invoiceData.bolt11?(F(),se("div",Yg,[E("a",{class:"text-secondary",href:"lightning:"+e.invoiceData.bolt11},[m(Ri,{ratio:1,class:"q-ma-none q-ma-none"},{default:v(()=>[m(h,{value:"lightning:"+e.invoiceData.bolt11.toUpperCase(),options:{width:340},class:"rounded-borders"},null,8,["value"])]),_:1})],8,Zg),E("div",Jg,[m(gt,{class:"q-pa-sm"},{default:v(()=>[E("div",e0,[m(Le,{overline:"",class:"q-mb-sm q-pt-md text-white",style:{"font-size":"1rem"}},{default:v(()=>t[8]||(t[8]=[W(" Lightning invoice")])),_:1})]),E("div",t0,[m(Le,{style:{"font-size":"28px"},class:"text-weight-bold"},{default:v(()=>[m(Me,{name:e.invoiceData.amount>=0?"call_received":"call_made",color:e.invoiceData.status==="paid"?e.invoiceData.amount>=0?"green":"red":"",class:"q-mr-sm",size:"sm"},null,8,["name","color"]),E("strong",null,De(e.displayUnit),1)]),_:1})]),this.invoiceData.mint!=null?(F(),se("div",n0,[m(dn,{outline:"",class:"q-pa-md",style:{height:"36px","font-family":"monospace"}},{default:v(()=>[m(Me,{name:"account_balance",size:"xs",class:"q-mr-sm"}),W(" "+De(e.shortUrl),1)]),_:1})])):re("",!0),e.invoiceData.amount>0&&e.invoiceData.status==="paid"?(F(),se("div",i0,[m(Pt,{appear:"","enter-active-class":"animated tada"},{default:v(()=>[E("span",r0,[m(Me,{name:"check_circle",size:"1.5rem",color:"positive",class:"q-mr-sm q-mb-xs"}),t[9]||(t[9]=W("Paid! "))])]),_:1})])):re("",!0)]),_:1})]),E("div",o0,[e.invoiceData.bolt11?(F(),ne(J,{key:0,class:"q-mx-xs",size:"md",flat:"",onClick:t[3]||(t[3]=k=>e.copyText(e.invoiceData.bolt11))},{default:v(()=>t[10]||(t[10]=[W("Copy")])),_:1})):re("",!0),it((F(),ne(J,{flat:"",color:"grey",class:"q-ml-auto"},{default:v(()=>t[11]||(t[11]=[W("Close")])),_:1})),[[lt]])])])):(F(),se("div",Kg,[t[7]||(t[7]=E("div",{class:"row items-center no-wrap q-mb-sm q-pr-md q-py-lg"},[E("div",{class:"col-10"},[E("span",{class:"text-h6"},"Create Invoice")])],-1)),E("div",Qg,[E("div",Xg,[m(o)])]),m(_t,{round:"",outlined:"",type:"number",modelValue:e.invoiceData.amount,"onUpdate:modelValue":t[2]||(t[2]=k=>e.invoiceData.amount=k),modelModifiers:{number:!0},label:"Amount ("+e.tickerShort+") *",mask:"#","fill-mask":"0","reverse-fill-mask":"",autofocus:"",class:"q-mb-lg",onKeyup:Kt(e.requestMintButton,["enter"])},{default:v(()=>[m(J,{flat:"",color:"primary",onClick:t[1]||(t[1]=k=>e.toggleUnit()),label:e.activeUnitLabel},null,8,["label"])]),_:1},8,["modelValue","label","onKeyup"]),E("div",Gg,[m(J,{color:"primary",rounded:"",onClick:e.requestMintButton,disable:!(e.invoiceData.amount>0)||e.createInvoiceButtonBlocked,label:e.createInvoiceButtonBlocked?"Creating invoice...":"Create Invoice",loading:e.globalMutexLock},{loading:v(()=>[m(Ot),t[5]||(t[5]=W(" Creating "))]),_:1},8,["onClick","disable","label","loading"]),it((F(),ne(J,{rounded:"",flat:"",color:"grey",class:"q-ml-auto"},{default:v(()=>t[6]||(t[6]=[W("Close")])),_:1})),[[lt]])])]))]),_:1})]),_:1},8,["modelValue","maximized","full-width","full-height"])}var s0=ot(Hg,[["render",a0],["__scopeId","data-v-21d6c2b8"]]);const l0=ut({name:"SendDialog",components:{XIcon:qa,CoinsIcon:Ea,ZapIcon:Pa,ScanIcon:Sn},mixins:[windowMixin],props:{},data:function(){return{currentPage:1,pageSize:5}},computed:{...Se(Ke,["mints"]),...Ie(et,["showInvoiceDetails","tab","showSendDialog","showReceiveDialog"]),...Ie(dt,["invoiceHistory","invoiceData","payInvoiceData"]),...Ie(pt,["camera"]),...Ie(ni,["showSendTokens","sendData","showLockInput"]),canMakePayments:function(){return!!this.mints.length}},methods:{...Ee(pt,["closeCamera","showCamera"]),showParseDialog:function(){if(!this.canMakePayments){Si("No mints available"),this.showSendDialog=!1;return}this.payInvoiceData.show=!0,this.payInvoiceData.invoice=null,this.payInvoiceData.lnurlpay=null,this.payInvoiceData.domain="",this.payInvoiceData.lnurlauth=null,this.payInvoiceData.input.request="",this.payInvoiceData.input.comment="",this.payInvoiceData.input.paymentChecker=null,this.camera.show=!1,this.showSendDialog=!1},showSendTokensDialog:function(){if(console.log("##### showSendTokensDialog"),!this.canMakePayments){Si("No mints available"),this.showSendDialog=!1;return}this.sendData.tokens="",this.sendData.tokensBase64="",this.sendData.amount=null,this.sendData.memo="",this.sendData.p2pkPubkey="",this.sendData.paymentRequest=void 0,this.showSendDialog=!1,this.showSendTokens=!0,this.showLockInput=!1}},created:function(){}}),u0={class:"q-gutter-y-md"},c0={class:"row items-center full-width"},d0={class:"icon-background q-mr-md"},f0={class:"row items-center full-width"},h0={class:"icon-background q-mr-md"};function m0(e,t,n,i,r,a){const l=xe("XIcon"),o=xe("ScanIcon"),h=xe("CoinsIcon"),k=xe("ZapIcon");return F(),ne(Dt,{modelValue:e.showSendDialog,"onUpdate:modelValue":t[0]||(t[0]=b=>e.showSendDialog=b),position:"bottom",maximized:e.$q.screen.lt.sm,"transition-show":"slide-up","transition-hide":"slide-down","backdrop-filter":"blur(2px) brightness(60%)"},{default:v(()=>[m(kt,{class:"bg-grey-10 text-white full-width-card q-pb-lg"},{default:v(()=>[m(gt,{class:"row items-center q-pb-sm"},{default:v(()=>[it((F(),ne(J,{flat:"",round:"",dense:"",class:"q-ml-sm",color:"primary"},{default:v(()=>[m(l)]),_:1})),[[lt]]),t[1]||(t[1]=E("div",{class:"col text-center"},[E("span",{class:"text-h6"},"Send")],-1)),m(J,{flat:"",round:"",dense:"",class:"q-mr-sm",onClick:e.showCamera,color:"primary"},{default:v(()=>[m(o)]),_:1},8,["onClick"])]),_:1}),m(gt,{class:"q-pa-md"},{default:v(()=>[E("div",u0,[m(J,{class:"full-width custom-btn",onClick:e.showSendTokensDialog},{default:v(()=>[E("div",c0,[E("div",d0,[m(h)]),t[2]||(t[2]=E("div",{class:"text-left"},[E("div",{class:"text-weight-bold custom-btn-text"},"ECASH")],-1))])]),_:1},8,["onClick"]),m(J,{class:"full-width custom-btn",onClick:e.showParseDialog},{default:v(()=>[E("div",f0,[E("div",h0,[m(k)]),t[3]||(t[3]=E("div",{class:"text-left"},[E("div",{class:"text-weight-bold custom-btn-text"},"LIGHTNING")],-1))])]),_:1},8,["onClick"])])]),_:1})]),_:1})]),_:1},8,["modelValue","maximized"])}var g0=ot(l0,[["render",m0],["__scopeId","data-v-454d966a"]]);const p0=ut({name:"PRDialog",mixins:[windowMixin],components:{VueQrcode:Dr,ToggleUnit:xr},data(){return{paymentRequestAmount:void 0,isEditingAmount:!1,amountInputValue:"",amountLabelDefault:"Add amount",amountLabel:"Add amount",defaultAnyMint:"Any Mint",chosenMintUrl:void 0,memo:""}},computed:{...Se(jt,["showPRKData"]),...Se(Ke,["activeMintUrl","activeUnit","activeUnitCurrencyMultiplyer"]),...Ie(jt,["showPRDialog"])},methods:{...Ee(jt,["newPaymentRequest"]),toggleUnit(){this.paymentRequestAmount=void 0,this.amountLabel=this.amountLabelDefault,this.newPaymentRequest(this.paymentRequestAmount,this.memo,this.chosenMintUrl)},newRequest(){this.newPaymentRequest(this.paymentRequestAmount,this.memo,this.chosenMintUrl)},getShortUrl(e){return e?Xt(e):this.defaultAnyMint},setActiveMintUrl(){this.activeMintUrl!=this.chosenMintUrl&&(this.chosenMintUrl=this.activeMintUrl,this.newPaymentRequest(this.paymentRequestAmount,this.memo,this.chosenMintUrl))},startEditingAmount(){this.isEditingAmount=!0,this.$nextTick(()=>{this.$refs.amountInput&&this.$refs.amountInput.focus()})},finishEditingAmount(){const e=parseFloat(this.amountInputValue);isNaN(e)||e<=0||this.amountInputValue==""?(this.paymentRequestAmount=void 0,this.amountLabel=this.amountLabelDefault):(this.paymentRequestAmount=e*this.activeUnitCurrencyMultiplyer,this.amountLabel=et().formatCurrency(e*this.activeUnitCurrencyMultiplyer,this.activeUnit)),this.newPaymentRequest(this.paymentRequestAmount,this.memo,this.chosenMintUrl),this.isEditingAmount=!1,this.amountInputValue=""}}}),v0={class:"text-center q-mb-md q-mt-none q-pt-none"},y0={class:"row justify-center"},w0={class:"row justify-center"},b0={class:"row justify-center q-pt-sm"},k0={class:"row justify-center"},_0={class:"row justify-center q-pt-sm"},D0={class:"row justify-center"},C0={class:"row justify-center q-pt-sm"},x0={key:0},S0={key:1},T0={class:"row q-mt-lg"};function E0(e,t,n,i,r,a){const l=xe("vue-qrcode"),o=xe("ToggleUnit");return F(),ne(Dt,{modelValue:e.showPRDialog,"onUpdate:modelValue":t[3]||(t[3]=h=>e.showPRDialog=h),position:"top","backdrop-filter":"blur(2px) brightness(60%)"},{default:v(()=>[e.showPRKData?(F(),ne(kt,{key:0,class:"q-px-lg q-pt-md q-pb-md qcard"},{default:v(()=>[E("div",v0,[m(Ri,{ratio:1,class:"q-mx-md q-mt-none q-pt-none"},{default:v(()=>[m(l,{value:e.showPRKData,options:{width:340},class:"rounded-borders"},null,8,["value"])]),_:1}),E("div",y0,[m(gt,{class:"q-pa-sm"},{default:v(()=>[E("div",w0,[m(Le,{overline:"",class:"q-mb-sm q-pt-md text-white",style:{"font-size":"1rem"}},{default:v(()=>t[4]||(t[4]=[W(" Payment Request")])),_:1})]),E("div",b0,[m(Le,{caption:"",class:"text-weight-light text-white",style:{"font-size":"14px"}},{default:v(()=>t[5]||(t[5]=[W("Receive payments via Nostr")])),_:1})])]),_:1})]),E("div",k0,[m(gt,{class:"q-pa-sm"},{default:v(()=>[E("div",_0,[m(dn,{outline:"",clickable:"",class:"q-pa-md q-py-md",style:ar(e.chosenMintUrl==null?"":"height: 36px; font-family: monospace"),onClick:e.setActiveMintUrl},{default:v(()=>[m(Me,{name:"account_balance",size:"xs",class:"q-mr-sm"}),W(" "+De(e.getShortUrl(e.chosenMintUrl)),1)]),_:1},8,["style","onClick"]),E("div",{onClick:t[0]||(t[0]=(...h)=>e.toggleUnit&&e.toggleUnit(...h)),class:"q-mt-xs q-ml-sm"},[m(o,{class:"q-py-none",color:"white"})])])]),_:1})]),E("div",D0,[m(gt,{class:"q-pa-sm"},{default:v(()=>[E("div",C0,[e.isEditingAmount?(F(),se("div",S0,[m(_t,{ref:"amountInput",modelValue:e.amountInputValue,"onUpdate:modelValue":t[1]||(t[1]=h=>e.amountInputValue=h),type:"number",placeholder:"Enter amount",onBlur:e.finishEditingAmount,onKeyup:Kt(e.finishEditingAmount,["enter"])},null,8,["modelValue","onBlur","onKeyup"])])):(F(),se("div",x0,[m(J,{color:"primary",rounded:"",onClick:e.startEditingAmount},{default:v(()=>[m(Me,{name:"edit_note",size:"xs",class:"q-mr-sm"}),W(" "+De(e.amountLabel),1)]),_:1},8,["onClick"])]))])]),_:1})]),m(J,{class:"q-mx-xs q-px-md q-mt-lg",size:"md",flat:"",rounded:"",dense:"",onClick:e.newRequest},{default:v(()=>[m(Me,{name:"refresh",class:"q-pr-sm",size:"xs"}),t[6]||(t[6]=W(" New request"))]),_:1},8,["onClick"]),E("div",T0,[m(J,{class:"q-mx-xs",size:"md",flat:"",onClick:t[2]||(t[2]=h=>e.copyText(e.showPRKData))},{default:v(()=>t[7]||(t[7]=[W("Copy")])),_:1}),it((F(),ne(J,{flat:"",color:"grey",class:"q-ml-auto"},{default:v(()=>t[8]||(t[8]=[W("Close")])),_:1})),[[lt]])])])]),_:1})):re("",!0)]),_:1},8,["modelValue"])}var q0=ot(p0,[["render",E0]]);const P0=ut({name:"ReceiveTokenDialog",mixins:[windowMixin],components:{P2PKDialog:Xs,PRDialog:q0,ChevronLeftIcon:Hh,ClipboardIcon:Kh,FileTextIcon:Qh,LockIcon:Xh,ScanIcon:Sn,NfcIcon:Rr},data:function(){return{showP2PKDialog:!1}},computed:{...Ie(zt,["showReceiveTokens","receiveData","scanningCard","watchClipboardPaste"]),...Se(et,["tickerShort","ndefSupported"]),...Se(Ke,["activeProofs","activeUnit","addMintBlocking"]),...Se(bn,["showNfcButtonInDrawer","autoPasteEcashReceive"]),...Ie(et,["showReceiveEcashDrawer"]),...Ie(Ke,["addMintData","showAddMintDialog"]),...Ie(jt,["showPRDialog"]),...Se(pt,["hasCamera"]),...Se(Gt,["p2pkKeys","showP2PkButtonInDrawer"]),...Se(jt,["enablePaymentRequest"]),...Ie(et,["showReceiveDialog"]),...Se(pt,["lastScannedResult"])},methods:{...Ee(dt,["redeem"]),...Ee(pt,["closeCamera","showCamera"]),...Ee(Qt,["addPendingToken"]),...Ee(Gt,["getPrivateKeyForP2PKEncodedToken","generateKeypair","showLastKey"]),...Ee(Ke,["addMint"]),...Ee(zt,["receiveIfDecodes","decodeToken","knowThisMintOfTokenJson","toggleScanner","pasteToParseDialog"]),...Ie(zt,["showReceiveTokens","receiveData"]),isiOsSafari(){const e=window.navigator.userAgent.toLowerCase(),t=/iphone|ipad|ipod/.test(e)&&/safari/.test(e);return console.log(`User agent: ${e}, is iOS Safari: ${t}`),t},handlePasteBtn:function(){this.receiveData.tokensBase64="",this.showReceiveTokens=!0,this.showReceiveEcashDrawer=!1,this.autoPasteEcashReceive&&(this.watchClipboardPaste=!0)},handleLockBtn:function(){this.showP2PKDialog=!this.showP2PKDialog,(!this.p2pkKeys.length||!this.showP2PKDialog)&&this.generateKeypair(),this.showLastKey(),this.showReceiveEcashDrawer=!1},handlePaymentRequestBtn:function(){const e=jt();this.showPRDialog=!this.showPRDialog,this.showPRDialog&&e.newPaymentRequest(),this.showReceiveEcashDrawer=!1},handleNFCBtn:function(){this.toggleScanner()},handleQrCodeDecode(e){console.log("QR code decoded:",e),this.closeCamera()},goBack:function(){this.showReceiveEcashDrawer=!1,this.showReceiveDialog=!0}}}),M0={class:"q-gutter-y-md"},I0={class:"row items-center full-width"},A0={class:"icon-background q-mr-md"},U0={class:"row items-center full-width"},B0={class:"icon-background q-mr-md"},$0={class:"row items-center full-width"},R0={class:"icon-background q-mr-md"},F0={class:"row items-center full-width"},L0={class:"icon-background q-mr-md"},N0={class:"row items-center full-width"},O0={class:"icon-background q-mr-md"},V0={class:"text-left"},z0={class:"text-weight-bold custom-btn-text"};function j0(e,t,n,i,r,a){const l=xe("ChevronLeftIcon"),o=xe("ScanIcon"),h=xe("ClipboardIcon"),k=xe("FileTextIcon"),b=xe("LockIcon"),S=xe("NfcIcon"),T=xe("P2PKDialog"),I=xe("PRDialog");return F(),se(Tt,null,[m(Dt,{modelValue:e.showReceiveEcashDrawer,"onUpdate:modelValue":t[0]||(t[0]=j=>e.showReceiveEcashDrawer=j),position:"bottom",maximized:e.$q.screen.lt.sm,"transition-show":"slide-up","transition-hide":"slide-down","backdrop-filter":"blur(2px) brightness(60%)"},{default:v(()=>[m(kt,{class:"bg-grey-10 text-white full-width-card q-pb-lg"},{default:v(()=>[m(gt,{class:"row items-center q-pb-sm"},{default:v(()=>[m(J,{flat:"",round:"",dense:"",onClick:e.goBack,class:"q-ml-sm",color:"primary"},{default:v(()=>[m(l)]),_:1},8,["onClick"]),t[3]||(t[3]=E("div",{class:"col text-center"},[E("span",{class:"text-h6"},"Receive Ecash")],-1)),m(J,{flat:"",round:"",dense:"",onClick:e.showCamera,class:"q-mr-sm",color:"primary"},{default:v(()=>[m(o)]),_:1},8,["onClick"])]),_:1}),m(gt,{class:"q-pa-md"},{default:v(()=>[E("div",M0,[m(J,{class:"full-width custom-btn",onClick:e.handlePasteBtn},{default:v(()=>[E("div",I0,[E("div",A0,[m(h)]),t[4]||(t[4]=E("div",{class:"text-left"},[E("div",{class:"text-weight-bold custom-btn-text"},"PASTE")],-1))])]),_:1},8,["onClick"]),m(J,{class:"full-width custom-btn",onClick:e.showCamera},{default:v(()=>[E("div",U0,[E("div",B0,[m(o)]),t[5]||(t[5]=E("div",{class:"text-left"},[E("div",{class:"text-weight-bold custom-btn-text"},"SCAN")],-1))])]),_:1},8,["onClick"]),e.enablePaymentRequest?(F(),ne(J,{key:0,class:"full-width custom-btn",onClick:e.handlePaymentRequestBtn},{default:v(()=>[E("div",$0,[E("div",R0,[m(k)]),t[6]||(t[6]=E("div",{class:"text-left"},[E("div",{class:"text-weight-bold custom-btn-text"},"REQUEST")],-1))])]),_:1},8,["onClick"])):re("",!0),e.showP2PkButtonInDrawer?(F(),ne(J,{key:1,class:"full-width custom-btn",onClick:e.handleLockBtn},{default:v(()=>[E("div",F0,[E("div",L0,[m(b)]),t[7]||(t[7]=E("div",{class:"text-left"},[E("div",{class:"text-weight-bold custom-btn-text"},"LOCK")],-1))])]),_:1},8,["onClick"])):re("",!0),e.ndefSupported&&e.showNfcButtonInDrawer?(F(),ne(J,{key:2,class:"full-width custom-btn",onClick:e.handleNFCBtn},{default:v(()=>[E("div",N0,[E("div",O0,[e.scanningCard?(F(),ne(Ui,{key:0,size:"sm"})):(F(),ne(S,{key:1}))]),E("div",V0,[E("div",z0," NFC "+De(e.scanningCard?"Scanning...":""),1)])])]),_:1},8,["onClick"])):re("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue","maximized"]),m(T,{modelValue:e.showP2PKDialog,"onUpdate:modelValue":t[1]||(t[1]=j=>e.showP2PKDialog=j)},null,8,["modelValue"]),m(I,{modelValue:e.showPRDialog,"onUpdate:modelValue":t[2]||(t[2]=j=>e.showPRDialog=j)},null,8,["modelValue"])],64)}var W0=ot(P0,[["render",j0],["__scopeId","data-v-4cfe33c2"]]);const H0=ut({name:"ReceiveDialog",components:{XIcon:qa,CoinsIcon:Ea,ZapIcon:Pa,ScanIcon:Sn,ReceiveEcashDrawer:W0},mixins:[windowMixin],props:{},data:function(){return{currentPage:1,pageSize:5}},computed:{...Ie(et,["showInvoiceDetails","showReceiveDialog","showReceiveEcashDrawer"]),...Ie(zt,["showReceiveTokens","receiveData"]),...Ie(dt,["invoiceData"]),...Se(Ke,["mints"]),canReceivePayments:function(){return!!this.mints.length}},methods:{toggleReceiveEcashDrawer:function(){this.showReceiveDialog=!1,this.showReceiveTokens=!1,this.showReceiveEcashDrawer=!0},showReceiveTokensDialog:function(){this.receiveData.tokensBase64="",this.showReceiveTokens=!0,this.showReceiveDialog=!1},showInvoiceCreateDialog:async function(){if(!this.canReceivePayments){Si("You need to connect to a mint to receive via Lightning"),this.showReceiveDialog=!1;return}console.log("##### showInvoiceCreateDialog"),this.invoiceData.amount="",this.invoiceData.bolt11="",this.invoiceData.hash="",this.invoiceData.memo="",this.showInvoiceDetails=!0,this.showReceiveDialog=!1},...Ee(pt,["closeCamera","showCamera"])},created:function(){}}),K0={class:"q-gutter-y-md"},Q0={class:"row items-center full-width"},X0={class:"icon-background q-mr-md"},G0={class:"row items-center full-width"},Y0={class:"icon-background q-mr-md"};function Z0(e,t,n,i,r,a){const l=xe("XIcon"),o=xe("ScanIcon"),h=xe("CoinsIcon"),k=xe("ZapIcon"),b=xe("ReceiveEcashDrawer");return F(),se(Tt,null,[m(Dt,{modelValue:e.showReceiveDialog,"onUpdate:modelValue":t[0]||(t[0]=S=>e.showReceiveDialog=S),position:"bottom",maximized:e.$q.screen.lt.sm,"transition-show":"slide-up","transition-hide":"slide-down","backdrop-filter":"blur(2px) brightness(60%)"},{default:v(()=>[m(kt,{class:"bg-grey-10 text-white full-width-card q-pb-lg"},{default:v(()=>[m(gt,{class:"row items-center q-pb-sm"},{default:v(()=>[it((F(),ne(J,{flat:"",round:"",dense:"",class:"q-ml-sm",color:"primary"},{default:v(()=>[m(l)]),_:1})),[[lt]]),t[1]||(t[1]=E("div",{class:"col text-center"},[E("span",{class:"text-h6"},"Receive")],-1)),m(J,{flat:"",round:"",dense:"",class:"q-mr-sm",onClick:e.showCamera,color:"primary"},{default:v(()=>[m(o)]),_:1},8,["onClick"])]),_:1}),m(gt,{class:"q-pa-md"},{default:v(()=>[E("div",K0,[m(J,{class:"full-width custom-btn",onClick:e.toggleReceiveEcashDrawer},{default:v(()=>[E("div",Q0,[E("div",X0,[m(h)]),t[2]||(t[2]=E("div",{class:"text-left"},[E("div",{class:"text-weight-bold custom-btn-text"},"ECASH")],-1))])]),_:1},8,["onClick"]),m(J,{class:"full-width custom-btn",onClick:e.showInvoiceCreateDialog},{default:v(()=>[E("div",G0,[E("div",Y0,[m(k)]),t[3]||(t[3]=E("div",{class:"text-left"},[E("div",{class:"text-weight-bold custom-btn-text"},"LIGHTNING")],-1))])]),_:1},8,["onClick"])])]),_:1})]),_:1})]),_:1},8,["modelValue","maximized"]),m(b)],64)}var J0=ot(H0,[["render",Z0],["__scopeId","data-v-04dbee34"]]);class Ne{constructor(t,n,i,r,a){this._legacyCanvasSize=Ne.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=t,this.$canvas=document.createElement("canvas"),i&&typeof i=="object"?this._onDecode=n:(console.warn(i||r||a?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=n),n=typeof i=="object"?i:{},this._onDecodeError=n.onDecodeError||(typeof i=="function"?i:this._onDecodeError),this._calculateScanRegion=n.calculateScanRegion||(typeof r=="function"?r:this._calculateScanRegion),this._preferredCamera=n.preferredCamera||a||this._preferredCamera,this._legacyCanvasSize=typeof i=="number"?i:typeof r=="number"?r:this._legacyCanvasSize,this._maxScansPerSecond=n.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),t.disablePictureInPicture=!0,t.playsInline=!0,t.muted=!0;let l=!1;if(t.hidden&&(t.hidden=!1,l=!0),document.body.contains(t)||(document.body.appendChild(t),l=!0),i=t.parentElement,n.highlightScanRegion||n.highlightCodeOutline){if(r=!!n.overlay,this.$overlay=n.overlay||document.createElement("div"),a=this.$overlay.style,a.position="absolute",a.display="none",a.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!r&&n.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}i.insertBefore(this.$overlay,this.$video.nextSibling)}n.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(t),requestAnimationFrame(()=>{let o=window.getComputedStyle(t);o.display==="none"&&(t.style.setProperty("display","block","important"),l=!0),o.visibility!=="visible"&&(t.style.setProperty("visibility","visible","important"),l=!0),l&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),t.style.opacity="0",t.style.width="0",t.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),t.addEventListener("play",this._onPlay),t.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=Ne.createQrEngine()}static set WORKER_PATH(t){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await Ne.listCameras(!1)).length}catch{return!1}}static async listCameras(t=!1){if(!navigator.mediaDevices)return[];let n=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(r=>r.kind==="videoinput"),i;try{t&&(await n()).every(r=>!r.label)&&(i=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(await n()).map((r,a)=>({id:r.deviceId,label:r.label||(a===0?"Default Camera":`Camera ${a+1}`)}))}finally{i&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),Ne._stopVideoStream(i))}}async hasFlash(){let t;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;t=this.$video.srcObject}else t=(await this._getCameraStream()).stream;return"torch"in t.getVideoTracks()[0].getSettings()}catch{return!1}finally{t&&t!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),Ne._stopVideoStream(t))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(t){throw this._flashOn=!1,t}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),Ne._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&(window.location.protocol!=="https:"&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:t,facingMode:n}=await this._getCameraStream();!this._active||this._paused?Ne._stopVideoStream(t):(this._setVideoMirror(n),this.$video.srcObject=t,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(t){if(!this._paused)throw this._active=!1,t}}stop(){this.pause(),this._active=!1}async pause(t=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let n=()=>{this.$video.srcObject instanceof MediaStream&&(Ne._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return t?(n(),!0):(await new Promise(i=>setTimeout(i,300)),this._paused?(n(),!0):!1)}async setCamera(t){t!==this._preferredCamera&&(this._preferredCamera=t,await this._restartVideoStream())}static async scanImage(t,n,i,r,a=!1,l=!1){let o,h=!1;n&&("scanRegion"in n||"qrEngine"in n||"canvas"in n||"disallowCanvasResizing"in n||"alsoTryWithoutScanRegion"in n||"returnDetailedScanResult"in n)?(o=n.scanRegion,i=n.qrEngine,r=n.canvas,a=n.disallowCanvasResizing||!1,l=n.alsoTryWithoutScanRegion||!1,h=!0):console.warn(n||i||r||a||l?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),n=!!i;try{let k,b;[i,k]=await Promise.all([i||Ne.createQrEngine(),Ne._loadImage(t)]),[r,b]=Ne._drawToCanvas(k,o,r,a);let S;if(i instanceof Worker){let T=i;n||Ne._postWorkerMessageSync(T,"inversionMode","both"),S=await new Promise((I,j)=>{let G,X,oe,H=-1;X=ue=>{ue.data.id===H&&(T.removeEventListener("message",X),T.removeEventListener("error",oe),clearTimeout(G),ue.data.data!==null?I({data:ue.data.data,cornerPoints:Ne._convertPoints(ue.data.cornerPoints,o)}):j(Ne.NO_QR_CODE_FOUND))},oe=ue=>{T.removeEventListener("message",X),T.removeEventListener("error",oe),clearTimeout(G),j("Scanner error: "+(ue?ue.message||ue:"Unknown Error"))},T.addEventListener("message",X),T.addEventListener("error",oe),G=setTimeout(()=>oe("timeout"),1e4);let te=b.getImageData(0,0,r.width,r.height);H=Ne._postWorkerMessageSync(T,"decode",te,[te.data.buffer])})}else S=await Promise.race([new Promise((T,I)=>window.setTimeout(()=>I("Scanner error: timeout"),1e4)),(async()=>{try{var[T]=await i.detect(r);if(!T)throw Ne.NO_QR_CODE_FOUND;return{data:T.rawValue,cornerPoints:Ne._convertPoints(T.cornerPoints,o)}}catch(I){if(T=I.message||I,/not implemented|service unavailable/.test(T))return Ne._disableBarcodeDetector=!0,Ne.scanImage(t,{scanRegion:o,canvas:r,disallowCanvasResizing:a,alsoTryWithoutScanRegion:l});throw`Scanner error: ${T}`}})()]);return h?S:S.data}catch(k){if(!o||!l)throw k;let b=await Ne.scanImage(t,{qrEngine:i,canvas:r,disallowCanvasResizing:a});return h?b:b.data}finally{n||Ne._postWorkerMessage(i,"close")}}setGrayscaleWeights(t,n,i,r=!0){Ne._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:t,green:n,blue:i,useIntegerApproximation:r})}setInversionMode(t){Ne._postWorkerMessage(this._qrEnginePromise,"inversionMode",t)}static async createQrEngine(t){if(t&&console.warn("Specifying a worker path is not required and not supported anymore."),t=()=>ks(()=>import("./qr-scanner-worker.min.56d417f3.js"),[]).then(i=>i.createWorker()),!(!Ne._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return t();let n=navigator.userAgentData;return n&&n.brands.some(({brand:i})=>/Chromium/i.test(i))&&/mac ?OS/i.test(n.platform)&&await n.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:i,platformVersion:r})=>/arm/i.test(i||"arm")&&13<=parseInt(r||"13")).catch(()=>!0)?t():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(t){let n=Math.round(.6666666666666666*Math.min(t.videoWidth,t.videoHeight));return{x:Math.round((t.videoWidth-n)/2),y:Math.round((t.videoHeight-n)/2),width:n,height:n,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var t=this.$video,n=t.videoWidth,i=t.videoHeight,r=t.offsetWidth,a=t.offsetHeight,l=t.offsetLeft,o=t.offsetTop,h=window.getComputedStyle(t),k=h.objectFit,b=n/i,S=r/a;switch(k){case"none":var T=n,I=i;break;case"fill":T=r,I=a;break;default:(k==="cover"?b>S:b<S)?(I=a,T=I*b):(T=r,I=T/b),k==="scale-down"&&(T=Math.min(T,n),I=Math.min(I,i))}var[j,G]=h.objectPosition.split(" ").map((oe,H)=>{const te=parseFloat(oe);return oe.endsWith("%")?(H?a-I:r-T)*te/100:te});h=this._scanRegion.width||n,S=this._scanRegion.height||i,k=this._scanRegion.x||0;var X=this._scanRegion.y||0;b=this.$overlay.style,b.width=`${h/n*T}px`,b.height=`${S/i*I}px`,b.top=`${o+G+X/i*I}px`,i=/scaleX\(-1\)/.test(t.style.transform),b.left=`${l+(i?r-j-T:j)+(i?n-k-h:k)/n*T}px`,b.transform=t.style.transform}})}static _convertPoints(t,n){if(!n)return t;let i=n.x||0,r=n.y||0,a=n.width&&n.downScaledWidth?n.width/n.downScaledWidth:1;n=n.height&&n.downScaledHeight?n.height/n.downScaledHeight:1;for(let l of t)l.x=l.x*a+i,l.y=l.y*n+r;return t}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var t=Date.now()-this._lastScanTimestamp,n=1e3/this._maxScansPerSecond;t<n&&await new Promise(r=>setTimeout(r,n-t)),this._lastScanTimestamp=Date.now();try{var i=await Ne.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(r){if(!this._active)return;this._onDecodeError(r)}!Ne._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=Ne.createQrEngine()),i?(this._onDecode?this._onDecode(i):this._legacyOnDecode&&this._legacyOnDecode(i.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} ${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",i.cornerPoints.map(({x:r,y:a})=>`${r},${a}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(t){t!==Ne.NO_QR_CODE_FOUND&&console.log(t)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let t=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",n=[{width:{min:1024}},{width:{min:768}},{}],i=n.map(r=>Object.assign({},r,{[t]:{exact:this._preferredCamera}}));for(let r of[...i,...n])try{let a=await navigator.mediaDevices.getUserMedia({video:r,audio:!1}),l=this._getFacingMode(a)||(r.facingMode?this._preferredCamera:this._preferredCamera==="environment"?"user":"environment");return{stream:a,facingMode:l}}catch{}throw"Camera not found."}async _restartVideoStream(){let t=this._paused;await this.pause(!0)&&!t&&this._active&&await this.start()}static _stopVideoStream(t){for(let n of t.getTracks())n.stop(),t.removeTrack(n)}_setVideoMirror(t){this.$video.style.transform="scaleX("+(t==="user"?-1:1)+")"}_getFacingMode(t){return(t=t.getVideoTracks()[0])?/rear|back|environment/i.test(t.label)?"environment":/front|user|face/i.test(t.label)?"user":null:null}static _drawToCanvas(t,n,i,r=!1){i=i||document.createElement("canvas");let a=n&&n.x?n.x:0,l=n&&n.y?n.y:0,o=n&&n.width?n.width:t.videoWidth||t.width,h=n&&n.height?n.height:t.videoHeight||t.height;return r||(r=n&&n.downScaledWidth?n.downScaledWidth:o,n=n&&n.downScaledHeight?n.downScaledHeight:h,i.width!==r&&(i.width=r),i.height!==n&&(i.height=n)),n=i.getContext("2d",{alpha:!1}),n.imageSmoothingEnabled=!1,n.drawImage(t,a,l,o,h,0,0,i.width,i.height),[i,n]}static async _loadImage(t){if(t instanceof Image)return await Ne._awaitImageLoad(t),t;if(t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||t instanceof SVGImageElement||"OffscreenCanvas"in window&&t instanceof OffscreenCanvas||"ImageBitmap"in window&&t instanceof ImageBitmap)return t;if(t instanceof File||t instanceof Blob||t instanceof URL||typeof t=="string"){let n=new Image;n.src=t instanceof File||t instanceof Blob?URL.createObjectURL(t):t.toString();try{return await Ne._awaitImageLoad(n),n}finally{(t instanceof File||t instanceof Blob)&&URL.revokeObjectURL(n.src)}}else throw"Unsupported image type."}static async _awaitImageLoad(t){t.complete&&t.naturalWidth!==0||await new Promise((n,i)=>{let r=a=>{t.removeEventListener("load",r),t.removeEventListener("error",r),a instanceof ErrorEvent?i("Image load error"):n()};t.addEventListener("load",r),t.addEventListener("error",r)})}static async _postWorkerMessage(t,n,i,r){return Ne._postWorkerMessageSync(await t,n,i,r)}static _postWorkerMessageSync(t,n,i,r){if(!(t instanceof Worker))return-1;let a=Ne._workerMessageId++;return t.postMessage({id:a,type:n,data:i},r),a}}Ne.DEFAULT_CANVAS_SIZE=400;Ne.NO_QR_CODE_FOUND="No QR code found";Ne._disableBarcodeDetector=!1;Ne._workerMessageId=0;const ep={emits:["decode"],data(){return{qrScanner:null,urDecoder:null,urDecoderProgress:0}},mounted(){this.qrScanner=new Ne(this.$refs.cameraEl,e=>{this.handleResult(e)},{returnDetailedScanResult:!0,highlightScanRegion:!0,highlightCodeOutline:!0,onDecodeError:()=>{}}),this.qrScanner.start(),this.urDecoder=new Ah},computed:{...Se(pt,["camera","hasCamera"]),canPasteFromClipboard:function(){return window.isSecureContext&&navigator.clipboard&&navigator.clipboard.readText}},methods:{...Ee(pt,["closeCamera","showCamera"]),handleResult(e){if(e.data.toLowerCase().startsWith("ur:")){if(this.urDecoder?.receivePart(e.data),this.urDecoderProgress=this.urDecoder?.estimatedPercentComplete()||0,this.urDecoder?.isComplete()&&this.urDecoder?.isSuccess()){const n=(this.urDecoder?.resultUR()).decodeCBOR();this.$emit("decode",n.toString()),this.qrScanner?.stop(),this.urDecoderProgress=0}}else this.$emit("decode",e.data),this.qrScanner?.stop()},pasteToParseDialog:async function(){const e=await et().pasteFromClipboard();e&&this.$emit("decode",e)}},unmounted(){this.qrScanner?.destroy()}},tp={class:"text-center"},np={ref:"cameraEl",style:{width:"100%"}},ip={class:"row q-justify-center"},rp={class:"absolute-full flex flex-center"},op={class:"row q-my-sm"};function ap(e,t,n,i,r,a){return F(),ne(kt,null,{default:v(()=>[E("div",tp,[E("div",null,[E("video",np,null,512)]),E("div",null,[E("div",ip,[r.urDecoderProgress>0?(F(),ne(vl,{key:0,rounded:"",size:"30px",value:r.urDecoderProgress,indeterminate:r.urDecoderProgress===0,class:"q-mt-none",color:"secondary"},{default:v(()=>[E("div",rp,[m(cn,{color:"white","text-color":"secondary",style:{"font-size":"1rem",padding:"5px"},class:"text-weight-bold",label:Math.round(r.urDecoderProgress*100)+"%"+(r.urDecoderProgress>.9?" - Keep scanning":"")},null,8,["label"])])]),_:1},8,["value","indeterminate"])):re("",!0)])])]),E("div",op,[a.canPasteFromClipboard?(F(),ne(J,{key:0,unelevated:"",onClick:a.pasteToParseDialog},{default:v(()=>[m(Me,{name:"content_paste",class:"q-mr-sm"}),t[0]||(t[0]=W(" Paste"))]),_:1},8,["onClick"])):re("",!0),m(J,{onClick:e.closeCamera,flat:"",color:"grey",class:"q-ml-auto"},{default:v(()=>t[1]||(t[1]=[W("Close")])),_:1},8,["onClick"])])]),_:1})}var sp=ot(ep,[["render",ap]]);const lp=ut({name:"ActivityOrb",mixins:[windowMixin],components:{},props:{},data:function(){return{enableSpinner:!1}},mounted(){},computed:{...Ie(et,["activityOrb"]),...Se(dt,["activeWebsocketConnections"]),...Se(zt,["scanningCard"])},watch:{activityOrb:function(){this.activityOrb?(this.enableSpinner=!0,setTimeout(()=>{this.activityOrb=!1,this.enableSpinner=!1},2e3)):this.enableSpinner=!1},scanningCard:function(){this.scanningCard?this.enableSpinner=!0:this.enableSpinner=!1}},methods:{}}),up={class:"row justify-center q-mb-none",style:{position:"absolute",top:"60px",left:"0",width:"100%"}};function cp(e,t,n,i,r,a){return F(),se("div",up,[E("div",null,[m(Pt,{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:v(()=>[e.enableSpinner?(F(),ne(Me,{key:0,name:"adjust",color:"primary",size:"1.5em"})):re("",!0)]),_:1})])])}var dp=ot(lp,[["render",cp],["__scopeId","data-v-096046ed"]]);const fp=br("storage",{state:()=>({lastLocalStorageCleanUp:ur("cashu.lastLocalStorageCleanUp",new Date)}),actions:{checkLocalStorage:function(){this.checkLocalStorageQuota()?this.cleanUpLocalStorage(!0):this.cleanUpLocalStorageScheduler()},checkLocalStorageQuota:function(){const e=JSON.stringify(localStorage).length;console.log(`Local storage size: ${e} bytes`);let t=new Array(10240).join("x");try{return localStorage.setItem("cashu.test",t),localStorage.removeItem("cashu.test"),!1}catch{return console.log("Local storage quota exceeded"),pn("Local storage quota exceeded. Clean up your local storage."),!0}},cleanUpLocalStorageScheduler:function(){let t=this.lastLocalStorageCleanUp;(!t||isNaN(new Date(t).getTime())||new Date().getTime()-new Date(t).getTime()>6048e5)&&(console.log(`Last clean up: ${t}, cleaning up local storage`),this.cleanUpLocalStorage())},cleanUpLocalStorage:function(e=!1){const t=dt(),n=Qt(),i=JSON.stringify(localStorage).length;localStorage.removeItem("cashu.spentProofs");const r=200;let a=t.invoiceHistory.filter(b=>b.status=="paid");if(a.length>r){let b=a.sort((T,I)=>new Date(T.date).getTime()-new Date(I.date).getTime());const S=b.slice(0,b.length-r);t.invoiceHistory=t.invoiceHistory.filter(T=>!S.includes(T))}let l=n.historyTokens.filter(b=>b.status=="paid");if(l.length>r){let b=l.sort((T,I)=>new Date(T.date).getTime()-new Date(I.date).getTime());const S=b.slice(0,b.length-r);for(var o=0;o<S.length;o++)S[o].token=void 0}const h=JSON.stringify(localStorage).length,k=i-h;console.log(`Cleaned up ${k} bytes of local storage`),k>0&&e&&zo(`Cleaned up ${k} bytes`),this.lastLocalStorageCleanUp=new Date}},getters:{canPasteFromClipboard(){return window.isSecureContext&&navigator.clipboard&&navigator.clipboard.readText}}});const hp=ut({name:"ReceiveTokenDialog",mixins:[windowMixin],components:{TokenInformation:ea,NfcIcon:Rr,ScanIcon:Sn,ChooseMint:Fi},data:function(){return{showP2PKDialog:!1,swapSelected:!1}},watch:{watchClipboardPaste(e){e&&this.$nextTick(()=>{this.pasteToParseDialog(),this.watchClipboardPaste=!1})}},computed:{...Ie(zt,["showReceiveTokens","watchClipboardPaste","receiveData","scanningCard"]),...Se(et,["tickerShort","ndefSupported"]),...Se(Yn,["bitcoinPrice"]),...Se(Ke,["activeMintUrl","activeProofs","activeUnit","addMintBlocking","mints"]),...Se(bn,["enableReceiveSwaps"]),...Ie(Ke,["addMintData","showAddMintDialog"]),...Ie(jt,["showPRDialog"]),...Se(pt,["hasCamera"]),...Se(Gt,["p2pkKeys"]),...Se(jt,["enablePaymentRequest"]),...Se(Qn,["swapBlocking"]),...Ie(et,["showReceiveDialog"]),...Se(pt,["lastScannedResult"]),canPasteFromClipboard:function(){return window.isSecureContext&&navigator.clipboard&&navigator.clipboard.readText},tokenDecodesCorrectly:function(){return this.decodeToken(this.receiveData.tokensBase64)!==void 0},knowThisMint:function(){const e=this.decodeToken(this.receiveData.tokensBase64);return e==null?!1:this.knowThisMintOfTokenJson(e)},tokenAmount:function(){if(!this.tokenDecodesCorrectly)return 0;const e=this.decodeToken(this.receiveData.tokensBase64);return this.getProofs(e).reduce((t,n)=>t+=n.amount,0)},tokenUnit:function(){if(!this.tokenDecodesCorrectly)return"";const e=this.decodeToken(this.receiveData.tokensBase64);return He.getUnit(e)},tokenMint:function(){if(!this.tokenDecodesCorrectly)return"";const e=this.decodeToken(this.receiveData.tokensBase64);return this.getMint(e)},swapToMintAmount:function(){const e=this.decodeToken(this.receiveData.tokensBase64);return this.tokenAmount-Qn().meltToMintFees(e)}},methods:{...Ee(dt,["redeem"]),...Ee(pt,["closeCamera","showCamera"]),...Ee(Qt,["addPendingToken"]),...Ee(Gt,["getPrivateKeyForP2PKEncodedToken","generateKeypair","showLastKey"]),...Ee(Ke,["addMint"]),...Ee(zt,["receiveIfDecodes","decodeToken","knowThisMintOfTokenJson","toggleScanner","pasteToParseDialog"]),getProofs:function(e){return He.getProofs(e)},getMint:function(e){return He.getMint(e)},tokenAlreadyInHistory:function(e){return Qt().historyTokens.find(n=>n.token===e)!==void 0},addPendingTokenToHistory:function(e){if(this.tokenAlreadyInHistory(e)){this.notifySuccess("Ecash already in History"),this.showReceiveTokens=!1;return}const t=Qt(),n=this.decodeToken(e),i=this.getMint(n),r=He.getUnit(n),a=this.getProofs(n).reduce((l,o)=>l+=o.amount,0);t.addPendingToken({amount:a,token:e,mintInToken:i,unitInToken:r}),this.showReceiveTokens=!1,this.notifySuccess("Ecash added to History")},handleSwapToTrustedMint:async function(){const e=Ke().activeMint().mint;await zt().meltTokenToMint(this.receiveData.tokensBase64,e),this.swapSelected=!1}}}),mp={class:"row items-center no-wrap q-mb-sm q-mb-sm q-py-lg"},gp={class:"col-9"},pp={class:"text-h6"},vp={key:0,class:"q-ml-xs text-subtitle2 text-grey-6"},yp={class:"relative-container"},wp={class:"row"},bp={key:1},kp={key:2,class:"q-mr-xl"},_p={class:"row"},Dp={key:0,class:"row q-pt-md"},Cp={key:1,class:"row q-pl-md q-pt-sm"},xp={key:2,class:"row q-pt-xs"},Sp={key:3,class:"row q-pt-sm"};function Tp(e,t,n,i,r,a){const l=xe("ScanIcon"),o=xe("NfcIcon"),h=xe("TokenInformation"),k=xe("ChooseMint");return F(),ne(Dt,{modelValue:e.showReceiveTokens,"onUpdate:modelValue":t[7]||(t[7]=b=>e.showReceiveTokens=b),position:"top",maximized:e.$q.screen.lt.sm,"transition-show":"fade","transition-hide":"fade","no-backdrop-dismiss":""},{default:v(()=>[m(kt,{modelValue:e.showReceiveTokens,"onUpdate:modelValue":t[6]||(t[6]=b=>e.showReceiveTokens=b),class:"q-pa-lg qcard q-card-top"},{default:v(()=>[it((F(),ne(J,{rounded:"",flat:"",color:"grey",class:"close-btn-position"},{default:v(()=>t[8]||(t[8]=[W("Close")])),_:1})),[[lt]]),E("div",null,[E("div",mp,[E("div",gp,[E("span",pp,"Receive "+De(e.tokenAmount&&e.tokenUnit?e.formatCurrency(e.tokenAmount,e.tokenUnit):"Ecash"),1),e.tokenAmount&&e.tokenUnit&&e.tokenUnit=="sat"&&e.bitcoinPrice?(F(),se("span",vp," ("+De(e.formatCurrency(e.bitcoinPrice/1e8*e.tokenAmount,"USD",!0))+") ",1)):re("",!0)])]),E("div",yp,[m(_t,{round:"",outlined:"",spellcheck:"false",modelValue:e.receiveData.tokensBase64,"onUpdate:modelValue":t[1]||(t[1]=b=>e.receiveData.tokensBase64=b),label:"Paste Cashu token",type:"textarea",autofocus:"",class:"q-mb-lg cashub-nowrap",onKeyup:Kt(e.receiveIfDecodes,["enter"])},{default:v(()=>[e.receiveData.tokensBase64?(F(),ne(Me,{key:0,color:"dark",name:"close",class:"floating-button cursor-pointer",onClick:t[0]||(t[0]=b=>e.receiveData.tokensBase64="")})):re("",!0)]),_:1},8,["modelValue","onKeyup"])])]),E("div",wp,[e.receiveData.tokensBase64.length&&!e.tokenDecodesCorrectly?(F(),ne(J,{key:0,disabled:"",color:"yellow","text-color":"black",rounded:"",unelevated:"",class:"q-ml-xs q-mr-sm",label:"Invalid token"})):re("",!0),e.receiveData.tokensBase64.length?re("",!0):(F(),se("div",bp,[e.canPasteFromClipboard?(F(),ne(J,{key:0,unelevated:"",dense:"",class:"q-mr-sm",onClick:t[2]||(t[2]=b=>e.pasteToParseDialog(!0))},{default:v(()=>[m(Me,{name:"content_paste",class:"q-pr-sm"}),t[9]||(t[9]=W("Paste"))]),_:1})):re("",!0),e.hasCamera?(F(),ne(J,{key:1,unelevated:"",dense:"",class:"q-mx-sm",onClick:e.showCamera},{default:v(()=>[m(l,{size:"1.5em"}),t[10]||(t[10]=E("span",{class:"q-pl-sm"},"Scan",-1))]),_:1},8,["onClick"])):re("",!0),e.ndefSupported?(F(),ne(J,{key:2,unelevated:"",dense:"",class:"q-mx-sm",loading:e.scanningCard,disabled:e.scanningCard,onClick:e.toggleScanner},{loading:v(()=>[m(Ui,{onClick:e.toggleScanner},null,8,["onClick"])]),default:v(()=>[m(o,{class:"q-pr-xs"}),m(yt,null,{default:v(()=>[W(De(e.ndefSupported?"Read from NFC card":"NDEF unsupported"),1)]),_:1}),t[11]||(t[11]=W(" NFC "))]),_:1},8,["loading","disabled","onClick"])):re("",!0)])),e.tokenDecodesCorrectly?(F(),se("div",kp,[E("div",_p,[m(h,{encodedToken:e.receiveData.tokensBase64,showAmount:!0,showMintCheck:!0,showP2PKCheck:!0},null,8,["encodedToken"])]),e.swapSelected?re("",!0):(F(),se("div",Dp,[m(J,{onClick:e.receiveIfDecodes,color:"primary",rounded:"",class:"q-ml-xs q-mr-sm",disabled:e.addMintBlocking,loading:e.swapBlocking,label:e.knowThisMint&&e.addMintBlocking?"Adding mint ...":"Receive"},{loading:v(()=>[m(Ot)]),_:1},8,["onClick","disabled","loading","label"]),e.enableReceiveSwaps&&e.activeMintUrl&&e.mints.length?(F(),ne(J,{key:0,onClick:t[3]||(t[3]=b=>e.swapSelected=!0),color:"primary",rounded:"",flat:"",class:"q-mr-none"},{default:v(()=>[m(Me,{name:"swap_horiz",class:"q-pr-sm"}),t[13]||(t[13]=W(" Swap ")),m(yt,null,{default:v(()=>t[12]||(t[12]=[W("Swap to a trusted mint")])),_:1})]),_:1})):re("",!0),m(J,{onClick:t[4]||(t[4]=b=>e.addPendingTokenToHistory(e.receiveData.tokensBase64)),color:"primary",rounded:"",flat:"",class:"q-mr-none"},{default:v(()=>[t[15]||(t[15]=W("Later ")),m(yt,null,{default:v(()=>t[14]||(t[14]=[W("Add to history to receive later")])),_:1})]),_:1})])),e.swapSelected?(F(),se("div",Cp,[E("div",null,[m(Me,{name:"arrow_downward",class:"q-mr-xs",color:"positive"}),E("span",null,[t[16]||(t[16]=W("Swap ")),E("strong",null,De(e.formatCurrency(e.swapToMintAmount,e.tokenUnit)),1)])])])):re("",!0),e.swapSelected?(F(),se("div",xp,[m(k,{rounded:!0,title:"",style:"font-family: monospace; font-size: 12px;"})])):re("",!0),e.swapSelected?(F(),se("div",Sp,[m(J,{onClick:e.handleSwapToTrustedMint,color:"primary",rounded:"",class:"q-pr-md",loading:e.swapBlocking,disabled:e.activeMintUrl==e.tokenMint},{loading:v(()=>[m(Ot,{size:"xs"}),t[17]||(t[17]=W(" Swap "))]),default:v(()=>[m(Me,{name:"swap_horiz",class:"q-pr-sm"}),t[19]||(t[19]=W(" Swap ")),m(yt,null,{default:v(()=>t[18]||(t[18]=[W("Swap to a trusted mint")])),_:1})]),_:1},8,["onClick","loading","disabled"]),e.swapBlocking?re("",!0):(F(),ne(J,{key:0,onClick:t[5]||(t[5]=b=>e.swapSelected=!1),color:"grey",rounded:"",flat:"",class:"q-mr-none q-pr-sm"},{default:v(()=>[m(Me,{name:"close",class:"q-pr-sm"}),t[21]||(t[21]=W(" Cancel ")),m(yt,null,{default:v(()=>t[20]||(t[20]=[W("Cancel swap")])),_:1})]),_:1}))])):re("",!0)])):re("",!0)])]),_:1},8,["modelValue"])]),_:1},8,["modelValue","maximized"])}var Ep=ot(hp,[["render",Tp],["__scopeId","data-v-5a443b9f"]]);const qp={mixins:[windowMixin],components:{BalanceView:Xl,MintSettings:zu,InvoicesTable:od,HistoryTable:hd,NoMintWarnBanner:wd,WelcomeDialog:Dd,SendTokenDialog:mg,ReceiveTokenDialog:Ep,PayInvoiceDialog:Wg,InvoiceDetailDialog:s0,QrcodeReader:sp,SendDialog:g0,ReceiveDialog:J0,iOSPWAPrompt:Ls,AndroidPWAPrompt:Ns,ScanIcon:Sn,ActivityOrb:dp},data:function(){return{name:"",mintId:"",mintName:"",deferredPWAInstallPrompt:null,action:"main",parse:{show:!1,invoice:null,lnurlpay:null,lnurlauth:null,data:{request:"",amount:0,comment:""},paymentChecker:null,camera:{show:!1,camera:"auto"}},payments:[],paymentsChart:{show:!1},welcomeDialog:{show:!1},baseHost:location.protocol+"//"+location.host,baseURL:location.protocol+"//"+location.host+location.pathname,credit:0,newName:""}},computed:{...Se(et,["tickerShort"]),...Ie(et,["showInvoiceDetails","tab","showSendDialog","showReceiveDialog"]),...Ie(et,["expandHistory"]),...Ie(zt,["showReceiveTokens","receiveData"]),...Ie(ni,["showSendTokens","sendData"]),...Se(Ke,["activeMintUrl","activeProofs","keys","mints","proofs","activeMint"]),...Ie(dt,["invoiceHistory","invoiceData","payInvoiceData"]),...Ie(Ke,["addMintData","showAddMintDialog"]),...Ie(yn,["invoiceCheckListener","tokensCheckSpendableListener"]),...Se(Qt,["historyTokens"]),...Se(jt,["enablePaymentRequest"]),...Ie(pt,["camera","hasCamera"]),...Ie(Gt,["showP2PKDialog"]),...Ie(io,["showNWCDialog","nwcEnabled"]),pendingPaymentsExist:function(){return this.payments.findIndex(e=>e.pending)!==-1},balance:function(){return this.activeProofs.map(e=>e).flat().reduce((e,t)=>e+=t.amount,0)}},filters:{},methods:{...Ee(jo,["serializeProofs","getProofsMint","serializeProofsV2","sumProofs","deleteProofs"]),...Ee(Ke,["activateMintUrl","addMint","assertMintError","getBalance","setActiveProofs","setProofs","getKeysForKeyset"]),...Ee(yn,["clearAllWorkers","invoiceCheckWorker"]),...Ee(Qt,["setTokenPaid"]),...Ee(dt,["setInvoicePaid","mint","checkPendingTokens","decodeRequest","initializeMnemonic"]),...Ee(pt,["closeCamera","showCamera"]),...Ee(io,["listenToNWCCommands"]),...Ee(Gs,["generateNPCConnection","claimAllTokens"]),...Ee(lr,["sendNip04DirectMessage","sendNip17DirectMessage","subscribeToNip04DirectMessages","subscribeToNip17DirectMessages","sendNip17DirectMessageToNprofile","initSigner"]),...Ee(fp,["checkLocalStorage"]),...Ee(jt,["createPaymentRequest"]),...Ee(ll,["startInvoiceCheckerWorker","checkPendingInvoices"]),decodeToken:function(e){try{return He.decode(e)}catch{return null}},getProofs:function(e){return He.getProofs(e)},getMint:function(e){return He.getMint(e)},shortenString:function(e){return Cr(e,20,10)},getTokenList:function(){const e=this.activeProofs.map(n=>n.amount),t={};for(const n of e)t[n]=t[n]?t[n]+1:1;return Object.keys(t).map(n=>({value:parseInt(n),count:parseInt(t[n]),sum:n*t[n]}))},paymentTableRowKey:function(e){return e.payment_hash+e.amount},showChart:function(){this.paymentsChart.show=!0,this.$nextTick(()=>{generateChart(this.$refs.canvas,this.payments)})},focusInput(e){},showParseDialog:function(){this.payInvoiceData.show=!0,this.payInvoiceData.invoice=null,this.payInvoiceData.lnurlpay=null,this.payInvoiceData.domain="",this.payInvoiceData.lnurlauth=null,this.payInvoiceData.input.request="",this.payInvoiceData.input.comment="",this.payInvoiceData.input.paymentChecker=null,this.camera.show=!1,this.focusInput("parseDialogInput")},showWelcomePage:function(){Ki().termsAccepted||(Ki().showWelcome=!0),Ki().showWelcome&&this.$router.push("/welcome")},setTab:function(e){this.tab=e},decodeQR:function(e){this.camera.data=e,this.camera.show=!1,this.decodeRequest(e)},showInvoiceCreateDialog:async function(){console.log("##### showInvoiceCreateDialog"),this.invoiceData.amount="",this.invoiceData.bolt11="",this.invoiceData.hash="",this.invoiceData.memo="",this.showInvoiceDetails=!0},showSendTokensDialog:function(){console.log("##### showSendTokensDialog"),this.sendData.tokens="",this.sendData.tokensBase64="",this.sendData.amount=null,this.sendData.memo="",this.showSendTokens=!0},hideSendTokensDialog:function(){this.showSendTokens=!1},showReceiveTokensDialog:function(){this.receiveData.tokensBase64="",this.showReceiveTokens=!0},registerPWAEventHook:function(){window.addEventListener("beforeinstallprompt",e=>{this.deferredPWAInstallPrompt=e,console.log("'beforeinstallprompt' event was fired.",this.getPwaDisplayMode())})},getPwaDisplayMode:function(){const e=window.matchMedia("(display-mode: standalone)").matches;return document.referrer.startsWith("android-app://")?"twa":navigator.standalone||e?"standalone":"browser"},triggerPwaInstall:function(){this.deferredPWAInstallPrompt.prompt(),this.deferredPWAInstallPrompt.userChoice.then(e=>{e.outcome==="accepted"?(console.log("User accepted the install prompt"),this.setWelcomeDialogSeen()):console.log("User dismissed the install prompt")})},registerBroadcastChannel:async function(){sessionStorage.getItem("tabId")||sessionStorage.setItem("tabId",Math.random().toString(36).substring(2)+new Date().getTime().toString(36));const e=sessionStorage.getItem("tabId"),t=new BroadcastChannel("app_channel");t.postMessage({type:"new_tab_opened",senderId:e}),t.onmessage=async n=>{n.data.senderId!==e&&(n.data.type=="new_tab_opened"?t.postMessage({type:"already_running",senderId:e}):n.data.type=="already_running"&&this.$router.push("/already-running"))}}},watch:{},mounted:function(){this.generateNPCConnection(),this.claimAllTokens()},created:async function(){this.registerBroadcastChannel();let e=new URL(document.location).searchParams,t=new URL(document.location).hash;if(e.get("mint")){let r=e.get("mint");await this.setTab("mints"),this.showAddMintDialog=!0,this.addMintData={url:r}}if(localStorage.getItem("cashu.activeMintUrl")||this.setTab("mints"),console.log("Mint URL "+this.activeMintUrl),console.log("Wallet URL "+this.baseURL),e.get("token")||t.includes("token")){let r=e.get("token")||t.split("token=")[1],a=!1;for(var n=0;n<this.historyTokens.length;n++){var i=this.historyTokens[n].token;i==r&&this.historyTokens[n].amount>0&&(a=!0)}a||(this.receiveData.tokensBase64=r,this.showReceiveTokens=!0)}e.get("lightning")&&(this.showParseDialog(),this.payInvoiceData.input.request=e.get("lightning")),window.history.pushState({},document.title,window.location.href.split("?")[0].split("#")[0]),this.checkLocalStorage(),this.registerPWAEventHook(),this.initializeMnemonic(),this.initSigner(),this.showWelcomePage(),this.nwcEnabled&&this.listenToNWCCommands(),this.enablePaymentRequest&&this.subscribeToNip17DirectMessages(),this.startInvoiceCheckerWorker(),this.checkPendingInvoices(),et().enableDebugConsole()}},Pp={class:"row q-col-gutter-y-md justify-center q-pt-sm q-pb-md"},Mp={class:"col-12 col-sm-11 col-md-8 text-center q-gutter-y-md"},Ip={class:"row items-center justify-center no-wrap q-mb-none q-mx-none q-px-none q-pt-lg q-pb-md"},Ap={class:"col-5 q-mb-md"},Up={class:"col-2 q-mb-md q-mx-none"},Bp={class:"col-5 q-mb-md"},$p={style:{"margin-bottom":"0rem"}},Rp={class:"row q-pt-sm"},Fp={class:"col-12 q-pt-xs"};function Lp(e,t,n,i,r,a){const l=xe("ActivityOrb"),o=xe("NoMintWarnBanner"),h=xe("BalanceView"),k=xe("ScanIcon"),b=xe("ReceiveDialog"),S=xe("SendDialog"),T=xe("HistoryTable"),I=xe("InvoicesTable"),j=xe("MintSettings"),G=xe("iOSPWAPrompt"),X=xe("AndroidPWAPrompt"),oe=xe("PayInvoiceDialog"),H=xe("QrcodeReader"),te=xe("WelcomeDialog"),ue=xe("InvoiceDetailDialog"),_e=xe("SendTokenDialog"),we=xe("ReceiveTokenDialog");return F(),se("div",Pp,[E("div",Mp,[m(l),e.mints.length==0?(F(),ne(o,{key:0})):(F(),ne(h,{key:1,"set-tab":a.setTab},null,8,["set-tab"])),E("div",Ip,[E("div",Ap,[m(J,{rounded:"",dense:"",class:"q-px-md",color:"primary",style:{width:"140px"},onClick:t[0]||(t[0]=fe=>e.showReceiveDialog=!0),size:"1.2rem"},{default:v(()=>[m(Me,{name:"south_west",size:"1.2rem",class:"q-mr-xs"}),t[13]||(t[13]=W(" Receive"))]),_:1})]),m(Pt,{appear:"","enter-active-class":"animated pulse"},{default:v(()=>[E("div",Up,[m(J,{align:"center",size:"lg",outline:"",color:"primary",flat:"",onClick:e.showCamera},{default:v(()=>[m(k,{size:"2em"})]),_:1},8,["onClick"])])]),_:1}),E("div",Bp,[m(J,{rounded:"",dense:"",class:"q-px-md",style:{width:"140px"},color:"primary",onClick:t[1]||(t[1]=fe=>e.showSendDialog=!0),size:"1.2rem"},{default:v(()=>[m(Me,{name:"north_east",size:"1.2rem",class:"q-mr-xs"}),t[14]||(t[14]=W(" Send"))]),_:1})]),m(b,{modelValue:e.showReceiveDialog,"onUpdate:modelValue":t[2]||(t[2]=fe=>e.showReceiveDialog=fe)},null,8,["modelValue"]),m(S,{modelValue:e.showSendDialog,"onUpdate:modelValue":t[3]||(t[3]=fe=>e.showSendDialog=fe)},null,8,["modelValue"])]),m(Ro,{"expand-icon-class":"hidden",modelValue:e.expandHistory,"onUpdate:modelValue":t[6]||(t[6]=fe=>e.expandHistory=fe)},{header:v(({expanded:fe})=>[m(ht,{class:"item-center text-center"},{default:v(()=>[E("span",null,[m(Me,{color:"primary",name:fe?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["name"])])]),_:2},1024)]),default:v(()=>[m(Cl,{modelValue:e.tab,"onUpdate:modelValue":t[4]||(t[4]=fe=>e.tab=fe),"no-caps":"",class:sr(e.$q.dark.isActive?"bg-dark":"bg-white")},{default:v(()=>[m(Qi,{name:"history",class:"text-secondary",label:"History"}),m(Qi,{name:"invoices",class:"text-secondary",label:"Invoices"}),m(Qi,{name:"mints",class:"text-secondary",label:"Mints"})]),_:1},8,["modelValue","class"]),m(xl,{class:sr(e.$q.dark.isActive?"bg-dark":"bg-white"),modelValue:e.tab,"onUpdate:modelValue":t[5]||(t[5]=fe=>e.tab=fe),animated:""},{default:v(()=>[m(Xi,{name:"history"},{default:v(()=>[m(T)]),_:1}),m(Xi,{name:"invoices"},{default:v(()=>[m(I)]),_:1}),m(Xi,{name:"mints",class:"q-px-sm"},{default:v(()=>[m(j)]),_:1})]),_:1},8,["class","modelValue"])]),_:1},8,["modelValue"]),E("div",$p,[E("div",Rp,[E("div",Fp,[a.getPwaDisplayMode()=="browser"&&e.deferredPWAInstallPrompt!=null?(F(),ne(J,{key:0,class:"q-mx-xs q-px-sm q-my-sm",outline:"",size:"0.6rem",color:"primary",onClick:t[7]||(t[7]=fe=>a.triggerPwaInstall())},{default:v(()=>[t[16]||(t[16]=E("b",null,"Install",-1)),m(yt,null,{default:v(()=>t[15]||(t[15]=[W("Install Cashu")])),_:1})]),_:1})):re("",!0)])])]),m(G),m(X)]),m(oe,{modelValue:e.payInvoiceData.show,"onUpdate:modelValue":t[8]||(t[8]=fe=>e.payInvoiceData.show=fe)},null,8,["modelValue"]),m(Dt,{modelValue:e.camera.show,"onUpdate:modelValue":t[9]||(t[9]=fe=>e.camera.show=fe),"backdrop-filter":"blur(2px) brightness(60%)"},{default:v(()=>[m(H,{onDecode:a.decodeQR},null,8,["onDecode"])]),_:1},8,["modelValue"]),m(te,{"welcome-dialog":e.welcomeDialog,"trigger-pwa-install":a.triggerPwaInstall,"set-tab":a.setTab,"get-pwa-display-mode":a.getPwaDisplayMode,"set-welcome-dialog-seen":e.setWelcomeDialogSeen},null,8,["welcome-dialog","trigger-pwa-install","set-tab","get-pwa-display-mode","set-welcome-dialog-seen"]),m(ue,{modelValue:e.showInvoiceDetails,"onUpdate:modelValue":t[10]||(t[10]=fe=>e.showInvoiceDetails=fe)},null,8,["modelValue"]),m(_e,{modelValue:e.showSendTokens,"onUpdate:modelValue":t[11]||(t[11]=fe=>e.showSendTokens=fe)},null,8,["modelValue"]),m(we,{modelValue:e.showReceiveTokens,"onUpdate:modelValue":t[12]||(t[12]=fe=>e.showReceiveTokens=fe)},null,8,["modelValue"])])}var cv=ot(qp,[["render",Lp]]);export{cv as default};
